2025-08-22 23:39:22,564 - INFO - Spider实例将在需要时延迟创建
2025-08-22 23:39:24,441 - INFO - 成功加载 41 个Cookie
2025-08-22 23:39:24,694 - INFO - 已注入 41 个Cookie到浏览器上下文
2025-08-22 23:39:25,126 - INFO - Playwright浏览器设置完成
2025-08-22 23:39:25,131 - INFO - Playwright网络监听已设置
2025-08-22 23:39:25,131 - INFO - 正在访问: https://xyq.cbg.163.com/cgi-bin/query.py?act=recommend_search&recommend_type=1
2025-08-22 23:39:26,123 - INFO - 页面初始加载完成
2025-08-22 23:39:29,142 - INFO - 检测到已登录状态，当前URL: https://xyq.cbg.163.com/cgi-bin/login.py?act=show_mbauth
2025-08-22 23:39:29,142 - INFO - 登录状态检查: {'isLoggedIn': True, 'currentUrl': 'https://xyq.cbg.163.com/cgi-bin/login.py?act=show_mbauth', 'message': '已登录'}
2025-08-22 23:39:29,142 - INFO - 检测到已登录状态，更新Cookie...
2025-08-22 23:39:29,152 - INFO - Cookie已更新并保存到 E:\workspace\mh\config\cookies.txt
2025-08-22 23:39:29,152 - INFO - 数据收集已开始，请在浏览器中正常操作...
2025-08-22 23:39:29,152 - INFO - 所有对 recommend.py 的请求将被自动捕获和保存
2025-08-22 23:39:52,631 - INFO - 捕获到类型（role）的响应: https://xyq.cbg.163.com/cgi-bin/recommend.py?callback=Request.JSONP.request_map.request_0&_=1755877190646&act=recommd_by_role&server_id=132&areaid=54&server_name=%E8%A5%BF%E6%A0%85%E8%80%81%E8%A1%97&page=1&kindid=27&recommend_type=1&view_loc=reco_left&count=15 
2025-08-22 23:39:52,631 - INFO - 开始创建角色spider实例...
2025-08-22 23:39:53,363 - INFO - CBGSpider模块导入成功，开始实例化...
2025-08-22 23:39:53,364 - INFO - 成功从config/cookies.txt加载Cookie
2025-08-22 23:39:53,371 - INFO - 角色spider实例已创建
2025-08-22 23:39:53,379 - INFO - 开始保存角色数据，数量: 15
2025-08-22 23:39:53,379 - INFO - 检查角色数据库...
2025-08-22 23:39:53,379 - INFO - 检查数据库类型: role
2025-08-22 23:39:53,379 - INFO - 数据库路径: E:\workspace\mh\data\202508\cbg_roles_202508.db
2025-08-22 23:39:53,379 - INFO - 数据库文件是否存在: True
2025-08-22 23:39:53,379 - INFO - 获取角色spider实例...
2025-08-22 23:39:53,379 - INFO - 调用角色spider的save_role_data方法...
2025-08-22 23:39:53,415 - INFO - 成功加载game_auto_config.js配置，包含132个配置项
2025-08-22 23:39:54,645 - INFO - 角色 202508181400113-132-UUUIWM2R8L91 价格从 2424000.0 变更为 2411000，已记录到价格历史
2025-08-22 23:39:56,032 - INFO - 角色 202507281400113-132-XT2X7UZIWAVC 价格从 2049900.0 变更为 2022200，已记录到价格历史
2025-08-22 23:39:56,645 - INFO - 角色 202507281400113-132-DQIV8NKQN2UF 价格从 1600000.0 变更为 1588800，已记录到价格历史
2025-08-22 23:39:57,755 - INFO - 角色数据已保存: 15 条
2025-08-22 23:39:57,755 - INFO - 响应数据已保存: role - 15 条记录
2025-08-22 23:40:26,384 - INFO - 检测到页面关闭，停止数据收集服务
2025-08-22 23:40:26,432 - INFO - 检测到浏览器上下文关闭，停止数据收集服务
2025-08-22 23:40:26,762 - INFO - 数据收集已停止
2025-08-22 23:40:26,762 - INFO - 数据收集已停止
2025-08-22 23:40:26,974 - INFO - 数据收集已停止
2025-08-23 23:01:14,628 - INFO - Spider实例将在需要时延迟创建
2025-08-23 23:01:16,342 - INFO - 成功加载 41 个Cookie
2025-08-23 23:01:16,504 - INFO - 已注入 41 个Cookie到浏览器上下文
2025-08-23 23:01:16,830 - INFO - Playwright浏览器设置完成
2025-08-23 23:01:16,837 - INFO - Playwright网络监听已设置
2025-08-23 23:01:16,837 - INFO - 正在访问: https://xyq.cbg.163.com/cgi-bin/query.py?act=recommend_search&recommend_type=1
2025-08-23 23:01:17,964 - INFO - 页面初始加载完成
2025-08-23 23:01:20,414 - INFO - 捕获到类型（role）的响应: https://xyq.cbg.163.com/cgi-bin/recommend.py?callback=Request.JSONP.request_map.request_0&_=1755961277917&act=recommd_by_role&server_id=132&areaid=54&server_name=%E8%A5%BF%E6%A0%85%E8%80%81%E8%A1%97&page=1&kindid=27&recommend_type=1&view_loc=reco_left&count=15 
2025-08-23 23:01:20,414 - INFO - 开始创建角色spider实例...
2025-08-23 23:01:21,035 - INFO - CBGSpider模块导入成功，开始实例化...
2025-08-23 23:01:21,036 - INFO - 成功从config/cookies.txt加载Cookie
2025-08-23 23:01:21,042 - INFO - 角色spider实例已创建
2025-08-23 23:01:21,052 - INFO - 开始保存角色数据，数量: 15
2025-08-23 23:01:21,053 - INFO - 检查角色数据库...
2025-08-23 23:01:21,053 - INFO - 检查数据库类型: role
2025-08-23 23:01:21,053 - INFO - 数据库路径: E:\workspace\mh\data\202508\cbg_roles_202508.db
2025-08-23 23:01:21,053 - INFO - 数据库文件是否存在: True
2025-08-23 23:01:21,053 - INFO - 获取角色spider实例...
2025-08-23 23:01:21,053 - INFO - 调用角色spider的save_role_data方法...
2025-08-23 23:01:21,091 - INFO - 成功加载game_auto_config.js配置，包含132个配置项
2025-08-23 23:01:22,470 - INFO - 角色 202508041900113-132-N8Z1YPKXTJXY 价格从 1777777.0 变更为 1769999，已记录到价格历史
2025-08-23 23:01:23,736 - INFO - 角色 202508120900113-132-7XZB1EHATC11 价格从 2222200.0 变更为 2050000，已记录到价格历史
2025-08-23 23:01:23,983 - INFO - 角色 202508120900113-132-3MXXH6UXWX20 价格从 2229900.0 变更为 2050000，已记录到价格历史
2025-08-23 23:01:24,785 - INFO - 角色 202508071400113-132-S3NBYVDUZEQG 价格从 1999900.0 变更为 1888800，已记录到价格历史
2025-08-23 23:01:25,264 - INFO - 角色数据已保存: 15 条
2025-08-23 23:01:25,264 - INFO - 响应数据已保存: role - 15 条记录
2025-08-23 23:01:25,268 - INFO - 检测到已登录状态，当前URL: https://xyq.cbg.163.com/cgi-bin/query.py?act=recommend_search&recommend_type=1
2025-08-23 23:01:25,268 - INFO - 登录状态检查: {'isLoggedIn': True, 'currentUrl': 'https://xyq.cbg.163.com/cgi-bin/query.py?act=recommend_search&recommend_type=1', 'message': '已登录'}
2025-08-23 23:01:25,268 - INFO - 检测到已登录状态，更新Cookie...
2025-08-23 23:01:25,278 - INFO - 检测到页面关闭，停止数据收集服务
2025-08-23 23:01:25,284 - INFO - Cookie已更新并保存到 E:\workspace\mh\config\cookies.txt
2025-08-23 23:01:25,284 - INFO - 数据收集已开始，请在浏览器中正常操作...
2025-08-23 23:01:25,284 - INFO - 所有对 recommend.py 的请求将被自动捕获和保存
2025-08-23 23:01:25,290 - INFO - 检测到浏览器上下文关闭，停止数据收集服务
2025-08-23 23:01:25,567 - INFO - 数据收集已停止
2025-08-23 23:01:25,596 - ERROR - Future exception was never retrieved
future: <Future finished exception=TargetClosedError('Target page, context or browser has been closed')>
playwright._impl._errors.TargetClosedError: Target page, context or browser has been closed
2025-08-23 23:01:25,597 - ERROR - Future exception was never retrieved
future: <Future finished exception=TargetClosedError('Target page, context or browser has been closed')>
playwright._impl._errors.TargetClosedError: Target page, context or browser has been closed
