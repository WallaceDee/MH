"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[927],{3927:function(e,s,r){r.r(s),r.d(s,{default:function(){return u}});var t=function(){var e=this,s=e._self._c;return s("div",{staticClass:"login-container"},[s("el-card",{staticClass:"login-card",attrs:{shadow:"always"}},[s("div",{staticClass:"login-header",attrs:{slot:"header"},slot:"header"},[s("h2",[e._v("管理员登录")]),s("p",[e._v("梦幻灵瞳 - CBG数据分析平台")])]),s("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.loginRules,"label-width":"80px"},nativeOn:{submit:function(s){return s.preventDefault(),e.handleLogin.apply(null,arguments)}}},[s("el-form-item",{attrs:{label:"手机号",prop:"username"}},[s("el-input",{attrs:{placeholder:"请输入手机号",autocomplete:"off","prefix-icon":"el-icon-user"},model:{value:e.loginForm.username,callback:function(s){e.$set(e.loginForm,"username",s)},expression:"loginForm.username"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码",autocomplete:"off","prefix-icon":"el-icon-lock","show-password":""},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(s){e.$set(e.loginForm,"password",s)},expression:"loginForm.password"}})],1),s("el-form-item",[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleLogin}},[e._v(" 登录 ")])],1),s("el-form-item",{staticStyle:{"margin-bottom":"0"}},[s("el-alert",{attrs:{title:"管理后台仅限授权用户使用",type:"info",closable:!1,"show-icon":""}})],1)],1)],1)],1)},a=[],o=(r(4114),{name:"Login",data(){const e=(e,s,r)=>{s?/^1[3-9]\d{9}$/.test(s)?r():r(new Error("请输入正确的手机号格式")):r(new Error("请输入手机号"))};return{loading:!1,loginForm:{username:"",password:""},loginRules:{username:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:e,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码至少6个字符",trigger:"blur"}]}}},methods:{async handleLogin(){this.$refs.loginForm?this.$refs.loginForm.validate(async e=>{if(e){this.loading=!0;try{const e=await this.$api.auth.login({username:this.loginForm.username,password:this.loginForm.password});if(200===e.code)if(e.message&&e.message.includes("账户未激活"))this.$message.warning(e.message);else if(e.data&&e.data.token){localStorage.setItem("auth_token",e.data.token),localStorage.setItem("user_info",JSON.stringify(e.data.user)),this.$message.success("登录成功");const s=this.$route.query.redirect||"/";this.$router.push(s)}else this.$message.warning(e.message||"登录失败");else this.$message.error(e.message||"登录失败")}catch(s){console.error("登录失败:",s),this.$message.error("登录失败，请检查网络连接")}finally{this.loading=!1}}else this.$message.warning("请检查登录信息")}):this.$message.error("表单初始化失败，请刷新页面")}}}),l=o,n=r(1656),i=(0,n.A)(l,t,a,!1,null,"02d3bd18",null),u=i.exports}}]);
//# sourceMappingURL=927.f31ab3fe.js.map