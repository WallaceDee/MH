(function(){var e={47:function(e){"use strict";e.exports="data:image/webp;base64,UklGRjoBAABXRUJQVlA4WAoAAAAQAAAAEgAAEgAAQUxQSHwAAAABcEhbW2V9CL/BhDAGZTAZlEEZ/AghdA0G4SKEEEIIz3kTRMQEAEx40NGk5CXsGoCXWK/QT2ubApsroFRqrTVaa1lNLuZ6XLYFx7aeR2Z1y+D0I5TOCp24zZej3Z+sAJdaa2YKdDSTySwAMnQB+EsAIHcpiOmmkg8I8cBVVlA4IJgAAADQAwCdASoTABMAPpFCnEolo6KhqAgAsBIJQBkasVaNEfvE1zriadAA+x8A/GXrDP0+r4GHIlYppAGwHEiXPEQo/APYYFAluZHXciKPrS2Cl1CyVQ7AdEZlcQIYzuq+OveLakQy/ruZwQEy73j1uxqi8kuvjo/AJrWTUHowQR+o0/Kved1ne+nYpPGsh+57f/6hBzLM3cAAAA=="},54:function(e){"use strict";e.exports="data:image/webp;base64,UklGRmgBAABXRUJQVlA4WAoAAAAQAAAAEgAAEgAAQUxQSF0AAAABcBrJtlSdEJE3hJsJMTyJolBIJIU88kqiWe/CXwKIiAmAK8dTkFRbHTMNpv2IbXIGHlkbAKgdeSpgR9UgLI1y/HthqRfUFkBZmBVAY2pteDYm2ODrRoebItk5HVwAVlA4IOQAAADQBACdASoTABMAPpFAmkolo6IhqAgAsBIJbAC/7dwLdpI1c3paX9GCTKQFH0AW4AD+U7bhM8os8I1k77uom/0LW/HKsA75VzAhQeBpEFrKtSH/hRQ4QursgbUUgs8g2A00YpUqvAyFKe82Vml2rf1LIryYWX8dmsXT/EKYbRstNdvcqZYzIBqtvg8Rwh9htZzZC3YHAfsCfNRZW5Ibm7sh1FjEmqefCGUrTG/M1J1wwYHoy1wynpPwvnxUkz/HzMia/rdZFRX1+kpT/v+B0ON8TGZgaIyU0vETlLqUiB7/xKK6AAA="},407:function(e,t,i){"use strict";i.d(t,{A:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hasLayout"},[t("h4",[e._v(" 详细信息 "),e.current_pet.other&&e.current_pet.other.color_str&&e.current_pet.other.current_on_avt?t("span",[e._v("(已包含梦影穿戴属性)")]):e._e()]),t("div",{staticClass:"blank9"}),e.current_pet.is_child&&e.current_pet.isnew?t("table",{staticClass:"tb02",attrs:{width:"100%",cellspacing:"0",cellpadding:"0"}},[t("tr",[t("td",{attrs:{width:"152"}},[t("strong",[e._v("类型：")]),e._v(e._s(e.current_pet.kind))]),t("td",{attrs:{width:"150"}},[t("strong",[e._v("气血：")]),e._v(e._s(e.current_pet.blood_max))]),t("td",{attrs:{width:"150"}},[t("strong",[e._v("根骨：")]),e._v(e._s(e.current_pet.gg))])]),t("tr",[t("td",[t("strong",[e._v("等级：")]),e._v(e._s(e.current_pet.pet_grade))]),t("td",[t("strong",[e._v("魔法：")]),e._v(e._s(e.current_pet.magic_max))]),t("td",[t("strong",[e._v("智力：")]),e._v(e._s(e.current_pet.zl))])]),t("tr",[t("td",[t("strong",[e._v("悟性：")]),e._v(e._s(e.current_pet.child_sixwx))]),t("td",[t("strong",[e._v("攻击：")]),e._v(e._s(e.current_pet.attack))]),t("td",[t("strong",[e._v("武力：")]),e._v(e._s(e.current_pet.wl))])]),t("tr",[t("td",[t("strong",[e._v("门派：")]),e._v(e._s(e.current_pet.school))]),t("td",[t("strong",[e._v("防御：")]),e._v(e._s(e.current_pet.defence))]),t("td",[t("strong",[e._v("定力：")]),e._v(e._s(e.current_pet.dl))])]),t("tr",[t("td",[t("strong",[e._v("五行：")]),e._v(e._s(e.current_pet.wu_xing))]),t("td",[t("strong",[e._v("速度：")]),e._v(e._s(e.current_pet.speed))]),t("td",[t("strong",[e._v("念力：")]),e._v(e._s(e.current_pet.nl))])]),t("tr",[t("td",[t("strong",[e._v("结局：")]),e._v(e._s(e.current_pet.ending))]),t("td",[t("strong",[e._v("法伤：")]),e._v(e._s(e.current_pet.iMagDam_all))]),t("td",[t("strong",[e._v("灵敏：")]),e._v(e._s(e.current_pet.lm))])]),t("tr",[t("td"),t("td",[t("strong",[e._v("法防：")]),e._v(e._s(e.current_pet.ling_li))]),t("td")])]):t("table",{staticClass:"tb02 petZiZhiTb",attrs:{width:"100%",cellspacing:"0",cellpadding:"0"}},[t("tr",[t("td",[t("strong",[e._v("类型：")]),e._v(e._s(e.current_pet.kind))]),t("td",[t("strong",[e._v("等级：")]),e._v(e._s(e.current_pet.pet_grade))]),e.current_pet.color?t("td",[t("strong",[e._v("变异类型：")]),e._v(e._s(e.current_pet.color)+" ")]):t("td",[t("strong",[e._v("是否宝宝：")]),t("span",{style:{color:"否"===e.current_pet.is_baobao?"#FF0000":"#00FF00"}},[e._v(" "+e._s(e.current_pet.is_baobao)+" ")])])]),t("tr",[t("td",[t("strong",[e._v("气血：")]),e._v(e._s(e.current_pet.blood_max))]),t("td",[t("strong",[e._v("体质：")]),e._v(" "+e._s(e.current_pet.ti_zhi)+" "),e.current_pet.ti_zhi_add?t("span",{staticClass:"color-pink"},[e._v("+"+e._s(e.current_pet.ti_zhi_add))]):e._e()]),t("td",[t("strong",[e._v("攻击资质：")]),e._v(" "+e._s(e.current_pet.gong_ji_zz)+" "),e.current_pet.gong_ji_ext?t("span",{staticClass:"added_attr"},[e._v("+"+e._s(e.current_pet.gong_ji_ext))]):e._e()])]),t("tr",[t("td",[t("strong",[e._v("魔法：")]),e._v(e._s(e.current_pet.magic_max))]),t("td",[t("strong",[e._v("法力：")]),e._v(" "+e._s(e.current_pet.fa_li)+" "),e.current_pet.fa_li_add?t("span",{staticClass:"color-pink"},[e._v("+"+e._s(e.current_pet.fa_li_add))]):e._e()]),t("td",[t("strong",[e._v("防御资质：")]),e._v(" "+e._s(e.current_pet.fang_yu_zz)+" "),e.current_pet.fang_yu_ext?t("span",{staticClass:"added_attr"},[e._v("+"+e._s(e.current_pet.fang_yu_ext))]):e._e()])]),t("tr",[t("td",[t("strong",[e._v("攻击：")]),e._v(e._s(e.current_pet.attack))]),t("td",[t("strong",[e._v("力量：")]),e._v(" "+e._s(e.current_pet.li_liang)+" "),e.current_pet.li_liang_add?t("span",{staticClass:"color-pink"},[e._v("+"+e._s(e.current_pet.li_liang_add))]):e._e()]),t("td",[t("strong",[e._v("体力资质：")]),e._v(" "+e._s(e.current_pet.ti_li_zz)+" "),e.current_pet.ti_li_ext?t("span",{staticClass:"added_attr"},[e._v("+"+e._s(e.current_pet.ti_li_ext))]):e._e()])]),t("tr",[t("td",[t("strong",[e._v("防御：")]),e._v(e._s(e.current_pet.defence))]),t("td",[t("strong",[e._v("耐力：")]),e._v(" "+e._s(e.current_pet.nai_li)+" "),e.current_pet.nai_li_add?t("span",{staticClass:"color-pink"},[e._v("+"+e._s(e.current_pet.nai_li_add))]):e._e()]),t("td",[t("strong",[e._v("法力资质：")]),e._v(" "+e._s(e.current_pet.fa_li_zz)+" "),e.current_pet.fa_li_ext?t("span",{staticClass:"added_attr"},[e._v("+"+e._s(e.current_pet.fa_li_ext))]):e._e()])]),t("tr",[t("td",[t("strong",[e._v("速度：")]),e._v(e._s(e.current_pet.speed))]),t("td",[t("strong",[e._v("敏捷：")]),e._v(" "+e._s(e.current_pet.min_jie)+" "),e.current_pet.min_jie_add?t("span",{staticClass:"color-pink"},[e._v("+"+e._s(e.current_pet.min_jie_add))]):e._e()]),t("td",[t("strong",[e._v("速度资质：")]),e._v(" "+e._s(e.current_pet.su_du_zz)+" "),e.current_pet.su_du_ext?t("span",{staticClass:"added_attr"},[e._v("+"+e._s(e.current_pet.su_du_ext))]):e._e()])]),t("tr",[e.isShowNewLingli?t("td",[t("strong",[e._v("法伤：")]),e._v(e._s(e.current_pet.iMagDam))]):t("td",[t("strong",[e._v("灵力：")]),e._v(e._s(e.current_pet.ling_li))]),t("td",[t("strong",[e._v("潜能：")]),e._v(e._s(e.current_pet.qian_neng))]),t("td",[t("strong",[e._v("躲闪资质：")]),e._v(" "+e._s(e.current_pet.duo_shan_zz)+" "),e.current_pet.duo_shan_ext?t("span",{staticClass:"added_attr"},[e._v("+"+e._s(e.current_pet.duo_shan_ext))]):e._e()])]),t("tr",[e.isShowNewLingli?t("td",[t("strong",[e._v("法防：")]),e._v(e._s(e.current_pet.iMagDef))]):t("td",[t("strong",[e._v("寿命：")]),e._v(e._s(e.current_pet.lifetime))]),t("td",[t("strong",[e._v("成长：")]),e._v(e._s(e.current_pet.cheng_zhang))]),t("td",[t("strong",[e._v("五行：")]),e._v(e._s(e.current_pet.wu_xing))])]),t("tr",[t("td",[t("strong",[e._v("已用元宵：")]),e._v(e._s(e.current_pet.used_yuanxiao))]),t("td",[t("strong",[e._v("已用千金露：")]),e._v(e._s(e.current_pet.used_qianjinlu))])]),t("tr",[t("td",[e.current_pet.is_child?t("strong",[e._v("悟性：")]):e._e(),e.current_pet.is_child&&void 0!==e.current_pet.child_sixwx?t("span",[e._v(e._s(e.current_pet.child_sixwx))]):e.current_pet.is_child?t("span",[e._v("无")]):t("strong",[e._v("已用炼兽珍经：")]),e.current_pet.is_child?e._e():t("span",[e._v(e._s(e.current_pet.used_lianshou))])]),t("td",[t("strong",[e._v("已使用幻色丹：")]),e._v(e._s(e.getSummonColorDesc(e.current_pet.summon_color,e.current_pet.type_id))+" ")]),t("td",[t("strong",[e._v("历史灵性值：")]),e._v(e._s(e.getDictValue(e.current_pet.jinjie,"lx",0))+" ")])]),t("tr",[t("td",[t("strong",[e._v("已用清灵仙露：")]),e._v(e._s(e.getDictValue(e.current_pet.jinjie,"cnt",0))+" ")]),e.isShowNewLingli?t("td",[t("strong",[e._v("寿命：")]),e._v(e._s(e.current_pet.lifetime))]):e._e(),t("td")])]),t("div",{staticClass:"blank9"}),t("div",{staticClass:"hasLayout"},[t("div",{ref:"RoleSkillTipsBox",staticClass:"soldDetail",staticStyle:{width:"320px",display:"none"},attrs:{id:"RoleSkillTipsBox"}}),t("div",{staticClass:"cols",staticStyle:{width:"210px",margin:"0"}},[e.current_pet.evol_skill_list?t("h4",[e._v("赐福技能")]):e._e(),t("div",{staticClass:"blank9"}),e.current_pet.evol_skill_list?t("table",{staticClass:"tb03",attrs:{cellspacing:"0",cellpadding:"0",id:"RolePetCifu"}},e._l(e.evolSkillRows,(function(i,s){return t("tr",{key:s},e._l(i,(function(i,s){return t("td",{key:s,staticStyle:{position:"relative"}},[i.hlightLight?t("img",{attrs:{referrerpolicy:"no-referrer",src:i.icon,width:"40",height:"40",data_equip_name:i.name,data_skill_type:"cifu",data_equip_desc:i.desc,data_tip_box:"RoleSkillTipsBox",data_cifu_icon:i.cifuIcon,data_height_icon:i.heightCifuIcon},on:{mouseenter:function(t){return e.showSkillTip(t,i)},mouseleave:e.hideSkillTip}}):t("img",{staticStyle:{filter:"grayscale(100%)"},attrs:{referrerpolicy:"no-referrer",src:i.icon,width:"40",height:"40",data_equip_name:i.name,data_skill_type:"cifu",data_equip_desc:i.desc,data_tip_box:"RoleSkillTipsBox",data_cifu_icon:i.cifuIcon,data_height_icon:i.heightCifuIcon},on:{mouseenter:function(t){return e.showSkillTip(t,i)},mouseleave:e.hideSkillTip}}),i.hlightLight?t("div",{staticClass:"evol_skill_icon",attrs:{data_src:i.icon,data_equip_name:i.name,data_skill_type:"cifu",data_equip_desc:i.desc,data_tip_box:"RoleSkillTipsBox",data_cifu_icon:i.cifuIcon,data_height_icon:i.heightCifuIcon}}):t("div",{staticClass:"evol_skill_icon",staticStyle:{filter:"grayscale(100%)"},attrs:{data_src:i.icon,data_equip_name:i.name,data_skill_type:"cifu",data_equip_desc:i.desc,data_tip_box:"RoleSkillTipsBox",data_cifu_icon:i.cifuIcon,data_height_icon:i.heightCifuIcon}})])})),0)})),0):e._e(),e.current_pet.evol_skill_list?t("div",{staticClass:"blank12",staticStyle:{clear:"both"}}):e._e(),t("h4",[e._v("技能")]),t("div",{staticClass:"blank9"}),t("table",{staticClass:"tb03",attrs:{cellspacing:"0",cellpadding:"0",id:"RolePetSkill"}},e._l(e.petSkillRows,(function(i,s){return t("tr",{key:s},[e._l(i,(function(i,s){return t("td",{key:s,staticStyle:{position:"relative"}},[t("img",{attrs:{referrerpolicy:"no-referrer",src:i.icon,width:"40",height:"40",data_equip_name:i.name,data_skill_type:"cifu",data_equip_desc:i.desc,data_tip_box:"RoleSkillTipsBox",data_is_super_skill:i.isSuperSkill},on:{mouseenter:function(t){return e.showSkillTip(t,i)},mouseleave:e.hideSkillTip}}),i.hashEvol?t("div",{staticClass:"evol_skill_icon",attrs:{data_src:i.icon,data_equip_name:i.name,data_skill_type:"cifu",data_equip_desc:i.desc,data_tip_box:"RoleSkillTipsBox",data_is_super_skill:i.isSuperSkill}}):e._e()])})),e._l(4-i.length,(function(a){return[a===4-i.length&&s===e.petSkillRows.length-1&&e.current_pet.genius?t("td",{key:"genius-"+a},[t("img",{staticClass:"on",attrs:{referrerpolicy:"no-referrer",src:e.current_pet.genius_skill.icon,data_equip_name:e.current_pet.genius_skill.name,data_skill_type:"cifu",data_equip_desc:e.current_pet.genius_skill.desc,data_tip_box:"RoleSkillTipsBox",data_is_super_skill:e.current_pet.genius_skill.isSuperSkill},on:{mouseenter:function(t){return e.showSkillTip(t,e.current_pet.genius_skill)},mouseleave:e.hideSkillTip}})]):t("td",{key:"empty-"+a})]}))],2)})),0),e.current_pet.is_child?e._e():[t("div",{staticClass:"blank9"}),e.current_pet.core_close&&void 0!==e.getDictValue(e.current_pet.jinjie,"core",{}).id?t("h4",[e._v(" 特性:"+e._s(e.current_pet.core_close)+" ")]):t("h4",[e._v("特性")]),void 0!==e.getDictValue(e.current_pet.jinjie,"core",{}).id?t("div",{staticStyle:{"text-align":"left"}},[t("span",[e._v(e._s(e.getDictValue(e.current_pet.jinjie,"core",{}).name)+"："),t("span",{domProps:{innerHTML:e._s(e.parseStyleInfo(e.getDictValue(e.current_pet.jinjie,"core",{}).effect))}})])]):t("div",{staticStyle:{"text-align":"center"}},[e._v("无")])]],2),t("div",{staticClass:"cols",staticStyle:{float:"right",width:"232px",margin:"0"}},[e.current_pet.is_child?e._e():t("div",{staticClass:"cols",staticStyle:{width:"160px",margin:"0"}},[t("h4",[e._v("装备")]),t("div",{staticClass:"blank6"}),t("table",{staticClass:"tb03 size50",attrs:{cellspacing:"0",cellpadding:"0",id:"RolePetEquips"}},[t("tr",e._l(e.current_pet.equip_list,(function(i,s){return t("td",{key:s},[i?t("ItemPopover",{attrs:{equipment:{equip_face_img:i.icon,equip_name:i.name,large_equip_desc:i.desc,equip_type_desc:i.static_desc},placement:"top"}}):t("span",[e._v(" ")])],1)})),0)])]),e.current_pet.is_child?e._e():t("div",{staticClass:"cols",staticStyle:{float:"right",width:"60px",margin:"0"}},[t("h4",[e._v("饰品")]),t("div",{staticClass:"blank6"}),t("table",{staticClass:"tb03 size50",attrs:{cellspacing:"0",cellpadding:"0",id:"RolePetShipin"}},[t("tr",[t("td",[e.current_pet.shipin_list&&e.current_pet.shipin_list[0]?t("img",{staticStyle:{"max-width":"50px","max-height":"50px",background:"#fff","border-radius":"5px"},attrs:{referrerpolicy:"no-referrer",src:e.current_pet.shipin_list[0].icon,data_equip_name:e.current_pet.shipin_list[0].name,data_equip_type:e.current_pet.shipin_list[0].type,data_equip_desc:e.current_pet.shipin_list[0].desc,data_equip_type_desc:"",lock_types:e.current_pet.shipin_list[0].lock_type}}):t("span",[e._v(" ")])])])])]),e.current_pet.is_child?e._e():[t("div",{staticClass:"blank12",staticStyle:{clear:"both"}}),t("h4",[e._v("内丹")]),t("div",{staticClass:"blank9"}),0===e.current_pet.neidan.length?t("p",{staticClass:"textCenter"},[e._v("无")]):t("table",{attrs:{width:"100%",cellspacing:"3",cellpadding:"3",id:"RolePetNeidan"}},e._l(e.current_pet.neidan,(function(i,s){return t("tr",{key:s},[t("td",[t("img",{attrs:{referrerpolicy:"no-referrer",src:i.icon,data_equip_name:i.name,data_skill_type:"neidan",data_equip_desc:i.desc,data_equip_level:i.level,data_tip_box:"SkillTipsBox"},on:{mouseenter:function(t){return e.showNeidanTip(t,i)},mouseleave:e.hideSkillTip}})]),t("th",[e._v(e._s(i.name))]),t("td",[e._v(e._s(i.level)+"层")])])})),0)],e.current_pet.other&&e.current_pet.other.avt_list&&e.current_pet.other.avt_list.length?t("div",{staticClass:"blank12"}):e._e(),e.current_pet.other&&e.current_pet.other.avt_list&&e.current_pet.other.avt_list.length?t("h4",[e._v(" 梦影 ")]):e._e(),e.current_pet.other&&e.current_pet.other.avt_list&&e.current_pet.other.avt_list.length?t("table",{staticClass:"tb02",attrs:{width:"100%",cellspacing:"0",cellpadding:"0"}},[t("tr",[t("th",{attrs:{width:"40%"}},[e._v("梦影数量：")]),t("td",[t("p",{staticClass:"fl",staticStyle:{"line-height":"24px"}},[e._v(" "+e._s(e.current_pet.other.avt_list.length)+" ")]),e.current_pet.other.color_str?t("button",{staticClass:"identify-pet-btn fr",attrs:{id:"identify-pet-btn"},on:{click:function(t){return e.window.petClothEffect.display()}}},[e._v(" 穿戴效果 ")]):e._e()])]),e.current_pet.other.color_str&&e.current_pet.other.current_on_avt?t("tr",[t("th",{staticStyle:{"vertical-align":"top"},attrs:{width:"40%"}},[e._v("当前穿戴：")]),t("td",{staticStyle:{"vertical-align":"top"}},[t("p",[e._v(e._s(e.current_pet.other.current_on_avt.name))]),e.current_pet.other.current_on_avt.sumavt_propsk?t("p",{staticStyle:{color:"#00ff00"}},[e._v(" ("+e._s(e.current_pet.other.current_on_avt.sumavt_propsk)+"+1) ")]):e._e()])]):t("tr",[t("th",{staticStyle:{"padding-right":"20px"},attrs:{width:"40%"}},[e._v("未穿戴")]),t("td")])]):e._e()],2)])])},a=[],r=(i(4114),i(3462)),n={name:"PetDetail",props:{current_pet:{type:Object,required:!0}},components:{ItemPopover:r.A},computed:{isShowNewLingli(){return this.current_pet&&void 0!==this.current_pet.iMagDam&&void 0!==this.current_pet.iMagDef},evolSkillRows(){if(!this.current_pet||!this.current_pet.evol_skill_list)return[];const e=4,t=this.current_pet.evol_skill_list,i=t.length;let s=parseInt(i/e)+(i%e?1:0);s=s<3?3:s;const a=[];for(let r=0;r<s;r++){const i=t.slice(r*e,(r+1)*e);a.push(i)}return a},petSkillRows(){if(!this.current_pet||!this.current_pet.skill_list)return[];const e=4,t=this.current_pet.skill_list,i=t.length;let s=parseInt(i/e)+(i%e?1:0);s=s<3?3:s,this.current_pet.genius&&i===e*s&&(s+=1);const a=[];for(let r=0;r<s;r++){const i=t.slice(r*e,(r+1)*e);a.push(i)}return a}},methods:{parseStyleInfo(e){return e?window.parse_style_info(e,"#Y"):""},showSkillTip(e,t){const i={name:t.name,desc:t.desc||"",icon:t.cifuIcon||t.heightCifuIcon||t.icon,isCifu:!(!t.cifuIcon&&!t.heightCifuIcon)},s=this.$refs.RoleSkillTipsBox;if(!s)return;s.innerHTML=`<img class="tip-skill-icon" src="${i.icon}" referrerpolicy="no-referrer"><div class="skill-text"><p class="cYellow${i.isCifu?" cifu-name":""}">${i.name}</p>${window.parse_style_info?window.parse_style_info(i.desc,"#Y"):i.desc}`,s.style.display="block",s.style.position="fixed";const a=e.target.getBoundingClientRect();let r=a.left,n=a.bottom+5;const l=320,o=120;r+l>window.innerWidth&&(r=window.innerWidth-l-10),n+o>window.innerHeight&&(n=a.top-o-5),r<0&&(r=10),n<0&&(n=10),s.style.left=r+"px",s.style.top=n+"px",s.style.zIndex=9999},hideSkillTip(){const e=this.$refs.RoleSkillTipsBox;e&&(e.style.display="none")},showNeidanTip(e,t){this.showSkillTip(e,t)},getDictValue(e,t,i){return e&&"object"===typeof e&&void 0!==e[t]?e[t]:i},getSummonColorDesc(e){return e||"无"}}},l=n,o=i(1656),c=(0,o.A)(l,s,a,!1,null,null,null),p=c.exports},711:function(e,t,i){"use strict";i.d(t,{G:function(){return s}});i(4114),i(8111),i(2489),i(116),i(7588),i(1701),i(3579);const s={data(){return{lingshiKinds:window.lingshiKinds}},methods:{getEquipGemInfoAndBlueBlock(e,t="#Y"){if(!e)return{};if("function"===typeof window.parse_style_info){let i=window.parse_style_info(e,t);const s=document.createElement("div");s.innerHTML=i;const a=s.querySelectorAll('[style="color:#4DBAF4"]');s.innerHTML="";const r=[];a.forEach((e=>{-1===e.innerHTML.indexOf("特技")&&-1===e.innerHTML.indexOf("特效")&&-1===e.innerHTML.indexOf("<br>")&&-1===e.innerHTML.indexOf("+")&&r.push(e.innerHTML.replace(/套装效果：附加状态|套装效果：追加法术|套装效果：变身术之|套装效果：变化咒之/g,"").replace(/<span>/g,"<div>"))}));const n=e.match(/#r锻炼等级 (\d+) /);let l=n?n[1]:0;if(0===l){const t=e.match(/#r精炼等级 (\d+)/);l=t?t[1]:0}return{blueBlock:r,gemLevel:l}}return{}},initSuitOptions(){const e=[];if(window.AUTO_SEARCH_CONFIG){if(window.AUTO_SEARCH_CONFIG.suit_added_status){const t=Object.entries(window.AUTO_SEARCH_CONFIG.suit_added_status).map((([e,t])=>({value:`added_status_${e}`,label:t})));t.length>0&&e.push({value:"added_status",label:"附加状态",children:t})}if(window.AUTO_SEARCH_CONFIG.suit_effects){const t=Object.entries(window.AUTO_SEARCH_CONFIG.suit_effects).map((([e,t])=>({value:`suit_effects_${e}`,label:t})));t.length>0&&e.push({value:"suit_effects",label:"追加法术",children:t})}if(window.AUTO_SEARCH_CONFIG.suit_transform_skills){const t=Object.entries(window.AUTO_SEARCH_CONFIG.suit_transform_skills).map((([e,t])=>({value:`transform_skills_${e}`,label:t})));t.length>0&&e.push({value:"transform_skills",label:"变身术",children:t})}if(window.AUTO_SEARCH_CONFIG.suit_transform_charms){const t=Object.entries(window.AUTO_SEARCH_CONFIG.suit_transform_charms).map((([e,t])=>({value:`transform_charms_${e}`,label:t})));t.length>0&&e.push({value:"transform_charms",label:"变化咒",children:t})}}this.suitOptions=e},getEquipImageProps(e){return e?e.large_equip_desc&&e.equip_name&&e.equip_face_img&&e.equip_type_desc?e:{...e,equip_face_img:e.icon||e.small_icon||e.big_icon,equip_type_desc:e.static_desc,large_equip_desc:e.desc,equip_name:e.name}:{}},getEquipSuitEffect(e){if(!e)return"";try{const t=JSON.parse(e).filter((e=>e)),i={};t.forEach((e=>{if(e.desc){const t=e.desc.match(/#c4DBAF4套装效果：附加状态#c4DBAF4([^#]+)/);if(t&&t[1]){const e=t[1].trim();i[e]=(i[e]||0)+1}}}));for(const[e,s]of Object.entries(i))return s>=3?e:e+`(${s}/3)`;return""}catch(t){return console.error("解析装备列表失败:",t),""}},isLingshi(e){return this.lingshiKinds.some((([t])=>t===e))},getSpecialEffectName(e,t=!1){if(t){if(1===e)return"超级简易"}else if(window.AUTO_SEARCH_CONFIG&&window.AUTO_SEARCH_CONFIG.equip_special_effect){const t=window.AUTO_SEARCH_CONFIG.equip_special_effect[e.toString()];if(t)return t}return`特效${e}`},formatSpecialSkillsAndEffects({special_effect:e,special_skill:t,kindid:i,large_equip_desc:s}){const a=[];if(e&&""!==e)try{const t=JSON.parse(e),r=this.isLingshi(i);Array.isArray(t)&&t.forEach((e=>{if(r){const t=s.match(/#c4DBAF4特效：([^#]+)（(\d+)级）#r/);if(t){const e=t[1],i=t[2];a.push(`${e}（${i}级）`)}else{const t=s.match(/#c4DBAF4特效：([^#]+)#r/);if(t){const e=t[1];a.push(`${e}`)}else{const t=this.getSpecialEffectName(parseInt(e),r);t&&a.push(`${t}`)}}}else{const t=this.getSpecialEffectName(parseInt(e),r);t&&a.push(`${t}`)}}))}catch(r){console.warn("解析特效JSON失败:",r,e)}if(t&&0!==t){const e=this.getSpecialSkillName(t);e&&a.push(`${e}`)}return a.join("<br />")},getSpecialSkillName(e){if(window.AUTO_SEARCH_CONFIG&&window.AUTO_SEARCH_CONFIG.equip_special_skills){const t=window.AUTO_SEARCH_CONFIG.equip_special_skills;if(Array.isArray(t)){const i=t.find((t=>t[0]===parseInt(e)));if(i)return i[1]}}return`特技${e}`},formatSuitEffect({suit_effect:e,addon_status:t,kindid:i}){if(29===i)return t;if(!e)return"";if(window.AUTO_SEARCH_CONFIG&&window.AUTO_SEARCH_CONFIG.suit_added_status){const t=window.AUTO_SEARCH_CONFIG.suit_added_status[e.toString()];if(t)return`附加状态${t}`}if(window.AUTO_SEARCH_CONFIG&&window.AUTO_SEARCH_CONFIG.suit_append_skills){const t=window.AUTO_SEARCH_CONFIG.suit_append_skills[e.toString()];if(t)return`追加法术${t}`}if(window.AUTO_SEARCH_CONFIG&&window.AUTO_SEARCH_CONFIG.suit_transform_skills){const t=window.AUTO_SEARCH_CONFIG.suit_transform_skills[e.toString()];if(t)return`变身术之${t}`}if(window.AUTO_SEARCH_CONFIG&&window.AUTO_SEARCH_CONFIG.suit_transform_charms){const t=window.AUTO_SEARCH_CONFIG.suit_transform_charms[e.toString()];if(t)return`变化咒之${t}`}return`套装${e}`},getGemImageByGemValue(e){const t=[];if(e.gem_value)try{const i=JSON.parse(e.gem_value);Array.isArray(i)&&i.forEach((e=>{if(e&&this.gem_image&&this.gem_image[e]){const i=this.gem_image[e];t.push(this.getImageUrl(`${i}.gif`,"small"))}}))}catch(i){console.error("解析宝石数据失败:",i)}return t}}}},1658:function(e,t,i){"use strict";i.d(t,{B:function(){return s}});const s={methods:{gen_dynamic_tags(e){if(e)try{return window.gen_dynamic_tags(JSON.parse(e))}catch(t){return""}return""},gen_highlight(e){if(e)try{return window.gen_highlight(JSON.parse(e))}catch(t){return""}return""},handleSizeChange(e){this.pagination.page_size=e,this.pagination.page=1,this.fetchData()},handlePageChange(e){this.pagination.page=e,this.fetchData()},handleSortChange({prop:e,order:t}){this.filters.sort_by=e,this.filters.sort_order="ascending"===t?"asc":"desc",this.fetchData()},getSimilarityTagType(e){return e>=.9?"success":e>=.8?"warning":e>=.7?"info":"danger"},formatTexing(e){if(!e)return"";try{const t=JSON.parse(e);return t.name||""}catch(t){return""}},formatDate(e){if(!e)return"-";const t=new Date(1e3*e);return t.toLocaleString("zh-CN")},getColorNumber(e,t=[0,1]){if(!e)return"-";e=+e;const[i,s]=t;if(!e||e<i||e>s)return"-";var a="number-low";const r=s-i;return e>=i&&e<i+.25*r?a="number-low":e>=i+.25*r&&e<i+.5*r?a="number-medium":e>=i+.5*r&&e<i+.75*r?a="number-high":e>=i+.75*r&&e<=s&&(a="number-perfect"),`<span class="${a}">${e}</span>`},formatPrice(e){const t=parseFloat(e/100);return t?window.get_color_price?window.get_color_price(t):`${t}元`:"-"},formatFullPrice(e,t=!1){let i;if(i="object"===typeof e?this.formatPrice(e.price):this.formatPrice(e),!window.LoginInfo||!window.LoginInfo.login)return i;const s=e.cross_server_poundage||0,a=e.fair_show_poundage||0;if(!s||t&&"cross"!==t)return t&&"cross"==t?"":i;let r="";if(1==e.pass_fair_show){const e=parseFloat(s/100);r=`<div class="f12px" style="color: #666;">跨服费<span class="p1000">￥${e}</span></div>`}else{const e=parseFloat((s+a)/100);r=`<div class="f12px" style="color: #666;">信息费<span class="p1000">￥${e}</span></div>`}return t&&"cross"==t?r:i+r},getCBGLinkByType(e,t="equip"){if(!e)return"#";const i=e.split("-")[1];switch(t){default:return`https://xyq-m.cbg.163.com/cgi/mweb/equip/${i}/${e}`}},debounce(e,t=300){let i;return function(...s){const a=()=>{clearTimeout(i),e.apply(this,s)};clearTimeout(i),i=setTimeout(a,t)}},throttle(e,t=300){let i;return function(...s){i||(e.apply(this,s),i=!0,setTimeout((()=>i=!1),t))}},tableRowClassName({row:e}){return e.is_special?"warning-row":""},getImageUrl(e,t="small"){return e?e.startsWith("http://")||e.startsWith("https://")?"big"===t&&e.includes("/images/equip/small/")?e.replace("/images/equip/small/","/images/big/"):e:`https://cbg-xyq.res.netease.com/images/${t}/${e}`:""}}}},1900:function(e,t,i){var s={"./time_lock_1.webp":7070,"./time_lock_10.webp":3426,"./time_lock_3.webp":47,"./time_lock_8.webp":4785,"./time_lock_9.webp":54,"./time_lock_huoyue.webp":5734,"./time_lock_protect.webp":5146};function a(e){var t=r(e);return i(t)}function r(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=r,e.exports=a,a.id=1900},2634:function(){},3426:function(e){"use strict";e.exports="data:image/webp;base64,UklGRswDAABXRUJQVlA4WAoAAAAUAAAADQAADQAAQUxQSHMAAAABcFtr25o8FV7+ZAzrvj0+Joq1uhc6QlL9pMPdmSEiJgAw6fJ4nIeGT7WFjEZSrRXQJuCr3yhj6wMPAM86YcYvsnQu/8jy2Pmne/rxyWgzl4/vsgjLf6rUsd4v1zpo7X/zawUmbSHDoVSt8mnS1Xk7jQwAAFZQOCAgAAAAcAEAnQEqDgAOAAIANCWMAnQBQAAA/uuOXAkrVhTswABYTVAgCgMAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM5ODlDM0I4MzEzNzExRTY4MDQ5ODQ1NkI0QzA0RTFBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjM5ODlDM0I5MzEzNzExRTY4MDQ5ODQ1NkI0QzA0RTFBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mzk4OUMzQjYzMTM3MTFFNjgwNDk4NDU2QjRDMDRFMUEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Mzk4OUMzQjczMTM3MTFFNjgwNDk4NDU2QjRDMDRFMUEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4="},3462:function(e,t,i){"use strict";i.d(t,{A:function(){return p}});var s=function(){var e=this,t=e._self._c;return e.equipment?.large_equip_desc||e.equipment?.equip_desc?t("EquipmentImage",{attrs:{image:!1,"popover-width":200,placement:e.placement,equipment:e.equipment,"lock-type":e.lock_type}}):e._e()},a=[],r=i(7694),n={name:"ItemPopover",components:{EquipmentImage:r.A},props:{placement:{type:String,default:"right-start"},equipment:{type:Object,default:()=>({})}},computed:{lock_type(){return this.equipment?.lock_type||[]}}},l=n,o=i(1656),c=(0,o.A)(l,s,a,!1,null,null,null),p=c.exports},4785:function(e){"use strict";e.exports="data:image/webp;base64,UklGRogBAABXRUJQVlA4WAoAAAAQAAAAEgAAEgAAQUxQSGIAAAABcOJsmxN9mZFwR4IiSMIpCLJZgmuuufF0dlW9DPWfcasjYgJw1bd7DbT7JGbnjpW/jX5l7JJu8gkA+6nQW2Ddpjpr23/IhVLNYQiFzATgCanaxzWoJNoY90ZFtCZoTnBcAVZQOCAAAQAA0AUAnQEqEwATAD6RQJpKJaOiIagIALASCWoAwN3cC3kKgG6AfqAGtFJDK1k9x6wkvPsA6dlOAADJdKxlZXPqqEXS9fnLHYlX55Fv9MAnG4Cc2qvOdaMYfXEn8egdPqflIdw7c/kzZLcZd2HQ6DDiOB0l+XjgfJp3jY8FGVJ7M59sva1Z199nD6niEEuGvDnda/LA4XeSFI23O6+BSJ+XIKRHzUWVuSG5vqf9McTs4NhCOpWBwgYk+pErvRfNSfIojnKulvxoK9nLItvWBXsK3p8xcY4HP6u9otSu2n4DojJgbfTc8Pi3PdtYnLPc8+M2iKuJEFKwXcdjf+TSD5gAAA=="},5146:function(e){"use strict";e.exports="data:image/webp;base64,UklGRloDAABXRUJQVlA4WAoAAAAQAAAAGAAAGAAAQUxQSOcBAAABmTJE9D8gwbbdRHK+ZKouGGaeSbII3H6yAWZOhrnIrpKCvYaICZgABEIIsSpr1s2bsAatCz8dujFQSikgAEBmrVtUyQWMCdFr3Dhz6NoIAIAQq3LgntJPX53pRV6waNu6W++9d22gFCHGjMdyb33QMgolgFu10cSBA40nro0Ug8p9N7440QtyCgAmSKMXLNtReeoGsBl7cl8cS5yCAAAIMqyWOCt2tD66Zq2664MTEQs8AKUICXJRT3jL9n10qLSg8kEHmJPAaDAyLIN5iYDMgcaZTaXPGgIMZwSDTuRlLGIkI2C5XbU1ma9GYDmGACvwohGw3CgZgLGhN8s4J8DxBIDhWQDAHBYlwBYNAlIDcKwRTOkNEiAF5bBIAWNiCmIIAWDAQHgARMHURAFErBXlGBA2nVAgGs6VZBYDAmwaAQrEFedMZw0DxWBqQUAcyhxpLHMYAcb+JwYERHIi17jQ2uJFEZsw/jVqKM+LvpmYl1z4at0i0RoZ7B9KjKwcOfPTtlmj2k+dVaWklyjyDwgC69aRzKKCEI2XMktySUeov5gROLVTrRU5NlKq9kyybY3BCAMQSowOfeWsyhEilFC1Qz/0ViyaMeEkrWtnjmQ2rCgQRoRSStUuXOslA6EIs5xMZV6BEEIAAFZQOCBMAQAAEAYAnQEqGQAZAD6RPJhIpaMiISgNULASCWwAsPNrM2bxG5P8spo6GEB5y305oo/maYnXN1KagUWoAP73wc9caSKZLTb7dMkLxjxxyAJD1vyweLgto9Q2/SzHgXK4zuR67YNt4LSs7CGKHwvPscVFws4BHw8WDX2RO5dHaDJbwOwDzvWZnzbwfqhyPgydk68c67hioAa/KD2aobcbIHEi9hJ2f8yjt/BGbuQ+f+RwAiemUFjkIcxxgyMt4FOqWf5XObPEzsflaMJclB5reDAOLK1CTjWHA7TM4E8MO7vxCV9xyMWwWe5UQBj9XkFGfhLTnvBt9ETMVuHod5GAQm/Fr18jAtqy+Hp+xJ6VtUWxsFu9Oyuv7jyLZYS92LZ/8mXqqankBh9/a/+xH3f7fCsit/8E1kutKZuK5wV18yHlownWz9wIiucuP4CAAAA="},5220:function(e,t,i){"use strict";i.d(t,{A:function(){return y}});var s=function(){var e=this,t=e._self._c;return t("PetInfoPopover",e._b({staticStyle:{position:"relative",display:"block"},attrs:{pet:e.pet,equipFaceImg:e.equipFaceImg,enhanceInfo:e.enhanceInfo},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("el-image",{style:e.imageStyle,attrs:{src:e.imageUrl,fit:"cover",referrerpolicy:"no-referrer"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])]},proxy:!0}])},"PetInfoPopover",e.$attrs,!1))},a=[],r=function(){var e=this,t=e._self._c;return t("el-popover",{attrs:{"data-equip-sn":e.$attrs.equip_sn,placement:"right",trigger:e.trigger,"popper-class":"pet-info-popover"},on:{show:e.handleShow,hide:e.handleHide},scopedSlots:e._u([{key:"reference",fn:function(){return[t("div",{staticClass:"pet-trigger",on:{click:e.handleClick}},[e._t("trigger")],2)]},proxy:!0}],null,!0),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.pet&&e.visible&&e.pet.icon?t("div",{staticClass:"tabCont"},[t("PetDetail",{attrs:{current_pet:e.pet}})],1):e.pet&&e.visible&&!e.pet.icon?t("div",{staticClass:"tabCont"},[t("div",{ref:"SkillTipsBox",staticClass:"soldDetail",staticStyle:{width:"320px",display:"none"},attrs:{id:"SkillTipsBox"}}),t("div",{staticClass:"cols",staticStyle:{width:"280px","margin-left":"-2px","margin-right":"2px"}},[e.pet.action?[t("div",{staticClass:"thum",staticStyle:{"text-align":"center"}},[t("div",{staticClass:"time-key-wap"},[t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.getImageUrl(e.equipFaceImg,"big"),referrerpolicy:"no-referrer"}})],1),t("p",{staticClass:"f14px cWhite"},[e._v("等级："),t("span",{staticClass:"cYellow"},[e._v(e._s(e.pet.equip_level))]),e._v(" 携带等级："+e._s(e.pet.role_grade_limit))])]),t("div",{staticClass:"blank12"}),t("h4",[e._v("资质")]),t("table",{staticClass:"tb02 petZiZhiTb petAttrInfo",attrs:{width:"100%",cellspacing:"0",cellpadding:"0"}},[t("tr",[t("th",[e._v("历史灵性值：")]),t("td",[e._v(e._s(e.pet.lx))]),t("th",[e._v("成长：")]),t("td",[e._v(e._s(e.pet.growth))])]),t("tr",[t("th",{class:{enhance:e.enhanceInfo.is_baobao}},[e._v("是否宝宝：")]),t("td",{class:{enhance:e.enhanceInfo.is_baobao}},[t("span",{style:"color:"+("否"===e.pet.is_baobao?"#FF0000":"#00FF00")},[e._v(" "+e._s(e.pet.is_baobao)+" ")])])])])]:[t("div",{staticClass:"thum",staticStyle:{"text-align":"center"}},[t("div",{staticClass:"time-key-wap"},[t("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.getImageUrl(e.equipFaceImg,"big"),referrerpolicy:"no-referrer"}})],1),t("p",{staticClass:"f14px cWhite"},[e._v("名字："),t("span",{staticClass:"cYellow"},[e._v(e._s(e.pet.pet_name))]),e._v(" 等级："+e._s(e.pet.pet_grade))])]),t("h4",[e._v(" 属性"),e.pet.other.color_str&&e.pet.other.current_on_avt?t("span",[e._v("(已包含梦影穿戴属性)")]):e._e()]),t("table",{staticClass:"tb02",attrs:{width:"100%",cellspacing:"0",cellpadding:"0"}},[t("tr",[t("th",[e._v("气血：")]),t("td",[e._v(e._s(e.pet.blood)+"/"+e._s(e.pet.max_blood))]),t("th",[e._v("体质：")]),t("td",[e._v(" "+e._s(e.pet.soma)+" "),e.pet.ti_zhi_add?t("span",{staticClass:"color-pink"},[e._v("+"+e._s(e.pet.ti_zhi_add))]):e._e()])]),t("tr",[t("th",[e._v("魔法：")]),t("td",[e._v(e._s(e.pet.magic)+"/"+e._s(e.pet.max_magic))]),t("th",[e._v("法力：")]),t("td",[e._v(" "+e._s(e.pet.magic_powner)+" "),e.pet.fa_li_add?t("span",{staticClass:"color-pink"},[e._v("+"+e._s(e.pet.fa_li_add))]):e._e()])]),t("tr",[t("th",[e._v("攻击：")]),t("td",[e._v(e._s(e.pet.attack))]),t("th",[e._v("力量：")]),t("td",[e._v(" "+e._s(e.pet.strength)+" "),e.pet.li_liang_add?t("span",{staticClass:"color-pink"},[e._v("+"+e._s(e.pet.li_liang_add))]):e._e()])]),t("tr",[t("th",[e._v("防御：")]),t("td",[e._v(e._s(e.pet.defence))]),t("th",[e._v("耐力：")]),t("td",[e._v(" "+e._s(e.pet.endurance)+" "),e.pet.nai_li_add?t("span",{staticClass:"color-pink"},[e._v("+"+e._s(e.pet.nai_li_add))]):e._e()])]),t("tr",[t("th",[e._v("速度：")]),t("td",[e._v(e._s(e.pet.speed))]),t("th",[e._v("敏捷：")]),t("td",[e._v(" "+e._s(e.pet.smartness)+" "),e.pet.min_jie_add?t("span",{staticClass:"color-pink"},[e._v("+"+e._s(e.pet.min_jie_add))]):e._e()])]),t("tr",[e.isShowNewLingli?[t("th",[e._v("法伤：")]),t("td",[e._v(e._s(e.pet.iMagDam))])]:[t("th",[e._v("灵力：")]),t("td",[e._v(e._s(e.pet.wakan))])],t("th",[e._v("潜能：")]),t("td",[e._v(e._s(e.pet.potential))])],2),e.isShowNewLingli?t("tr",[t("th",[e._v("法防：")]),t("td",[e._v(e._s(e.pet.iMagDef))])]):e._e()]),t("div",{staticClass:"blank12"}),t("h4",[e._v("资质")]),t("table",{staticClass:"tb02 petZiZhiTb petAttrInfo",attrs:{width:"100%",cellspacing:"0",cellpadding:"0"}},[t("tr",[t("th",[e._v("攻击资质：")]),t("td",[t("span",{staticClass:"added_attr_wrap"},[e._v(" "+e._s(e.pet.attack_aptitude)+" "),e.pet.attack_ext?t("span",{staticClass:"added_attr"},[e._v("+"+e._s(e.pet.attack_ext))]):e._e()])]),t("th",[e._v("寿命：")]),t("td",[e._v(e._s(e.pet.lifetime))])]),t("tr",[t("th",[e._v("防御资质：")]),t("td",[t("span",{staticClass:"added_attr_wrap"},[e._v(" "+e._s(e.pet.defence_aptitude)+" "),e.pet.defence_ext?t("span",{staticClass:"added_attr"},[e._v("+"+e._s(e.pet.defence_ext))]):e._e()])]),t("th",[e._v("成长：")]),t("td",[e._v(e._s(e.pet.growth))])]),t("tr",[t("th",[e._v("体力资质：")]),t("td",[t("span",{staticClass:"added_attr_wrap"},[e._v(" "+e._s(e.pet.physical_aptitude)+" "),e.pet.physical_ext?t("span",{staticClass:"added_attr"},[e._v("+"+e._s(e.pet.physical_ext))]):e._e()])]),t("th",[e._v("五行：")]),t("td",[e._v(e._s(e.getWuxingName(e.pet.five_aptitude)))])]),t("tr",[t("th",[e._v("法力资质：")]),t("td",[t("span",{staticClass:"added_attr_wrap"},[e._v(" "+e._s(e.pet.magic_aptitude)+" "),e.pet.magic_ext?t("span",{staticClass:"added_attr"},[e._v("+"+e._s(e.pet.magic_ext))]):e._e()])]),t("th",[e._v("已用元宵：")]),t("td",[e._v(e._s(e.pet.used_yuanxiao))])]),t("tr",[t("th",[e._v("速度资质：")]),t("td",[t("span",{staticClass:"added_attr_wrap"},[e._v(" "+e._s(e.pet.speed_aptitude)+" "),e.pet.speed_ext?t("span",{staticClass:"added_attr"},[e._v("+"+e._s(e.pet.speed_ext))]):e._e()])]),t("th",[e._v("已用千金露：")]),t("td",[e._v(e._s(e.pet.used_qianjinlu))])]),t("tr",[t("th",[e._v("躲闪资质：")]),t("td",[t("span",{staticClass:"added_attr_wrap"},[e._v(" "+e._s(e.pet.avoid_aptitude)+" "),e.pet.avoid_ext?t("span",{staticClass:"added_attr"},[e._v("+"+e._s(e.pet.avoid_ext))]):e._e()])]),t("th",[e._v("已用炼兽珍经：")]),t("td",[e._v(e._s(e.pet.used_lianshou))])]),t("tr",{attrs:{"data-enhance":'{"dir":"top","x":"auto","y":-6}',"data-enhance-index":"2"}},[e.pet.color?[t("th",[e._v("变异类型：")]),t("td",[e._v(e._s(e.pet.color))])]:[t("th",{class:{enhance:e.enhanceInfo.is_baobao}},[e._v("是否宝宝：")]),t("td",{class:{enhance:e.enhanceInfo.is_baobao}},[t("span",{style:"color:"+("否"===e.pet.is_baobao?"#FF0000":"#00FF00")},[e._v(" "+e._s(e.pet.is_baobao)+" ")])])],t("th",[e._v("已用清灵仙露：")]),t("td",[e._v(e._s(e.pet.jinjie_cnt))])],2),t("tr",[t("th",[e._v("历史灵性值：")]),t("td",[e._v(e._s(e.pet.lx))])])])]],2),t("div",{staticClass:"cols",staticStyle:{width:"182px"},attrs:{"data-enhance":'{"dir":"top","x":"auto","y":-34}',"data-enhance-index":"1"}},[e.evolSkillList.length>0?t("div",[t("h4",[e._v("赐福技能")]),t("table",{staticClass:"tb03",attrs:{cellspacing:"0",cellpadding:"0",id:"evol_skill_grid"}},e._l(e.skillRows,(function(i,s){return t("tr",{key:s},e._l(i,(function(i,s){return t("td",{key:s,staticStyle:{position:"relative"}},[i.hlightLight?[t("img",{attrs:{src:i.icon,width:"40",height:"40",data_equip_name:i.name,data_equip_desc:i.desc,data_tip_box:"SkillTipsBox",data_cifu_icon:i.cifuIcon,data_height_icon:i.heightCifuIcon,referrerpolicy:"no-referrer"},on:{mouseenter:function(t){return e.showSkillTip(t,i)},mouseleave:e.hideSkillTip}}),t("div",{staticClass:"evol_skill_icon",attrs:{data_equip_name:i.name,data_equip_desc:i.desc,data_tip_box:"SkillTipsBox",data_cifu_icon:i.cifuIcon,data_height_icon:i.heightCifuIcon}})]:[t("img",{staticStyle:{filter:"grayscale(100%)"},attrs:{src:i.icon,width:"40",height:"40",data_equip_name:i.name,data_equip_desc:i.desc,data_tip_box:"SkillTipsBox",data_cifu_icon:i.cifuIcon,data_height_icon:i.heightCifuIcon,referrerpolicy:"no-referrer"},on:{mouseenter:function(t){return e.showSkillTip(t,i)},mouseleave:e.hideSkillTip}}),t("div",{staticClass:"evol_skill_icon",staticStyle:{filter:"grayscale(100%)"},attrs:{data_equip_name:i.name,data_equip_desc:i.desc,data_tip_box:"SkillTipsBox",data_cifu_icon:i.cifuIcon,data_height_icon:i.heightCifuIcon}})]],2)})),0)})),0),t("div",{staticClass:"blank12",staticStyle:{clear:"both"}})]):e._e(),t("h4",[e._v("技能")]),t("div",{staticClass:"blank6"}),t("div",{ref:"pet_skill_grid_con",attrs:{id:"pet_skill_grid_con"}}),t("table",{staticClass:"tb03",attrs:{cellspacing:"0",cellpadding:"0"}}),t("div",{staticClass:"blank12"}),e.pet.core_close&&e.pet.texing&&void 0!==e.pet.texing.id?t("h4",[e._v(" 特性:"+e._s(e.pet.core_close)+" ")]):t("h4",[e._v("特性")]),e.pet.texing&&void 0!==e.pet.texing.id?t("div",{staticStyle:{"text-align":"left","font-size":"12px"}},[t("span",[e._v(e._s(e.pet.texing.name)+"："),t("span",{domProps:{innerHTML:e._s(e.parseStyleInfo(e.pet.texing.effect))}})])]):t("div",{staticStyle:{"text-align":"center"}},[e._v("无")])]),t("div",{staticClass:"cols",staticStyle:{width:"218px","margin-right":"-2px","margin-left":"2px"}},[t("div",{staticClass:"cols",staticStyle:{width:"158px",margin:"0"}},[t("h4",[e._v("装备")]),t("div",{staticClass:"blank6"}),t("table",{staticClass:"tb03 size50",attrs:{cellspacing:"0",cellpadding:"0",id:"pet_equip_con"}},[t("tr",e._l(e.pet.equip_list,(function(i,s){return t("td",{key:s},[i&&s<3?t("EquipmentImage",{attrs:{placement:"bottom",image:!1,equipment:e.getEquipImageProps(i),size:"small",popoverWidth:300}}):t("span",[e._v(" ")])],1)})),0)])]),t("div",{staticClass:"cols",staticStyle:{float:"right",width:"58px",margin:"0"}},[t("h4",[e._v("饰品")]),t("div",{staticClass:"blank6"}),t("table",{staticClass:"tb03 size50",attrs:{cellspacing:"0",cellpadding:"0",id:"pet_shipin_con"}},[t("tr",[t("td",[e.pet.equip_list&&e.pet.equip_list[3]?t("EquipmentImage",{attrs:{placement:"bottom",image:!1,equipment:e.getEquipImageProps(e.pet.equip_list[3]),size:"small"}}):t("span",[e._v(" ")])],1)])])]),t("div",{staticClass:"blank12",staticStyle:{clear:"both"}}),t("h4",[e._v("内丹")]),t("div",{staticClass:"blank6"}),e.pet.neidan&&0!==e.pet.neidan.length?t("table",{attrs:{width:"100%",cellspacing:"3",cellpadding:"3",id:"RolePetNeidan"}},e._l(e.pet.neidan,(function(i,s){return t("tr",{key:s},[t("td",[t("img",{attrs:{src:i.icon,data_equip_name:i.name,data_skill_type:"neidan",data_equip_desc:i.desc,data_equip_level:i.level,data_tip_box:"SkillTipsBox",referrerpolicy:"no-referrer"},on:{mouseenter:function(t){return e.showNeidanTip(t,i)},mouseleave:e.hideSkillTip}})]),t("th",[e._v(e._s(i.name))]),t("td",[e._v(e._s(i.level)+"层")])])})),0):t("p",{staticClass:"textCenter"},[e._v("无")]),t("div",{staticClass:"blank12"}),e.pet.other&&e.pet.other.avt_list&&e.pet.other.avt_list.length?t("div",[t("h4",[e._v("梦影")]),t("table",{staticClass:"tb02",attrs:{width:"100%",cellspacing:"0",cellpadding:"0"}},[t("tr",[t("th",{attrs:{width:"40%"}},[e._v("梦影数量：")]),t("td",[t("p",{staticClass:"fl",staticStyle:{"line-height":"24px"}},[e._v(e._s(e.pet.other.avt_list.length))])])]),e.pet.other.color_str&&e.pet.other.current_on_avt?t("tr",[t("th",{staticStyle:{"vertical-align":"top"},attrs:{width:"40%"}},[e._v("当前穿戴：")]),t("td",{staticStyle:{"vertical-align":"top"}},[t("p",[e._v(e._s(e.pet.other.current_on_avt.name))]),e.pet.other.current_on_avt.sumavt_propsk?t("p",{staticStyle:{color:"#00ff00"}},[e._v(" ("+e._s(e.pet.other.current_on_avt.sumavt_propsk)+"+1) ")]):e._e()])]):t("tr",[t("th",{staticStyle:{"padding-right":"20px"},attrs:{width:"40%"}},[e._v("未穿戴")])])]),t("div",{staticClass:"blank12"})]):e._e(),e.pet.action?e._e():[t("h4",[e._v("其它")]),t("div",{staticClass:"blank6"}),t("table",{staticClass:"tb02",attrs:{width:"100%",cellspacing:"0",cellpadding:"0"}},[t("tr",[t("th",{attrs:{width:"50%"}},[e._v("已用幻色丹：")]),t("td",[e._v(e._s(e.getSummonColorDesc(e.pet.summon_color,e.pet.type_id)))])])])]],2)]):e._e()])},n=[],l=(i(4114),i(8111),i(7588),i(7694)),o=i(1658),c=i(711),p=i(407),_={name:"PetInfoPopover",mixins:[o.B,c.G],components:{EquipmentImage:l.A,PetDetail:p.A},props:{trigger:{type:String,default:"click"},equipFaceImg:{type:String,default:""},pet:{type:Object,required:!0},enhanceInfo:{type:Object,default:()=>({})}},data(){return{visible:!1,conf:{pet_skill_url:"https://cbg-xyq.res.netease.com/images/skill/",notice_node_name:"pet_tip_notice_msg",skill_panel_name:"pet_tip_skill_grid",table_class:"tb03",enhance_skills:this.enhanceInfo.skill_id_list||[]}}},emits:["show","hide","click"],computed:{isShowNewLingli(){return void 0!==this.pet.iMagDam&&void 0!==this.pet.iMagDef},evolSkillList(){return this.pet.evol_skill_list||[]},skillRows(){const e=4,t=this.evolSkillList.length;let i=Math.floor(t/e)+(t%e?1:0);i=i<3?3:i,this.pet.genius&&t===e*i&&(i+=1);const s=[];for(let a=0;a<i;a++){const t=this.evolSkillList.slice(a*e,(a+1)*e);s.push(t)}return s}},beforeDestroy(){this.cleanupDynamicEvents()},methods:{show_pet_skill_in_grade:window.show_pet_skill_in_grade,getWuxingName(e){const t={0:"未知",1:"金",2:"木",4:"土",8:"水",16:"火"};return t[e]||"未知"},parseStyleInfo(e){return e?window.parse_style_info(e,"#Y"):""},getSummonColorDesc(e){return e?e.toString():"无"},handleClick(){this.$emit("click")},handleShow(){this.$emit("show")},handleHide(){this.$emit("hide")},showSkillTip(e,t){const i={name:t.name,desc:t.desc||"",icon:t.cifuIcon||t.heightCifuIcon||t.icon,isCifu:!(!t.cifuIcon&&!t.heightCifuIcon)},s=this.$refs.SkillTipsBox;if(!s)return;s.innerHTML=`<img class="tip-skill-icon" src="${i.icon}" referrerpolicy="no-referrer"><div class="skill-text"><p class="cYellow${i.isCifu?" cifu-name":""}">${i.name}</p>${window.parse_style_info?window.parse_style_info(i.desc,"#Y"):i.desc}`,s.style.display="block",s.style.position="fixed";const a=e.target.getBoundingClientRect();let r=a.left,n=a.bottom+5;const l=320,o=120;r+l>window.innerWidth&&(r=window.innerWidth-l-10),n+o>window.innerHeight&&(n=a.top-o-5),r<0&&(r=10),n<0&&(n=10),s.style.left=r+"px",s.style.top=n+"px",s.style.zIndex=9999},hideSkillTip(){const e=this.$refs.SkillTipsBox;e&&(e.style.display="none")},showNeidanTip(e,t){const i={name:t.name,desc:t.desc+(t.level?`<br/><span style="color: #ccc; font-size: 12px;">${t.level}层</span>`:""),icon:t.icon,isCifu:!1};this.showSkillTip(e,i)},bindEventsForDynamicNodes(){const e=this.$refs.pet_skill_grid_con;if(!e)return;const t=e.querySelectorAll("img[data_store_name]");t.forEach((e=>{if(e.dataset.eventBound)return;const t=e.getAttribute("data_store_name"),i=e.getAttribute("data_store_desc"),s=e.src;if(t){const a={name:t,desc:i,icon:s,isCifu:!1};e.addEventListener("mouseenter",(e=>{this.showSkillTip(e,a)})),e.addEventListener("mouseleave",(()=>{this.hideSkillTip()})),e.dataset.eventBound="true"}}))},cleanupDynamicEvents(){const e=this.$refs.pet_skill_grid_con;e&&(e.innerHTML="")}},watch:{visible(e){e&&this.$nextTick((()=>{if(this.pet.all_skill&&this.show_pet_skill_in_grade){const e=this.show_pet_skill_in_grade(this.pet.all_skill,this.pet.sp_skill,6,4,this.conf,this.pet),{skill_panel_name:t,notice_node_name:i}=this.conf,s=e[t],a=e[i];s&&this.$refs.pet_skill_grid_con&&(s.forEach((e=>{e&&this.$refs.pet_skill_grid_con.appendChild(e)})),this.$nextTick((()=>{this.bindEventsForDynamicNodes()}))),a&&this.$refs.pet_tip_notice_msg&&(this.$refs.pet_tip_notice_msg.style.display="block")}}))}}},d=_,u=i(1656),h=(0,u.A)(d,r,n,!1,null,"31798bc7",null),g=h.exports,m={name:"PetImage",components:{PetInfoPopover:g},mixins:[o.B],props:{size:{type:String,default:"small"},width:{type:String,default:"50px"},height:{type:String,default:"50px"},cursor:{type:String,default:"pointer"},placement:{type:String,default:"right"},popoverWidth:{type:String,default:"400px"},pet:Object,enhanceInfo:{type:Object,default:()=>({})},equipFaceImg:{type:String,default:""}},computed:{imageUrl(){const e=this.equipFaceImg;return this.getImageUrl(`${e}`)},imageStyle(){return{display:"inline-block",width:this.width,height:this.height,cursor:this.cursor}}},mounted(){console.log(this.pet)}},v=m,f=(0,u.A)(v,s,a,!1,null,"28e643ce",null),y=f.exports},5734:function(e){"use strict";e.exports="data:image/webp;base64,UklGRj4DAABXRUJQVlA4WAoAAAAQAAAAGAAAGAAAQUxQSJoBAAANkC3btmk7fa7tfc65jm3bT3b+WU/OtW37Hm3OOPmEiJgAEERM8VjTLs+vRyubE+VcFQVBECkebtxle1G6sjVdJkdRATG3b978Ot1f3WoMzx++87X9S6IgmManx0a/Rd6+JthciLzXxybebOWI4dHcWJ3ASYHATmr4Jw68ITfcODreV3V3JQB+0VmJwwvHJ9vVmKuTtRpuwG8DvxYTBEc7CP17H0AKkOexawylisKr9vKpY29j0ALU6zsl38epCLjPxhtL84plW+A4QS2BQpZmyK5aa8Mo+C6/hAAF4jqc2nTssmDZ/K2TZtCQBM6OYv+dn6bg5VFc4r/uuFFUABH5G1WFire2eUT+h041Vcp7VPhnlaXi1Nx1QcT5mwjQ9gPVqOs+tZq2/WnZCgLe7/UyhncHVpwh8kuuYjtZbXkXuQ4uHNjHdlVUQEXDRubn9raQKe2te91yPRcVFSQM48W1NkymGn1dPnRbjYqKivJ5ZvcuTyRXVR0eGbrefCAs7VTnNtqP7t8lIqKaq6rGS/VyErtO0d/jGkSMAFZQOCB+AQAAsAcAnQEqGQAZAD6RQptKJaOiIagIALASCWwAts9638v58XuZ95dABoOead9mHe2xUPtcrHCsbdN+SdlFvK/QOGIzGISeAAD++JsQfm5s3RODymgbWiZjtMnOn6V+bS7cLUgbNzt9Ih3v3IDfKGya5rtZ/vTP86XGTi9gXdJPjpmbHa/edFs4mbXNAz6EYFxuedvyEnaJ42FK24F392v453Wbd8XEuWRF36k9XYP7jmM/htqqe/SAX08LuzG8+5k6+F78o/qRR3Js7POFQook0J/WcMGdWPspmdkdsLGEPLf/r/8H4NhbBy7/fC/aqZAQ/VkdE99F/d2vkz/TsXI3R/R6FfOvNk9n3ppCs0RDXdGWEBWe61/n8zcfU0+pzU/6UJQMLeswclV/g2iXqmgXH3eykUHS61eUORu1g0/eQ9sIrVq1jtCmO77ExiCDhf65c7+n/39pB7HKGZHfDvyTwk67YmV+wzfTp/dR3/kusLKDMo01guBVx3UibQAAAA=="},6622:function(e,t,i){"use strict";i(8111),i(7588);class s{constructor(){this.channelName="similar-window-reuse",this.channel=null,this.windowId=null,this.isSetup=!1,this.setup()}setup(){try{this.channel=new BroadcastChannel(this.channelName),this.windowId=this.generateWindowId(),this.setupMessageListener(),this.isSetup=!0,window.addEventListener("beforeunload",(()=>{this.cleanup()})),console.log("WindowReuseManager setup completed, windowId:",this.windowId)}catch(e){console.warn("Failed to setup WindowReuseManager:",e)}}generateWindowId(){return`window_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setupMessageListener(){this.channel&&(this.channel.onmessage=e=>{const{type:t,params:i,windowId:s,timestamp:a}=e.data;switch(t){case"check-window":this.handleCheckWindow(i,a);break;case"focus-window":this.handleFocusWindow(s,a);break;case"update-params":this.handleUpdateParams(i,a);break;default:console.log("Unknown message type:",t)}})}handleCheckWindow(e,t){console.log("🔍 收到窗口检查请求，当前窗口ID:",this.windowId),console.log("🔍 检查参数:",e),this.isWindowCompatible(e)?(console.log("✅ 当前窗口兼容，发送可用消息"),this.channel.postMessage({type:"window-available",windowId:this.windowId,params:e,timestamp:Date.now()})):console.log("❌ 当前窗口不兼容，忽略请求")}handleFocusWindow(e,t){e===this.windowId&&this.focusWindow()}handleUpdateParams(e,t){console.log("📨 收到参数更新请求:",e),this.isWindowCompatible(e)?(console.log("✅ 窗口兼容，开始更新参数..."),this.refreshWithNewUrl(e)):(console.log("❌ 窗口不兼容，忽略参数更新请求"),console.log("当前窗口参数与请求参数不匹配，无法更新"))}isWindowCompatible(e){try{const t=window.location.href;if(console.log("🔍 检查窗口兼容性，当前URL:",t),!t.includes("/auto-params")&&!t.includes("#/auto-params"))return console.log("❌ 不是auto-params页面"),!1;let i;if(window.location.hash&&window.location.hash.includes("?")){const e=window.location.hash.split("?")[1];console.log("🔍 从hash中提取查询参数:",e),i=new URLSearchParams(e)}else console.log("🔍 从search中获取参数:",window.location.search),i=new URLSearchParams(window.location.search);const s=i.get("action"),a=i.get("equip_type");return console.log("🔍 当前页面参数 - action:",s,"equip_type:",a),console.log("🔍 请求参数 - action:",e.action,"equip_type:",e.equip_type),s!==e.action?(console.log("❌ action不匹配"),!1):e.equip_type&&a!==e.equip_type?(console.log("❌ equip_type不匹配"),!1):(console.log("✅ 窗口兼容性检查通过"),!0)}catch(t){return console.warn("Error checking window compatibility:",t),!1}}focusWindow(){try{window.focus&&window.focus(),window.screen&&window.screen.orientation&&window.focus(),window.scrollTo(0,0),console.log("Window focused:",this.windowId)}catch(e){console.warn("Failed to focus window:",e)}}updateWindowParams(e){try{let t;if(window.location.hash&&window.location.hash.includes("?")){const[i,s]=window.location.hash.split("?"),a=new URLSearchParams(s);Object.keys(e).forEach((t=>{void 0!==e[t]&&null!==e[t]&&a.set(t,e[t])})),t=`${i}?${a.toString()}`}else{const i=new URL(window.location);Object.keys(e).forEach((t=>{void 0!==e[t]&&null!==e[t]&&i.searchParams.set(t,e[t])})),t=i.toString()}window.history.replaceState({},"",t);const i=new CustomEvent("params-updated",{detail:{params:e,timestamp:Date.now()}});window.dispatchEvent(i),console.log("📢 已触发参数更新事件:",i),console.log("Window params updated:",e)}catch(t){console.warn("Failed to update window params:",t)}}refreshWithNewUrl(e){try{let t;if(window.location.hash&&window.location.hash.includes("?")){const[i,s]=window.location.hash.split("?"),a=new URLSearchParams(s);Object.keys(e).forEach((t=>{void 0!==e[t]&&null!==e[t]&&a.set(t,e[t])})),t=`${i}?${a.toString()}`}else{const i=new URL(window.location);Object.keys(e).forEach((t=>{void 0!==e[t]&&null!==e[t]&&i.searchParams.set(t,e[t])})),t=i.toString()}console.log("🔄 准备用新URL刷新页面:",t),window.location.href=t,window.location.reload()}catch(t){console.warn("Failed to refresh with new URL:",t),window.location.reload()}}checkForExistingWindow(e,t=1e3){return new Promise((i=>{if(!this.channel)return console.warn("❌ 广播通道未初始化，无法检查窗口复用"),void i(!1);const s={type:"check-window",params:e,timestamp:Date.now()};console.log("📡 发送窗口检查消息:",s);const a=setTimeout((()=>{this.channel.removeEventListener("message",r),console.log("⏰ 窗口检查超时，未找到可复用窗口"),i(!1)}),t),r=t=>{console.log("📨 收到响应消息:",t.data),"window-available"===t.data.type&&t.data.params.action===e.action&&(clearTimeout(a),this.channel.removeEventListener("message",r),console.log("✅ 找到可复用窗口:",t.data),i({windowId:t.data.windowId,params:t.data.params}))};this.channel.addEventListener("message",r),this.channel.postMessage(s)}))}requestFocus(e){this.channel&&this.channel.postMessage({type:"focus-window",windowId:e,timestamp:Date.now()})}requestUpdateParams(e,t){if(!this.channel)return void console.warn("❌ 广播通道未初始化，无法发送参数更新请求");const i={type:"update-params",windowId:e,params:t,timestamp:Date.now()};console.log("📡 发送参数更新请求到窗口:",e),console.log("📡 更新参数:",t),this.channel.postMessage(i)}extractParamsFromUrl(e){try{if(!e)return{};let t="";if(e.includes("#")){const i=e.split("#")[1];i.includes("?")&&(t=i.split("?")[1])}else e.includes("?")&&(t=e.split("?")[1]);if(!t)return{};const i=new URLSearchParams(t),s={};for(const[e,a]of i.entries())s[e]=a;return console.log("🔍 从URL解析参数:",s),s}catch(t){return console.warn("解析URL参数失败:",t),{}}}cleanup(){this.channel&&(this.channel.close(),this.channel=null),this.isSetup=!1}getStatus(){return{channelName:this.channelName,channel:!!this.channel,windowId:this.windowId,isSetup:this.isSetup}}}const a=new s;t.A=a},7070:function(e){"use strict";e.exports="data:image/webp;base64,UklGRowBAABXRUJQVlA4WAoAAAAQAAAAEgAAEgAAQUxQSF8AAAABcCJtexN9k0i4YySDZDgFmgMwuOaif0evu6pehvonbnVETACu7nbvgA+fzBzcifK38a9MXNLNPAHgPy1mD6LbbCtn+w8lWZGEIgtSACIyogjXWBvoGPdKM1qBl4zEFQBWUDggBgEAAHAGAJ0BKhMAEwA+kUKbSiWjoiGoCACwEglnAAUQIY740/n72AOiT+s3sAfqAFCcLl2HfJH1fyqWsrTYAAD3T/maafwVKMiXcvPc5moCQGPhw6Y71xh7gM/k3fk575KTEp46OUH8rBxpNKf3vCVh7+agdV1VxAThHClSmCqcgQmY20qexNKfqwIUnfhWg9g7SdKRFxgDPbfxvUzGEs/Y2ZD5SSykdUI2hNjJ4B66I4nycpfy11W/p+HiNrNGfa3YIyGm8EFe4m8FMWdDjjsMjBO4+hPkUrf+Fj0mV8AJZZOg9rakZ0IlcCQS38isd7MTHvQu0I0VTLxb0NMTUKT4iDp/SMAAAAA="},7592:function(e,t,i){"use strict";var s=i(6848),a=i(4096),r=i(6178),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("AutoParams",{attrs:{isRunning:e.isRunning,log:!1},on:{"update:isRunning":function(t){e.isRunning=t},"update:is-running":function(t){e.isRunning=t}}}),t("LogMonitor",{attrs:{isRunning:e.isRunning}})],1)},l=[],o=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"spider-system-card",attrs:{shadow:"never"}},[t("el-row",{staticClass:"card-header",attrs:{slot:"header",type:"flex",justify:"space-between",align:"middle"},slot:"header"},[t("div",[t("span",{staticClass:"emoji-icon"},[e._v("⚙️")]),e._v(" 配置")]),t("div",{staticClass:"tool-buttons"},[t("el-dropdown",{attrs:{"split-button":"",type:"danger"},on:{click:e.stopTask}},[e._v(" 🛑 停止 "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{nativeOn:{click:function(t){return e.resetTask.apply(null,arguments)}}},[e._v("🛑 重置任务")])],1)],1)],1)]),t("el-row",{attrs:{type:"flex"}},[t("div",{staticStyle:{width:"140px","text-align":"center"}},[e.externalParams.action?[t("el-col",{attrs:{span:24}},[t("p",{staticClass:"cBlue",staticStyle:{"margin-bottom":"5px"}},[e._v("🎯目标：")])]),"similar_equip"===e.externalParams.action?t("EquipmentImage",{staticStyle:{display:"flex","flex-direction":"column",height:"50px",width:"100%","align-items":"center"},attrs:{equipment:e.externalParams,popoverWidth:450}}):e._e(),"similar_pet"===e.externalParams.action?t("PetImage",{attrs:{pet:e.externalParams,equipFaceImg:e.externalParams.equip_face_img}}):e._e(),e.externalParams.action?[t("div",{staticStyle:{display:"inline-block","margin-left":"8px"}},[t("el-link",{style:e.cbgLinkStyle,attrs:{type:e.isCookieValid?"danger":"info",disabled:!e.isCookieValid},on:{click:e.openCBGSearch}},[e._v(" 藏宝阁 ")]),e.isCookieValid?e._e():t("el-tooltip",{attrs:{content:"请先登录藏宝阁，确保Cookies有效后再使用此功能",placement:"top"}},[t("i",{staticClass:"el-icon-warning",staticStyle:{color:"#e6a23c","margin-left":"4px"}})])],1)]:e._e()]:e._e()],2),t("el-form",{directives:[{name:"show",rawName:"v-show",value:"playwright"!==e.activeTab,expression:"activeTab !== 'playwright'"}],staticStyle:{width:"100%","flex-shrink":"1"},attrs:{model:e.globalSettings}},[t("el-row",{attrs:{gutter:40}},[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"📄 爬取页数",size:"small"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:100,"controls-position":"right"},model:{value:e.globalSettings.max_pages,callback:function(t){e.$set(e.globalSettings,"max_pages",t)},expression:"globalSettings.max_pages"}})],1)],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:`⏱️ 延迟范围(秒) 当前：${e.globalSettings.delay_min} - ${e.globalSettings.delay_max} 秒`,size:"small"}},[t("el-slider",{staticStyle:{width:"100%",display:"inline-block"},attrs:{range:"","show-stops":"",min:8,max:30,step:1},on:{change:e.onDelayRangeChange},model:{value:e.delayRange,callback:function(t){e.delayRange=t},expression:"delayRange"}})],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"⚡ 快速配置",size:"small"}},[t("br"),t("el-row",{staticStyle:{height:"32px"},attrs:{type:"flex",align:"middle"}},[t("el-tag",{staticStyle:{cursor:"pointer"},attrs:{size:"mini"},on:{click:function(t){return e.quickConfig("small")}}},[e._v("10页")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-tag",{staticStyle:{cursor:"pointer"},attrs:{size:"mini"},on:{click:function(t){return e.quickConfig("medium")}}},[e._v("50页")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-tag",{staticStyle:{cursor:"pointer"},attrs:{size:"mini"},on:{click:function(t){return e.quickConfig("large")}}},[e._v("100页")])],1)],1)],1)],1),"role"!==e.activeTab?t("el-row",{attrs:{type:"flex",align:"middle"}},[t("el-col",{attrs:{span:12}},[t("el-row",{attrs:{type:"flex"}},[t("el-form-item",{staticStyle:{width:"150px"},attrs:{label:"🌎 全服搜索",size:"small"}},[t("el-switch",{model:{value:e.globalSettings.overall,callback:function(t){e.$set(e.globalSettings,"overall",t)},expression:"globalSettings.overall"}})],1),e.globalSettings.overall?e._e():t("el-form-item",{staticStyle:{width:"150px"},attrs:{label:" 多区搜索",size:"small"}},[t("el-switch",{model:{value:e.globalSettings.multi,callback:function(t){e.$set(e.globalSettings,"multi",t)},expression:"globalSettings.multi"}})],1)],1)],1),e.globalSettings.overall?e._e():t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"🎯 目标服务器",size:"small"}},[t("el-cascader",{directives:[{name:"show",rawName:"v-show",value:e.globalSettings.multi,expression:"globalSettings.multi"}],attrs:{options:e.hotServers,props:{value:"server_id",label:"server_name",multiple:!0,emitPath:!1},"collapse-tags":"",size:"mini",filterable:""},on:{change:e.onTargetServerChange},model:{value:e.target_server_list,callback:function(t){e.target_server_list=t},expression:"target_server_list"}}),t("el-cascader",{directives:[{name:"show",rawName:"v-show",value:!e.globalSettings.multi,expression:"!globalSettings.multi"}],attrs:{options:e.server_data,size:"mini",filterable:"",clearable:""},on:{change:e.onServerDataChange},model:{value:e.server_data_value,callback:function(t){e.server_data_value=t},expression:"server_data_value"}})],1)],1)],1):e._e(),t("el-row",{attrs:{type:"flex",align:"middle"}},[t("el-form-item",{attrs:{label:"最低价格",size:"small"}},[t("el-checkbox",{model:{value:e.price_min_trigger,callback:function(t){e.price_min_trigger=t},expression:"price_min_trigger"}}),t("el-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:10,controls:!1},model:{value:e.price_min,callback:function(t){e.price_min=t},expression:"price_min"}})],1)],1)],1)],1),t("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"🖐️ 手动抓取",name:"playwright",disabled:!!e.externalParams.action}},[t("el-form",{attrs:{model:e.playwrightForm,"label-width":"120px",size:"small"}},[t("el-form-item",{attrs:{label:"无头模式"}},[t("el-switch",{on:{change:e.onHeadlessToggle},model:{value:e.playwrightForm.headless,callback:function(t){e.$set(e.playwrightForm,"headless",t)},expression:"playwrightForm.headless"}}),t("span",{staticClass:"form-tip"},[e._v("关闭后可以看到浏览器操作过程")])],1),t("el-form-item",{attrs:{label:"目标URL"}},[t("el-select",{staticStyle:{width:"100%"},on:{change:e.onTargetUrlChange},model:{value:e.playwrightForm.target_url,callback:function(t){e.$set(e.playwrightForm,"target_url",t)},expression:"playwrightForm.target_url"}},[t("el-option",{attrs:{label:"角色推荐搜索",value:"role_recommend"}}),t("el-option",{attrs:{label:"装备推荐搜索",value:"equip_recommend"}}),t("el-option",{attrs:{label:"召唤兽推荐搜索",value:"pet_recommend"}}),t("el-option",{attrs:{label:"自定义URL",value:"custom"}})],1)],1),"custom"===e.playwrightForm.target_url?t("el-form-item",{attrs:{label:"自定义URL"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入完整的CBG URL"},model:{value:e.playwrightForm.custom_url,callback:function(t){e.$set(e.playwrightForm,"custom_url",t)},expression:"playwrightForm.custom_url"}},[t("template",{slot:"prepend"},[e._v("https://")])],2)],1):e._e(),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.isRunning},on:{click:e.startPlaywrightCollector}},[e._v(" 🚀 启动 ")])],1)],1)],1),t("el-tab-pane",{attrs:{label:"👤 角色",name:"role",disabled:!!e.externalParams.action}},[t("el-form",{attrs:{model:e.roleForm,"label-width":"100px",size:"small"}},[t("div",{staticClass:"params-editor"},[t("div",{staticClass:"params-actions"},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:()=>e.resetParam("role")}},[e._v("重置")]),t("el-button",{attrs:{type:"primary",size:"mini",loading:e.roleSaving,disabled:!!e.roleJsonError},on:{click:()=>e.saveParam("role")}},[e._v(" 保存配置 ")])],1),t("div",{staticClass:"json-editor-wrapper"},[t("el-input",{staticClass:"json-editor",attrs:{type:"textarea",placeholder:"请输入角色爬虫参数JSON",rows:8},on:{blur:()=>e.validateParam("role")},model:{value:e.roleParamsJson,callback:function(t){e.roleParamsJson=t},expression:"roleParamsJson"}}),e.roleJsonError?t("div",{staticClass:"json-error"},[t("i",{staticClass:"el-icon-warning"}),e._v(" "+e._s(e.roleJsonError)+" ")]):e._e()],1)]),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.isRunning},on:{click:()=>e.startSpiderByType("role")}},[e._v(" 🚀 启动 ")])],1)],1)],1),t("el-tab-pane",{attrs:{label:"⚔️ 装备",name:"equip",disabled:e.externalParams.action&&"similar_equip"!==e.externalParams.action}},[t("el-form",{attrs:{model:e.equipForm,"label-width":"100px",size:"small"}},[t("el-form-item",{attrs:{label:"装备类型"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"similar_equip"===e.externalParams.action},on:{change:e.onEquipTypeChange},model:{value:e.equipForm.equip_type,callback:function(t){e.$set(e.equipForm,"equip_type",t)},expression:"equipForm.equip_type"}},[t("el-option",{attrs:{label:"普通装备",value:"normal"}}),t("el-option",{attrs:{label:"灵饰装备",value:"lingshi"}}),t("el-option",{attrs:{label:"召唤兽装备",value:"pet"}})],1)],1),"normal"===e.equipForm.equip_type&&e.targetFeatures.suit_effect?t("el-form-item",{attrs:{label:"套装效果"}},[t("el-radio-group",{model:{value:e.suit_effect_type,callback:function(t){e.suit_effect_type=t},expression:"suit_effect_type"}},[t("el-radio",{attrs:{label:""}},[t("span",{domProps:{innerHTML:e._s(e.formatSuitEffect({suit_effect:e.targetFeatures.suit_effect}))}})]),t("el-radio",{attrs:{label:"select"}},[e._v("自选")]),t("el-radio",{attrs:{label:"agility_detailed.A"}},[e._v("敏捷A套")]),t("el-radio",{attrs:{label:"agility_detailed.B"}},[e._v("敏捷B套")]),t("el-radio",{attrs:{label:"magic_detailed.A"}},[e._v("魔力A套")]),t("el-radio",{attrs:{label:"magic_detailed.B"}},[e._v("魔力B套")])],1),"select"===e.suit_effect_type?t("el-cascader",{attrs:{options:e.suitOptions,placeholder:"请选择套装效果",separator:"",clearable:"",filterable:""},on:{change:e.handleSuitChange}}):e._e(),e.suit_effect_type?.split(".").length>1?t("el-radio-group",{model:{value:e.select_suit_effect,callback:function(t){e.select_suit_effect=t},expression:"select_suit_effect"}},e._l(e.equipConfig?.suits[e.suit_effect_type.split(".")[0]][e.suit_effect_type.split(".")[1]],(function(i){return t("el-radio",{key:i,attrs:{label:i.toString()}},[e._v(e._s(e.suit_transform_skills[i]))])})),1):e._e()],1):e._e(),"normal"===e.equipForm.equip_type&&e.targetFeatures.addon_total>0?t("el-form-item",{attrs:{label:"属性加成"}},[t("el-checkbox-group",{model:{value:e.select_sum_attr_type,callback:function(t){e.select_sum_attr_type=t},expression:"select_sum_attr_type"}},[t("el-checkbox",{attrs:{label:"dex"}},[e._v("敏捷")]),t("el-checkbox",{attrs:{label:"endurance"}},[e._v("耐力")]),t("el-checkbox",{attrs:{label:"magic"}},[e._v("魔力")]),t("el-checkbox",{attrs:{label:"physique"}},[e._v("体质")]),t("el-checkbox",{attrs:{label:"power"}},[e._v("力量")])],1),t("el-checkbox",{model:{value:e.sum_attr_with_melt,callback:function(t){e.sum_attr_with_melt=t},expression:"sum_attr_with_melt"}},[e._v("计算熔炼效果")])],1):e._e(),"lingshi"===e.equipForm.equip_type?t("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{"show-icon":"",closable:!1}},[t("span",{attrs:{slot:"title"},domProps:{innerHTML:e._s(e.lingshiTips)},slot:"title"})]):e._e(),t("div",{staticClass:"params-editor"},[t("div",{staticClass:"params-actions"},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:()=>e.resetParam("equip")}},[e._v("重置")]),t("el-button",{attrs:{type:"primary",size:"mini",loading:e.equipSaving,disabled:!!e.equipJsonError},on:{click:()=>e.saveParam("equip")}},[e._v(" 保存配置 ")])],1),t("el-row",{attrs:{type:"flex"}},["similar_equip"===e.externalParams.action?t("div",{staticClass:"json-editor-wrapper"},[t("el-input",{staticClass:"json-editor",attrs:{type:"textarea",placeholder:"搜索指定参数",rows:10},model:{value:e.externalSearchParams,callback:function(t){e.externalSearchParams=t},expression:"externalSearchParams"}}),e.equipJsonError?t("div",{staticClass:"json-error"},[t("i",{staticClass:"el-icon-warning"}),e._v(" "+e._s(e.equipJsonError)+" ")]):e._e()],1):e._e(),t("div",{staticClass:"json-editor-wrapper"},[t("el-input",{staticClass:"json-editor",attrs:{type:"textarea",placeholder:"请输入装备爬虫参数JSON",rows:10},on:{blur:()=>e.validateParam("equip")},model:{value:e.equipParamsJson,callback:function(t){e.equipParamsJson=t},expression:"equipParamsJson"}}),e.equipJsonError?t("div",{staticClass:"json-error"},[t("i",{staticClass:"el-icon-warning"}),e._v(" "+e._s(e.equipJsonError)+" ")]):e._e()],1),t("div",{staticClass:"json-editor-wrapper"},[t("el-input",{staticClass:"json-editor",attrs:{type:"textarea",readonly:"",value:e.cached_params,rows:10}})],1)])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.isRunning},on:{click:()=>e.startSpiderByType("equip")}},[e._v(" 🚀 启动 ")])],1)],1)],1),t("el-tab-pane",{attrs:{label:"🐲 召唤兽",name:"pet",disabled:e.externalParams.action&&"similar_pet"!==e.externalParams.action}},[t("el-form",{attrs:{model:e.petForm,"label-width":"100px",size:"small"}},[t("div",{staticClass:"params-editor"},[t("div",{staticClass:"params-actions"},[t("el-button",{attrs:{type:"mini",size:"mini"},on:{click:()=>e.resetParam("pet")}},[e._v("重置")]),t("el-button",{attrs:{type:"primary",size:"mini",loading:e.petSaving,disabled:!!e.petJsonError},on:{click:()=>e.saveParam("pet")}},[e._v(" 保存配置 ")])],1),t("el-row",{attrs:{type:"flex"}},["similar_pet"===e.externalParams.action?t("div",{staticClass:"json-editor-wrapper"},[t("el-input",{staticClass:"json-editor",attrs:{type:"textarea",rows:10},model:{value:e.externalSearchParams,callback:function(t){e.externalSearchParams=t},expression:"externalSearchParams"}})],1):e._e(),t("div",{staticClass:"json-editor-wrapper"},[t("el-input",{staticClass:"json-editor",attrs:{type:"textarea",placeholder:"请输入召唤兽爬虫参数JSON",rows:10},on:{blur:()=>e.validateParam("pet")},model:{value:e.petParamsJson,callback:function(t){e.petParamsJson=t},expression:"petParamsJson"}}),e.petJsonError?t("div",{staticClass:"json-error"},[t("i",{staticClass:"el-icon-warning"}),e._v(" "+e._s(e.petJsonError)+" ")]):e._e()],1),t("div",{staticClass:"json-editor-wrapper"},[t("el-input",{staticClass:"json-editor",attrs:{type:"textarea",readonly:"",value:e.cached_params,rows:10}})],1)])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.isRunning},on:{click:()=>e.startSpiderByType("pet")}},[e._v(" 🚀 启动 ")])],1)],1)],1)],1),e.log?t("LogMonitor",{attrs:{maxLines:8,simpleMode:"",isRunning:e.isRunning}}):e._e()],1)},c=[],p=(i(4114),i(8111),i(7588),i(1701),i(7642),i(8004),i(3853),i(5876),i(2475),i(5024),i(1698),i(6556)),_=i(9122),d=i.n(_),u=i(7694),h=i(5220),g=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"logs-card",class:{"simple-mode":e.simpleMode}},[e.simpleMode?e._e():t("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("📝 实时日志")]),t("div",[t("el-button",{attrs:{type:"text",loading:e.logsLoading,size:"small"},on:{click:e.refreshLogs}},[e._v("刷新")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:e.toggleLogStream}},[e._v(" "+e._s(e.isLogStreaming?"停止":"开始")+"实时监控 ")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:e.clearLogs}},[e._v("清空")])],1)]),t("div",{staticClass:"logs-content"},[t("div",{ref:"logsContainer",staticClass:"logs-container"},[0===e.logs.length?t("div",{staticClass:"no-logs"},[t("i",{staticClass:"el-icon-document"}),t("p",[e._v("暂无日志数据")])]):t("div",{staticClass:"log-lines"},e._l(e.logs,(function(i,s){return t("div",{key:s,staticClass:"log-line",class:e.getLogLevel(i)},[t("span",{staticClass:"log-time"},[e._v(e._s(e.getLogTime(i)))]),t("span",{staticClass:"log-content"},[e._v(e._s(e.getLogContent(i)))])])})),0)])])])},m=[],v={name:"LogMonitor",props:{simpleMode:{type:Boolean,default:!1},maxLines:{type:Number,default:100},isRunning:{type:Boolean,default:!1}},data(){return{logsLoading:!1,logs:[],logsInfo:null,isLogStreaming:!1,logEventSource:null}},watch:{isRunning(e){e?this.startLogStream():this.stopLogStream()}},mounted(){this.refreshLogs()},beforeDestroy(){this.stopLogStream()},methods:{async refreshLogs(){this.logsLoading=!0;try{const e={lines:this.maxLines,type:"current"},t=await this.$api.spider.getLogs(e);200===t.code?(this.logs=t.data.logs||[],this.logsInfo=t.data,this.scrollToBottom()):this.$notify.error(t.message||"获取日志失败")}catch(e){this.$notify.error("获取日志失败: "+e.message)}finally{this.logsLoading=!1}},toggleLogStream(){this.isLogStreaming?this.stopLogStream():this.startLogStream()},startLogStream(){if(!this.isLogStreaming)try{this.logEventSource=this.$api.spider.streamLogs(),this.isLogStreaming=!0,this.logEventSource.onmessage=e=>{if(e.data){try{const t=JSON.parse(e.data);t.log?this.logs.push(t.log):"string"===typeof t&&this.logs.push(t)}catch(t){this.logs.push(e.data)}this.logs.length>this.maxLines&&(this.logs=this.logs.slice(-this.maxLines)),this.scrollToBottom()}},this.logEventSource.onerror=e=>{console.error("日志流错误:",e),setTimeout((()=>{this.isLogStreaming&&(this.stopLogStream(),this.startLogStream())}),5e3)},this.logEventSource.onopen=()=>{console.log("日志流连接已建立")},0===this.logs.length&&this.logs.push("实时日志监控已启动，等待日志数据...")}catch(e){console.error("启动实时日志监控失败:",e)}},stopLogStream(){if(this.logEventSource){try{this.logEventSource.close()}catch(e){console.log("关闭日志流连接:",e)}this.logEventSource=null}this.isLogStreaming=!1},clearLogs(){this.logs=[],this.logsInfo=null},scrollToBottom(){this.$nextTick((()=>{const e=this.$refs.logsContainer;e&&(e.scrollTop=e.scrollHeight)}))},getLogLevel(e){return e.includes("ERROR")||e.includes("错误")?"log-error":e.includes("WARNING")||e.includes("警告")?"log-warning":e.includes("INFO")||e.includes("信息")?"log-info":"log-default"},getLogTime(e){const t=e.match(/(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2})/);return t?t[1]:""},getLogContent(e){return e.replace(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}[,\d]*\s*/,"")}}},f=v,y=i(1656),w=(0,y.A)(f,g,m,!1,null,"312452f7",null),b=w.exports,S=i(6622),A=i(711);const k=[];for(let M in window.server_data){let[e,t]=window.server_data[M];const[i,,,,s]=e;t=t.map((([e,t])=>({value:e,label:t}))),k.push({label:i,value:s,children:t})}var x={name:"AutoParams",props:{log:{type:Boolean,default:!0}},mixins:[A.G],components:{EquipmentImage:u.A,LogMonitor:b,PetImage:h.A},data(){return{sum_attr_with_melt:!0,select_sum_attr_type:[],price_min:1,price_min_trigger:!1,suit_transform_skills:window.AUTO_SEARCH_CONFIG.suit_transform_skills,suitOptions:[],suit_effect_type:"",select_suit_effect:"",equipConfig:{},hotServers:[],server_data:k,target_server_list:[],target_server_objects:[],globalSettings:{max_pages:5,delay_min:8,delay_max:20,overall:!1,multi:!1},delayRange:[8,20],roleForm:{},equipForm:{equip_type:"normal"},petForm:{},proxyForm:{},playwrightForm:{headless:!1,target_url:"role_recommend",custom_url:""},roleParamsJson:"",equipParamsJson:"{}",petParamsJson:"",roleJsonError:"",equipJsonError:"",petJsonError:"",defaultParams:{role:{},equip_normal:{},equip_lingshi:{},equip_pet:{},equip_pet_equip:{},pet:{}},isRunning:!1,paramsLoading:!1,activeTab:"playwright",statusMonitor:null,roleSaving:!1,equipSaving:!1,petSaving:!1,cacheCleanupTimer:null,externalSearchParams:"{}",targetFeatures:{},paramManager:{role:{jsonKey:"roleParamsJson",errorKey:"roleJsonError",savingKey:"roleSaving",paramType:"role",successMessage:"角色参数配置保存成功",spiderType:"role",spiderName:"角色爬虫",getParams:()=>({...this.globalSettings,...this.roleForm,cached_params:JSON.parse(this.roleParamsJson)})},equip:{jsonKey:"equipParamsJson",errorKey:"equipJsonError",savingKey:"equipSaving",paramType:"equip",successMessage:"装备参数配置保存成功",spiderType:"equip",spiderName:"装备爬虫",getParamType:()=>this.getEquipParamKey(this.equipForm.equip_type),getSuccessMessage:()=>`${this.getEquipTypeName(this.equipForm.equip_type)}参数配置保存成功`,getParams:()=>{const e={target_server_list:this.target_server_objects,...this.equipForm,...this.globalSettings,cached_params:JSON.parse(this.cached_params)};return e.overall&&(e.multi=!1,e.target_server_list=void 0),e}},pet:{jsonKey:"petParamsJson",errorKey:"petJsonError",savingKey:"petSaving",paramType:"pet",successMessage:"召唤兽参数配置保存成功",spiderType:"pet",spiderName:"召唤兽爬虫",getParams:()=>({target_server_list:this.target_server_objects,...this.petForm,...this.globalSettings,cached_params:JSON.parse(this.cached_params)})}}}},computed:{lingshiTips(){const e={1:"固伤",2:"伤害",3:"速度",4:"法伤",5:"狂暴",6:"物理暴击",7:"法术暴击",8:"封印",9:"法伤结果",10:"穿刺",11:"治疗",12:"气血",13:"防御",14:"法防",15:"抗物理暴击",16:"抗法术暴击",17:"抗封",18:"格挡",19:"回复"},t=new Set;for(let s in JSON.parse(this.externalSearchParams))if(s.startsWith("added_attr.")){const e=Number(s.replace("added_attr.",""));Number.isNaN(e)||t.add(e)}const i=[];for(let s=1;s<=19;s++){const a=e[s],r=t.has(s)?`<b style="color:#F56C6C;">${a}</b>`:a;i.push(`<b ${t.has(s)?'style="color:#F56C6C;"':""}>${s}:</b> ${r}`)}return i.join(", ")},view_loc(){return{view_loc:this.globalSettings.overall?"overall_search":"search_cond"}},currentServerData(){const{server_id:e,areaid:t,server_name:i}=this.$store.getters.getCurrentServerData;return{server_id:e,areaid:t,server_name:i}},externalParams(){const e=JSON.parse(JSON.stringify(this.$route.query));return"similar_pet"===e.action&&(e.evol_skill_list=JSON.parse(e.evol_skill_list||"{}"),e.neidan=JSON.parse(e.neidan||"{}"),e.equip_list=JSON.parse(e.equip_list||"{}"),e.texing=JSON.parse(e.texing||"{}")),e},server_data_value:{get(){return this.$store?.state.server_data_value||{}},set(e){this.$store.dispatch("setServerDataValue",e)}},isCookieValid(){return this.$store.getters["cookie/isCookieCacheValid"]},cbgLinkStyle(){return{color:this.isCookieValid?"#f56c6c":"#c0c4cc",cursor:this.isCookieValid?"pointer":"not-allowed",textDecoration:this.isCookieValid?"underline":"none"}},cached_params(){try{let e=JSON.parse(this.equipParamsJson);"pet"===this.activeTab&&(e=JSON.parse(this.petParamsJson));const t={...this.view_loc,hide_lingshi:"equip"===this.activeTab&&"normal"===this.equipForm.equip_type?1:void 0},i=this.globalSettings.overall?{server_id:void 0,server_name:void 0,areaid:void 0}:this.currentServerData;return JSON.stringify(Object.assign(JSON.parse(this.externalSearchParams),e,i,t),null,2)}catch(e){return"{}"}}},watch:{sum_attr_with_melt(e){const t=JSON.parse(this.equipParamsJson);t.sum_attr_with_melt=e?1:void 0,t.sum_attr_without_melt=e?void 0:1,this.equipParamsJson=JSON.stringify(t,null,2)},price_min(e){if(this.price_min_trigger){const t=JSON.parse(this.equipParamsJson);t.price_min=this.price_min_trigger?100*e:void 0,this.equipParamsJson=JSON.stringify(t,null,2)}},price_min_trigger(e){const t=JSON.parse(this.equipParamsJson);t.price_min=e?100*this.price_min:void 0,this.equipParamsJson=JSON.stringify(t,null,2)},select_suit_effect(e){const t=JSON.parse(this.equipParamsJson);t.suit_effect=e||void 0,this.equipParamsJson=JSON.stringify(t,null,2)},suit_effect_type(e){e||(this.select_suit_effect="")},select_sum_attr_type(e){let t=!1;[["liliang","power"],["minjie","dex"],["moli","magic"],["naili","endurance"],["tizhi","physique"]].forEach((([i,s])=>{this.targetFeatures[`addon_${i}`]>0?e.includes(s)||(t=!0):e.includes(s)&&(t=!0)}));const i=JSON.parse(this.equipParamsJson);i.sum_attr_type=e.length>0&&t?e.join(","):void 0,this.equipParamsJson=JSON.stringify(i,null,2)},isRunning(e){this.$emit("update:isRunning",e),e?this.startStatusMonitor():this.stopStatusMonitor()},"globalSettings.multi"(e){if(e){const e=Number(this.externalParams.serverid);console.log("开启多服务器模式，当前服务器ID:",e),this.globalSettings.max_pages=1,this.setTargetServersByLevel(e)}else this.target_server_list=[],this.target_server_objects=[],console.log("关闭多服务器模式，清空目标服务器列表")}},async mounted(){this.$store.dispatch("cookie/cleanExpiredCache"),this.cacheCleanupTimer=setInterval((()=>{this.$store.dispatch("cookie/cleanExpiredCache")}),6e4),this.loadHotServers(),await this.loadSearchParams(),this.checkTaskStatus(),this.delayRange=[this.globalSettings.delay_min,this.globalSettings.delay_max],this.loadExternalParams(),!this.externalParams.action||this.$store?.state.server_data_value&&0!==this.$store?.state.server_data_value.length||this.$store.dispatch("setServerDataValue",[43,77]),this.externalParams.action&&this.getFeatures().then((()=>{this.loadEquipConfig()})),this.initSuitOptions(),this.initWindowReuseManager()},beforeDestroy(){this.stopStatusMonitor(),this.cacheCleanupTimer&&clearInterval(this.cacheCleanupTimer)},methods:{handleSuitChange(e){const[,t]=e,i=t?.split("_").pop();this.select_suit_effect=i||""},onServerDataChange(){const{server_id:e,areaid:t,server_name:i}=this.$store.getters.getCurrentServerData;console.log("server_data_value",{server_id:e,areaid:t,server_name:i})},onTargetServerChange(e){this.target_server_objects=[],e&&e.length>0&&e.forEach((e=>{this.findServerInHotServers(e)}))},findServerInHotServers(e){for(const t of this.hotServers)if(t.children)for(const i of t.children)if(i.server_id===e)return void this.target_server_objects.push({server_id:i.server_id,areaid:t.areaid||i.areaid,server_name:i.server_name})},setTargetServersByLevel(e){if(!this.hotServers||0===this.hotServers.length)return void console.warn("hotServers数据未加载，无法设置目标服务器");let t=null,i=null;for(const s of this.hotServers)if(s.children){for(const a of s.children)if(a.server_id===e){t=s,i=a;break}if(t)break}t&&i?(console.log(`找到服务器 ${i.server_name} 在烟花等级组: ${t.server_name}`),this.target_server_objects=[],this.target_server_list=[],t.children.forEach((e=>{const i={server_id:e.server_id,areaid:t.areaid||e.areaid,server_name:e.server_name};this.target_server_objects.push(i),this.target_server_list.push(e.server_id)})),console.log(`已设置 ${this.target_server_objects.length} 个同级别服务器为目标服务器:`,this.target_server_objects)):console.warn(`未找到服务器ID ${e} 对应的烟花等级组`)},initWindowReuseManager(){try{S.A&&S.A.isSetup?console.log("窗口复用管理器已初始化，状态:",S.A.getStatus()):(console.log("窗口复用管理器正在初始化..."),setTimeout((()=>{S.A&&S.A.isSetup?console.log("窗口复用管理器初始化完成，状态:",S.A.getStatus()):console.warn("窗口复用管理器初始化失败")}),1e3)),window.addEventListener("params-updated",(e=>{const{params:t,timestamp:i}=e.detail;console.log("窗口参数已更新:",t),this.$forceUpdate(),this.loadExternalParams(),t.action&&this.getFeatures(),t.equip_type&&(this.equipForm.equip_type=t.equip_type,this.loadSearchParams()),t.activeTab&&(this.activeTab=t.activeTab),console.log("✅ 页面数据已刷新")}))}catch(e){console.warn("初始化窗口复用管理器失败:",e)}},async stopTask(){try{const e=await this.$api.spider.stopTask();200===e.code?(this.$notify.success({title:"任务状态",message:e.data?.message||"任务已停止"}),this.isRunning=!1):this.$notify.error({title:"任务状态",message:e.message||"停止失败"})}catch(e){this.$notify.error({title:"任务状态",message:e.message})}},async resetTask(){try{const e=await this.$api.spider.resetTask();200===e.code?(this.$notify.success({title:"任务状态",message:e.data?.message||"任务状态已重置"}),this.isRunning=!1):this.$notify.error({title:"任务状态",message:e.message||"重置失败"})}catch(e){this.$notify.error({title:"任务状态",message:e.message})}},genaratePetSearchParams(){const e={};return e.skill=this.externalParams.all_skill.replace(/\|/g,","),e.texing=this.externalParams.texing?.id,e.lingxing=this.externalParams.lx,e.growth=1e3*this.externalParams.growth,e},genarateEquipmentSearchParams({kindid:e,...t}){const i={};if(window.is_pet_equip(e)){this.equipForm.equip_type="pet",i.level=t.equip_level,i.speed=t.speed>0?t.speed:void 0,i.shanghai=t.shanghai>0?t.shanghai:void 0,i.hp=t.qixue>0?t.qixue:void 0,i.fangyu=t.fangyu>0?t.fangyu:void 0,i.xiang_qian_level=t.xiang_qian_level>0?t.xiang_qian_level:void 0;let e=0;["fali","liliang","lingli","minjie","naili"].forEach((t=>{i[`addon_${t}`]=this.targetFeatures[`addon_${t}`]>0?1:void 0,"minjie"===t&&this.targetFeatures[`addon_${t}`]<0?i.addon_minjie_reduce=-1*this.targetFeatures[`addon_${t}`]:e+=this.targetFeatures[`addon_${t}`]})),i.addon_sum=e>0?e:void 0,i.addon_sum_min=i.addon_sum,i.addon_status=t.addon_status,t.fangyu>0?i.equip_pos=1:t.speed>0?i.equip_pos=2:i.equip_pos=3}else if(window.is_lingshi_equip(e)){i.kindid=e,this.equipForm.equip_type="lingshi",t.equip_level&&(i.equip_level_min=t.equip_level,i.equip_level_max=1*t.equip_level+9);const{lingshi_added_attr1:s,lingshi_added_attr2:a}=window.AUTO_SEARCH_CONFIG,r={"法伤结果":"法术伤害结果","法伤":"法术伤害","固伤":"固定伤害","法术暴击":"法术暴击等级","物理暴击":"物理暴击等级","封印":"封印命中等级","狂暴":"狂暴等级","穿刺":"穿刺等级","治疗":"治疗能力","伤害":"伤害","速度":"速度","抗法术暴击":"抗法术暴击等级","抗物理暴击":"抗物理暴击等级","抗封":"抵抗封印等级","回复":"气血回复效果","法防":"法术防御","防御":"防御","格挡":"格挡值","气血":"气血"},n=()=>{const e={},t={...s,...a};return Object.entries(t).forEach((([t,i])=>{const s=r[i];s&&(e[s]=t)})),e},l=()=>{const e=["damage","defense","magic_damage","magic_defense","fengyin","anti_fengyin","speed"];e.forEach((e=>{t[e]&&t[e]>0&&(i[e]=t[e])}))},o=()=>{t.gem_level&&t.gem_level>0&&(i.jinglian_level=t.gem_level)},c=()=>{if(!t.attrs||!Array.isArray(t.attrs))return;const e=n(),s={};t.attrs.forEach((({attr_type:t})=>{const i=e[t];i&&(s[i]=(s[i]||0)+1)})),Object.entries(s).forEach((([e,t])=>{i[`added_attr.${e}`]=t}))};l(),o(),c()}else{i.kindid=e;let s=0;const a=[];[["moli","magic"],["liliang","power"],["tizhi","physique"],["minjie","dex"],["naili","endurance"]].forEach((([e,t])=>{this.targetFeatures[`addon_${e}`]>0&&a.push(t),s+=this.targetFeatures[`addon_${e}`]})),s>0&&(i.sum_attr_type=a.join(","),i.sum_attr_value=s),t.gem_level>0&&(i.gem_level=t.gem_level,i.gem_value=t.gem_value.join(",")),t.equip_level&&(i.level_min=t.equip_level,i.level_max=1*t.equip_level+9),t.special_effect&&t.special_effect.length>0&&(i.special_mode="and",i.special_effect=t.special_effect.join(",")),t.suit_effect&&(i.suit_effect=t.suit_effect),t.special_skill&&(i.special_skill=t.special_skill),t.hole_num&&(i.hole_num=t.hole_num);const r=["init_damage_raw","init_defense","init_hp","init_dex","init_wakan","all_wakan","all_damage","damage"];"2"===i.gem_value?r.splice(r.indexOf("all_damage"),1):"1"===i.gem_value&&r.splice(r.indexOf("init_damage"),1),r.forEach((e=>{t[e]&&(i[e]=t[e])}))}return i},getAreaIdByServerId(e){if(!window||!window.server_data)return;const t=Number(e);for(let i in window.server_data){const[e,s]=window.server_data[i],a=e&&e.length>=5?e[4]:void 0;if(Array.isArray(s))for(const i of s)if(Array.isArray(i)&&i[0]===t)return a}},async getFeatures(){let e={};if("similar_equip"===this.externalParams.action?await this.$api.equipment.extractFeatures({equipment_data:{kindid:1*this.externalParams.kindid||void 0,type:1*this.externalParams.type||void 0,large_equip_desc:this.externalParams.large_equip_desc},data_type:"equipment"}).then((t=>{200===t.code&&t.data.features&&(this.targetFeatures=t.data.features,document.title=this.targetFeatures.equip_level+"级"+this.externalParams.equip_name+" - "+this.externalParams.large_equip_desc.replace(/#r|#Y|#G|#c4DBAF4|#W|#cEE82EE|#c7D7E82/g,""),document.querySelector('link[rel="icon"]').href=this.externalParams.equip_face_img,e=this.genarateEquipmentSearchParams(t.data.features))})):"similar_pet"===this.externalParams.action&&(e=this.genaratePetSearchParams()),this.externalParams.serverid){const t=Number(this.externalParams.serverid),i=this.getAreaIdByServerId(t);e.server_id=t,void 0!==i&&(e.areaid=i),this.server_data_value=[i,t],e.server_name=this.externalParams.server_name}this.externalSearchParams=JSON.stringify(e,null,2)},async openCBGSearch(){const e=this.$store.getters["cookie/isCookieCacheValid"];if(!e)return void this.$notify.warning({message:"请先登录藏宝阁，确保Cookies有效后再使用此功能",duration:3e3,showClose:!0});let t="",i="search_role_equip",s={};"similar_equip"===this.externalParams.action?(window.is_pet_equip(this.targetFeatures.kindid)?i="search_pet_equip":window.is_lingshi_equip(this.targetFeatures.kindid)?i="search_lingshi":i+="&hide_lingshi=1",s=this.genarateEquipmentSearchParams(this.targetFeatures)):(i="search_pet",s=this.genaratePetSearchParams());const a=this.$store.getters.getCurrentServerData;t=`https://xyq.cbg.163.com/cgi-bin/recommend.py?callback=Request.JSONP.request_map.request_0&_=${(new Date).getTime()}&act=recommd_by_role&server_id=${a.server_id}&areaid=${a.areaid}&server_name=${a.server_name}&page=1&query_order=price%20ASC&view_loc=search_cond&count=15&search_type=${i}&`;let r=t+d().stringify(s);console.log(r,"target_url"),this.$api.spider.startPlaywright({headless:!1,target_url:r})},encodeGBK(e){if(!e)return"";try{const t=(0,p.A)(e);return Array.from(t).map((e=>`%${e.toString(16).toUpperCase().padStart(2,"0")}`)).join("")}catch(t){return console.warn("GBK编码失败，使用UTF-8编码作为降级方案:",t),window.encodeURI(e)}},async loadExternalParams(){this.externalParams.activeTab&&(this.activeTab=this.externalParams.activeTab),this.externalParams.equip_type&&(this.equipForm.equip_type=this.externalParams.equip_type)},quickConfig(e){const t={small:{max_pages:10,delay_min:10,delay_max:15},medium:{max_pages:50,delay_min:15,delay_max:20},large:{max_pages:100,delay_min:20,delay_max:30}},i=t[e];Object.assign(this.globalSettings,i),this.delayRange=[this.globalSettings.delay_min,this.globalSettings.delay_max]},onDelayRangeChange(e){this.globalSettings.delay_min=e[0],this.globalSettings.delay_max=e[1]},async loadEquipConfig(){const e=await this.$api.equipment.getEquipConfig();this.equipConfig=e.data,this.targetFeatures.suit_effect&&(this.suit_effect_type=""),this.targetFeatures.addon_total>0&&[["liliang","power"],["minjie","dex"],["moli","magic"],["naili","endurance"],["tizhi","physique"]].forEach((([e,t])=>{this.targetFeatures[`addon_${e}`]>0&&this.select_sum_attr_type.push(t)}))},async loadHotServers(){try{const e=await this.$api.system.getHotServers();if(this.hotServers=e,console.log("热门服务器数据加载完成:",this.hotServers),this.target_server_list&&this.target_server_list.length>0&&this.onTargetServerChange(this.target_server_list),this.globalSettings.multi&&this.externalParams.serverid){const e=Number(this.externalParams.serverid);console.log("数据加载完成后，自动设置多服务器模式的目标服务器:",e),this.setTargetServersByLevel(e)}}catch(e){console.error("加载热门服务器数据失败:",e),this.$notify.error("加载热门服务器数据失败: "+e.message)}},async loadSearchParams(){try{this.paramsLoading=!0;const e=await this.$api.system.getSearchParams();200===e.code?(this.defaultParams={role:e.data.role||{},equip_normal:e.data.equip_normal||{},equip_lingshi:e.data.equip_lingshi||{},equip_pet:e.data.equip_pet||{},equip_pet_equip:e.data.equip_pet_equip||{},pet:e.data.pet||{}},this.initializeDefaultParams()):(this.$notify.error(e.message||"加载搜索参数配置失败"),this.initializeDefaultParams())}catch(e){console.error("加载搜索参数配置失败:",e),this.$notify.error("加载搜索参数配置失败: "+e.message),this.initializeDefaultParams()}finally{this.paramsLoading=!1}},initializeDefaultParams(){this.roleParamsJson=JSON.stringify(this.defaultParams.role,null,2);const e=this.getEquipParamKey(this.equipForm.equip_type);this.equipParamsJson=JSON.stringify(this.defaultParams[e],null,2),this.petParamsJson=JSON.stringify(this.defaultParams.pet,null,2)},onHeadlessToggle(e){e?this.$notify.info({title:"无头模式",message:"浏览器将在后台运行，不会显示界面"}):this.$notify.info({title:"有头模式",message:"浏览器将显示界面，可以看到操作过程"})},onTargetUrlChange(e){"custom"===e&&(this.playwrightForm.custom_url="")},onEquipTypeChange(){this.resetParam("equip")},getEquipParamKey(e){const t={normal:"equip_normal",lingshi:"equip_lingshi",pet:"equip_pet_equip"};return t[e]||"equip_normal"},getParamConfig(e){return this.paramManager[e]},validateParam(e){const t=this.getParamConfig(e);return!!t&&(this[t.errorKey]=this.validateJson(this[t.jsonKey],e),!this[t.errorKey])},resetParam(e){const t=this.getParamConfig(e);if(!t)return;const i=t.getParamType?t.getParamType():t.paramType;this[t.jsonKey]=JSON.stringify(this.defaultParams[i],null,2),this[t.errorKey]=""},async saveParam(e){const t=this.getParamConfig(e);if(!t)return!1;if(!this.validateParam(e))return this.$notify.error("请先修复JSON格式错误"),!1;this[t.savingKey]=!0;try{const e=JSON.parse(this[t.jsonKey]),i=t.getParamType?t.getParamType():t.paramType,s=await this.$api.system.updateSearchParam(i,e);if(200===s.code){const s=t.getSuccessMessage?t.getSuccessMessage():t.successMessage;return this.$notify.success(s),this.defaultParams[i]=e,!0}return this.$notify.error({title:"保存失败",message:s.message||"保存失败"}),!1}catch(i){return console.error(`保存${e}参数失败:`,i),this.$notify.error({title:"保存失败",message:"保存失败: "+i.message}),!1}finally{this[t.savingKey]=!1}},validateJson(e,t){try{if(!e.trim())return`${t}参数不能为空`;const i=JSON.parse(e);return"object"!==typeof i||null===i?"JSON必须是一个对象":""}catch(i){return`JSON格式错误: ${i.message}`}},async loadCachedParams(){try{await this.loadSearchParams(),this.$notify.success({title:"缓存参数",message:"缓存参数已刷新"})}catch(e){this.$notify.error({title:"获取失败",message:"获取缓存参数失败: "+e.message})}},async startSpiderByType(e){if(this.isRunning)return;const t=this.paramManager[e];if(t)if(this[t.errorKey])this.$notify.error("请先修复JSON格式错误");else try{const i=t.getParams(),s=await this.$api.spider[`start${t.spiderType.charAt(0).toUpperCase()+t.spiderType.slice(1)}`](i);200===s.code?(this.$notify.success({title:"爬虫启动",message:`${t.spiderName}已启动`}),this.activeTab=e,this.isRunning=!0):this.$notify.error({title:"启动失败",message:s.message||"启动失败"})}catch(i){this.$notify.error({title:"启动失败",message:"启动失败: "+i.message})}},async startPlaywrightCollector(){if(!this.isRunning)try{const e={headless:this.playwrightForm.headless};console.log("启动Playwright收集，参数:",e);const t=await this.$api.spider.startPlaywright(e);200===t.code?(this.$notify.success("Playwright收集已启动"),this.activeTab="playwright",this.isRunning=!0):this.$notify.error(t.message||"启动失败")}catch(e){this.$notify.error("启动失败: "+e.message)}},getEquipTypeName(e){const t={normal:"普通装备",lingshi:"灵饰装备",pet:"召唤兽装备"};return t[e]||"装备"},async checkTaskStatus(){try{const e=await this.$api.spider.getStatus();if(200===e.code){const t=e.data.status;this.isRunning="running"===t,"completed"!==t&&"error"!==t&&"stopped"!==t||("error"===t?this.$notify.error(e.data.message||"任务执行出错"):"stopped"===t&&this.$notify.info(e.data.message||"任务已停止"),this.isRunning=!1)}}catch(e){console.error("状态监控错误:",e)}},startStatusMonitor(){this.stopStatusMonitor(),this.statusMonitor=setInterval((async()=>{await this.checkTaskStatus()}),5e3)},stopStatusMonitor(){this.statusMonitor&&(clearInterval(this.statusMonitor),this.statusMonitor=null)}}},C=x,q=(0,y.A)(C,o,c,!1,null,"70ce5a37",null),T=q.exports,P={name:"HomeView",components:{AutoParams:T,LogMonitor:b},data(){return{isRunning:!1,cacheCleanupTimer:null}},mounted(){this.$nextTick((()=>{this.$store.dispatch("cookie/cleanExpiredCache"),this.cacheCleanupTimer=setInterval((()=>{this.$store.dispatch("cookie/cleanExpiredCache")}),6e4)}))},beforeDestroy(){this.cacheCleanupTimer&&clearInterval(this.cacheCleanupTimer)}},I=P,E=(0,y.A)(I,n,l,!1,null,"a333e914",null),O=E.exports;s["default"].use(r.Ay);const F=[{path:"/",name:"Home",component:O,meta:{showHeader:!0}},{path:"/auto-params",name:"AutoParams",component:T,meta:{title:""}},{path:"/roles/:type/:levelRange/:page?",name:"RoleList",component:()=>Promise.all([i.e(296),i.e(954),i.e(503)]).then(i.bind(i,386)),meta:{title:"角色列表",showHeader:!0}},{path:"/equipments",name:"EquipmentList",component:()=>Promise.all([i.e(296),i.e(152)]).then(i.bind(i,1889)),meta:{title:"装备列表",showHeader:!0}},{path:"/equipments/:equip_sn",name:"EquipmentDetail",component:()=>i.e(793).then(i.bind(i,3793)),meta:{title:"装备详情",showHeader:!0}},{path:"/pets",name:"PetList",component:()=>Promise.all([i.e(296),i.e(954),i.e(752)]).then(i.bind(i,4675)),meta:{title:"召唤兽列表",showHeader:!0}},{path:"/equipment-desc-creator",name:"EquipmentDescCreator",component:()=>Promise.all([i.e(296),i.e(77)]).then(i.bind(i,5123)),meta:{title:"装备模拟",showHeader:!0}},{path:"/market-data-status",name:"MarketDataStatus",component:()=>i.e(266).then(i.bind(i,3266)),meta:{title:"市场数据状态",showHeader:!0}}],R=new r.Ay({base:"",routes:F});R.beforeEach(((e,t,i)=>{document.title=e.meta.title||"👁️梦幻灵瞳",i()}));var N=R,L=i(5129),j=i(9143),J=i.n(j),B=i(6695),D=i(4769);s["default"].config.productionTip=!1,s["default"].use(J(),{size:"mini"}),s["default"].use(D.A),s["default"].prototype.$api=B.Ay,new s["default"]({router:N,store:L.A,render:e=>e(a.A)}).$mount("#app")},7694:function(e,t,i){"use strict";i.d(t,{A:function(){return m}});var s=function(){var e=this,t=e._self._c;return e.equipment?t("el-popover",{staticStyle:{position:"relative",display:"block"},attrs:{"close-delay":0,"data-equip-sn":e.equipment.equip_sn,placement:e.placement,width:e.popoverWidth,trigger:"hover","visible-arrow":!1,"raw-content":"","popper-class":"equip-desc-popper"},scopedSlots:e._u([{key:"reference",fn:function(){return[t("div",{staticStyle:{position:"relative",overflow:"hidden"},style:e.imageStyle},[e.equipment?t("el-image",{staticStyle:{display:"block"},style:e.imageStyle,attrs:{src:e.getImageUrl(e.equipment.equip_face_img,e.size),fit:"cover",referrerpolicy:"no-referrer"}}):e._e(),e.isBinding?t("div",{staticClass:"icon-binding"},[e._v(" 专用 ")]):e._e(),e.rightLock.length>0?t("div",{staticStyle:{position:"absolute",width:"14px",right:"0px",top:"0px"}},e._l(e.rightLock,(function(e){return t("img",{key:e,staticStyle:{height:"14px",width:"14px",display:"block"},attrs:{src:i(1900)(`./time_lock_${e}.webp`)}})})),0):e._e(),e.leftLock.length>0?t("div",{staticStyle:{position:"absolute",width:"14px",left:"0px",top:"0px"}},e._l(e.leftLock,(function(e){return t("img",{key:e,staticStyle:{height:"14px",width:"14px",display:"block"},attrs:{src:i(1900)(`./time_lock_${e}.webp`)}})})),0):e._e()],1)]},proxy:!0}],null,!1,8755497),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?t("EquipmentDesc",{attrs:{equipment:e.equipment,"lock-type":e.lockType,image:e.image,isBinding:e.isBinding}}):e._e()],1):e._e()},a=[],r=(i(8111),i(2489),i(1658)),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"equip-desc-content"},[e.lockType.length>0?t("div",{staticStyle:{position:"absolute",width:"100px",right:"12px",top:"12px",display:"flex","justify-content":"flex-end"}},e._l(e.lockType,(function(e){return t("img",{key:e,staticStyle:{height:"14px",width:"14px",display:"block"},attrs:{src:i(1900)(`./time_lock_${e}.webp`)}})})),0):e._e(),t("el-row",{attrs:{type:"flex",justify:"space-between"}},[e.image?t("el-col",{staticStyle:{width:"120px","margin-right":"20px",position:"relative"}},[t("el-image",{staticStyle:{width:"120px",height:"120px"},attrs:{src:e.getImageUrl(e.equipment.equip_face_img,"big"),fit:"cover",referrerpolicy:"no-referrer"}}),e.isBinding?t("div",{staticClass:"icon-binding"},[e._v(" 专用 ")]):e._e()],1):e._e(),t("el-col",[e.equipment.equip_name?t("p",{staticClass:"equip_desc_yellow"},[e._v(e._s(e.equipment.equip_name))]):e._e(),t("p",{domProps:{innerHTML:e._s(e.parseEquipDesc(e.equipment.equip_type_desc?.replace(/#R/g,"<br />"),"#n"))}}),t("p",{domProps:{innerHTML:e._s(e.parseEquipDesc(e.equipment.large_equip_desc))}})])],1)],1)},l=[],o={name:"EquipmentDesc",mixins:[r.B],props:{equipment:{type:Object,required:!0},image:{type:Boolean,default:!0},lockType:{type:Array,default:()=>[]},isBinding:{type:Boolean,default:!1}},methods:{parseEquipDesc(e,t="#Y"){return e?"function"===typeof window.parse_style_info?window.parse_style_info(e,t):e:""}}},c=o,p=i(1656),_=(0,p.A)(c,n,l,!1,null,"90faa89e",null),d=_.exports,u={name:"EquipmentImage",mixins:[r.B],components:{EquipmentDesc:d},props:{image:{type:Boolean,default:!0},equipment:{type:[Object,void 0]},size:{type:String,default:"small"},width:{type:String,default:"50px"},height:{type:String,default:"50px"},cursor:{type:String,default:"pointer"},placement:{type:String,default:"right"},popoverWidth:{type:Number,default:405},lockType:{type:Array,default:()=>[]}},data(){return{visible:!1,features:{}}},computed:{isBinding(){const e=/玩家(\d+)专用/,t=this.equipment.large_equip_desc.match(e);return Boolean(t)},rightLock(){return this.lockType.filter((e=>9!==e&&"protect"!==e&&"huoyue"!==e))},leftLock(){return this.lockType.filter((e=>9===e||"protect"===e||"huoyue"===e))},imageStyle(){return{display:"block",width:this.width,height:this.height,cursor:this.cursor}}}},h=u,g=(0,p.A)(h,s,a,!1,null,"7be741b2",null),m=g.exports}},t={};function i(s){var a=t[s];if(void 0!==a)return a.exports;var r=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=e,function(){i.amdO={}}(),function(){var e=[];i.O=function(t,s,a,r){if(!s){var n=1/0;for(p=0;p<e.length;p++){s=e[p][0],a=e[p][1],r=e[p][2];for(var l=!0,o=0;o<s.length;o++)(!1&r||n>=r)&&Object.keys(i.O).every((function(e){return i.O[e](s[o])}))?s.splice(o--,1):(l=!1,r<n&&(n=r));if(l){e.splice(p--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var p=e.length;p>0&&e[p-1][2]>r;p--)e[p]=e[p-1];e[p]=[s,a,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(t,s){return i.f[s](e,t),t}),[]))}}(),function(){i.u=function(e){return"js/"+e+"."+{77:"acc8cab5",152:"f872cbbb",266:"2430a290",296:"c32d8263",503:"da01546e",752:"293a3a33",793:"cef3c76e",954:"242970c6"}[e]+".js"}}(),function(){i.miniCssF=function(e){return"css/"+e+"."+{77:"33689983",152:"fb7e4e71",266:"f8c6f416",503:"cc5c1e2b",752:"612843ea"}[e]+".css"}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="web:";i.l=function(s,a,r,n){if(e[s])e[s].push(a);else{var l,o;if(void 0!==r)for(var c=document.getElementsByTagName("script"),p=0;p<c.length;p++){var _=c[p];if(_.getAttribute("src")==s||_.getAttribute("data-webpack")==t+r){l=_;break}}l||(o=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.setAttribute("data-webpack",t+r),l.src=s),e[s]=[a];var d=function(t,i){l.onerror=l.onload=null,clearTimeout(u);var a=e[s];if(delete e[s],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((function(e){return e(i)})),t)return t(i)},u=setTimeout(d.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=d.bind(null,l.onerror),l.onload=d.bind(null,l.onload),o&&document.head.appendChild(l)}}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){i.j=884}(),function(){i.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,s,a,r){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",i.nc&&(n.nonce=i.nc);var l=function(i){if(n.onerror=n.onload=null,"load"===i.type)a();else{var s=i&&i.type,l=i&&i.target&&i.target.href||t,o=new Error("Loading CSS chunk "+e+" failed.\n("+s+": "+l+")");o.name="ChunkLoadError",o.code="CSS_CHUNK_LOAD_FAILED",o.type=s,o.request=l,n.parentNode&&n.parentNode.removeChild(n),r(o)}};return n.onerror=n.onload=l,n.href=t,s?s.parentNode.insertBefore(n,s.nextSibling):document.head.appendChild(n),n},t=function(e,t){for(var i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var a=i[s],r=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(r===e||r===t))return a}var n=document.getElementsByTagName("style");for(s=0;s<n.length;s++){a=n[s],r=a.getAttribute("data-href");if(r===e||r===t)return a}},s=function(s){return new Promise((function(a,r){var n=i.miniCssF(s),l=i.p+n;if(t(n,l))return a();e(s,l,null,a,r)}))},a={884:0};i.f.miniCss=function(e,t){var i={77:1,152:1,266:1,503:1,752:1};a[e]?t.push(a[e]):0!==a[e]&&i[e]&&t.push(a[e]=s(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}}(),function(){var e={884:0};i.f.j=function(t,s){var a=i.o(e,t)?e[t]:void 0;if(0!==a)if(a)s.push(a[2]);else{var r=new Promise((function(i,s){a=e[t]=[i,s]}));s.push(a[2]=r);var n=i.p+i.u(t),l=new Error,o=function(s){if(i.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",l.name="ChunkLoadError",l.type=r,l.request=n,a[1](l)}};i.l(n,o,"chunk-"+t,t)}},i.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,r,n=s[0],l=s[1],o=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);if(o)var p=o(i)}for(t&&t(s);c<n.length;c++)r=n[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(p)},s=self["webpackChunkweb"]=self["webpackChunkweb"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[504,996],(function(){return i(7592)}));s=i.O(s)})();
//# sourceMappingURL=admin.3018e08d.js.map