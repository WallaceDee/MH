

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<title>梦幻西游藏宝阁</title>


<script>
(function() {
  var proto = /^http:/.test(location.href) ? 'http:' : 'https:';
  if ('https://xyq.cbg.163.com'.indexOf(proto) < 0) { 
    var href = location.href;
    var url = href.replace(/^http:/, 'https:');
    if (proto == 'https:') {
      url = href.replace(/^https:/, 'http:');
    }
    window.location = url;
  }
})();
</script>

<script>
!function(E,N,c,s,e){window.STAT_START_DATETIME=new Date/1,window.PAGE_LOAD_ADDON=window.PAGE_LOAD_ADDON||{};var b=E.document,o=E.encodeURIComponent,O=E.setTimeout,_=E.performance,h=E.navigator,u;function S(e,r){return 0<=e.indexOf(r)}function w(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e}function A(e){var r=b.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return r?r.pop():""}function t(e,r,n){e.attachEvent?e.attachEvent("on"+r,n):e.addEventListener(r,n,!1)}function f(e,r){var n=[];if(r){for(var t in r)r.hasOwnProperty(t)&&n.push(t+"="+o(r[t]));e+=(S(e,"?")?"&":"?")+n.join("&")}return e}function y(){return _&&_.now?Math.round(_.now()):(new Date).getTime()}function x(e){if(!u){var r={},n=b.domain,t=n.split(".")[0];t=t.replace(/(-oppo)|(-huawei)|(-xiaomi)/,""),/^([^.]+)?\.cbg\.163\.com$/.test(n)&&!location.port||(t="dev"),u={product:r[t]||t,log:"js_error",client_type:s,useragent:h.userAgent,from:b.referrer,fingerprint:A("fingerprint"),urs:A("is_user_login")&&A("login_user_urs")};var o=A("last_login_roleid"),a=A("last_login_serverid");o&&(u.roleid=o,u.serverid=a)}for(var i in u.referer=location.href,u)i in e||(e[i]=u[i]);(new Image).src=f(c,e)}var D=y(),r,m="load",g="unload",T="beforeload",j=-1,L=null;!function(){var e=1,a=-1,i=-2,c=-3,s=D,r,p=!0;function n(e,r){var n=s,t=r,o=_&&_.timing;o&&o.navigationStart&&o.loadEventEnd&&(n=o.navigationStart,t=o.loadEventEnd),L(e,n,t)}function v(e,r,n){var t=n?1:a,o=r-e;return o<0?(t=i,o=0):18e5<o&&(t=c,o=0),{status:t,duration:o}}t(E,"beforeunload",function(){T=g,p&&(clearTimeout(r),n(!1,y()))}),t(E,"load",function(){var e=y();T!=g&&(T=m,j=e-D),p&&(r=O(function(){n(!0,e)},100))}),L=function(e,r,n,t){p=!1;var o=v(r,n,e),a=E.screen,i=[a.width+"x"+a.height];h.standalone&&i.push("standalone");var c=w({log:"page_load",status:o.status,time:o.duration,flow_group:A("_flow_group")||"",info:i.join("|")},t||{}),s=window.PAGE_LOAD_ADDON;s&&"object"==typeof s&&(c=w(c,s));var u=window.staticResIsCombine;u&&(c.is_combine_req=u),1!=o.status&&(c.time_start=r,c.time_end=n),(E.matchMedia&&E.matchMedia("(prefers-color-scheme: dark)").matches||S(h.userAgent,"dark_mode"))&&(c.is_dark_mode=1);var f=_&&_.memory;f&&(c.js_heap=f.totalJSHeapSize);try{var m=sessionStorage.getItem("_external_mark")}catch(d){}function g(e,r){var r=r||location.search,n=new RegExp("[?&]"+e+"=([^&]*)").exec(r);return n?decodeURIComponent(n[1]):""}(m=m||A("_external_mark"))&&(c.external_origin=m);var l=g("from_external_id");l&&(c.from_external_id=l),x(c),O(function(){},100)}}(),function(){var f=!1,n=!0,s=function(e,r){return Object.prototype.toString.call(e)==="[object "+(r||"Object")+"]"},r={},m=function(e){return!!r[e]||!(r[e]=!0)},t=function(e){try{if(e.stack){var r=e.stack.match("https?://[^)^\n]+"),n=(r=r?r[0]:"").match(":(\\d+):(\\d+)");n||(n=[0,0,0]);var t=u(e),o=r.replace(n[0],"");return e.fnName&&(o+=":"+e.fnName),{msg:e.message,info:t,rowNum:n[1],colNum:n[2],target:o}}return e.name&&e.message&&e.description?{target:e.fnName,msg:e.message,info:"name:"+e.name+",desc:"+e.description+",number:"+e.number}:e}catch(a){return{msg:"__parse_error__",info:(a.message||a.toString())+"-"+e.toString()}}},u=function(e){var r=e.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,""),n=e.toString();return S(r,n)||(r=n+"@"+r),r},a=function(e){p(t(e))},o=function(e){if(!e)return!0;if(!n){var r=e.msg;if(S(r,"ReferenceError")||S(r,"\u672a\u5b9a\u4e49"))return!0}return f||m(e.target+e.msg)},i=function(e){return"object"==typeof e&&(e.pagestatus=T,e.loadtime=j,e.duration=y()-D),x(e)},e=5,c=[],g,l=function(e,r){5<r?(c.push(e),g&&clearTimeout(g),g=O(function(){1==c.length?i(c[0]):i({msg:"ERR_MERGED",linenumber:c.length,info:window.JSON?(JSON.stringify||JSON.encode)(c).substr(0,1e3):c[0].msg,idx:r}),c=[]},1e3)):i(e)},d=0,p=function(e){if(!o(e)){var r={idx:++d};for(var n in e)if(Object.hasOwnProperty.call(e,n)){var t=e[n];"target"===n?r.filename=t:"rowNum"===n?r.linenumber=e.rowNum+":"+e.colNum:"colNum"===n||(r[n]=t)}l(r,d)}},v=E.onerror,_;if(E.onerror=function(e,r,n,t,o){var a=e;if(o&&o.stack&&(a=u(o)),s(a,"Event")){var i=a.type,c=a.target;a+=i?"--"+i+"--"+(c?c.tagName+"::"+c.src:""):""}p({msg:e,info:a,target:r,rowNum:n,colNum:t}),v&&v.apply(E,arguments)},E.addEventListener&&E.addEventListener("unhandledrejection",function(e){var r=e.reason;r instanceof window.Error?a(r):p({msg:(JSON.stringify||JSON.encode)(r),type:"promise"})}),E.addEventListener){var h=0;E.addEventListener("error",function(e,r){if(e.target){var n=["IMG","SCRIPT","LINK"],t=e.target,o=(t.tagName||"").toUpperCase(),r="LINK"==o?t.href:t.src;if(!m(r)&&S(n,o)&&!S(r,"/1.gif?")&&null===t.getAttribute("no-tracer")&&"prefetch"!==t.getAttribute("rel")){var a={msg:"LOAD_FAILED",filename:r,idx:++h};if("SCRIPT"==o&&(S(r,N)&&(f=!0),S(r,"http://"))){for(var i=b.getElementsByTagName("script"),c=[],s=0,u=i.length;s<u;s++)i[s]&&i[s].src&&c.push(i[s].getAttribute("src"));a.info=[t.outerHTML,i.length,c.join("|")].join()}l(a,h)}}},!0)}else n=!1;var w={watch:function(t,o){return function(){try{return t.apply(this,o||arguments)}catch(n){var e=/^function[^\(]*/.exec(t.toString());if(n.fnName=e&&e[0],a(n),!_){var r=E.onerror;E.onerror=function(){},_=O(function(){E.onerror=r,_=null},50)}throw n}}},reportError:a,send:p,logPageLoad:function(e,r,n){return L(!0,e,r,n)}};E.CBG_JS_REPORT=w}()}(window,"https://cbg-xyq.res.netease.com","//sigma-other-cbg.proxima.nie.netease.com/1.gif","web","");
</script><link href="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/css/global.css" rel="stylesheet" type="text/css" media="all" />
<link href="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/css/pages.css" rel="stylesheet" type="text/css" media="all" />
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/mootools-core-1.3.2.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/mootools-jsonp.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/cbg_com.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/autocomplete.js?v=20140520"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/util.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/js/server_list_data.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/js/test_server_list.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/drop_select_server.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/parse_role.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/recommd.js"></script>
<script type="text/javascript">
var CBG_PAGE_ID = 'overall_search';
var CgiRootUrl = 'https://xyq.cbg.163.com/cgi-bin';
var HttpsCgiRootUrl = 'https://xyq.cbg.163.com/cgi-bin';
var CgiRoot = '/cgi-bin';
var ResUrl = 'https://cbg-xyq.res.netease.com';
var ResUrlVer = 'https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084';
var LoginInfo = {"area_id": 43, "uid": 1635401, "server_name": "\u8fdb\u8d24\u95e8", "server_type": 3, "roleid": "23387570", "area_name": "\u5e7f\u4e1c2\u533a", "block_urs": "ch****01@163.com", "user_icon": "2", "user_msg_num": 5, "safe_code": "K62bhRpA", "user_level": "0", "user_roles": {"23387570": {"color": "0", "roleid": "23387570", "racename": "\u4eba", "grade": 0, "race": "1", "nickname": "\u2606\u67cf\u03bc\u7eac\u704f3", "icon": 2}, "23157594": {"color": "0", "roleid": "23157594", "racename": "\u4eba", "grade": 35, "race": "1", "nickname": "\u70ed\u8840\u9752\u5e74_\u8f89", "icon": 1}, "23388090": {"color": "0", "roleid": "23388090", "racename": "\u4eba", "grade": 0, "race": "1", "nickname": "\u2103\u6556\u56db\u7ea2\u22483", "icon": 2}, "23387585": {"color": "0", "roleid": "23387585", "racename": "\u4eba", "grade": 0, "race": "1", "nickname": "\u2161\u5546\u3013\u59543", "icon": 2}, "23388209": {"color": "0", "roleid": "23388209", "racename": "\u4eba", "grade": 0, "race": "1", "nickname": "\u01da\u961a\u51b0\u5f64\u222b3", "icon": 2}, "23157818": {"color": "0", "roleid": "23157818", "racename": "\u4eba", "grade": 50, "race": "1", "nickname": "\u5e9f\u9752\u534e", "icon": 2}}, "is_server_open_wallet": true, "urs": "chenguohuacgh001@163.com", "login": true, "nickname": "\u2606\u67cf\u03bc\u7eac\u704f3", "serverid": 77, "serversn": 420, "pass_mb_check": 1};

// 是否是无角色登录
var isFakeRole = false;
if(LoginInfo && LoginInfo.hasOwnProperty('user_roles')) {
	var roleid = LoginInfo.roleid;
	if(LoginInfo.user_roles.hasOwnProperty(roleid) && LoginInfo.user_roles[roleid].is_fake_role) {
		isFakeRole = true;
	}
};

var HomePage = 'https://xyq.cbg.163.com';
var WalletData = window.safe_json_decode && safe_json_decode('{"is_locked": false, "checking_balance": 0, "balance": 0, "is_pay_freeze": "0", "free_balance": 0}');
var ServerTime = '2025-06-21 01:01:32';
var Recommd = {
	url: "/cgi-bin/recommend.py"
};
var Tracker = {
	url: "https://sigma-other-cbg.proxima.nie.netease.com"
};
var SafeCode = "K62bhRpA";
var IsLogin = 1;
var ServerInfo = {
    "area_id" : LoginInfo.area_id,
    "area_name" : LoginInfo.area_name,
    "server_id" : LoginInfo.serverid,
    "server_sn" : LoginInfo.serversn,
    "server_name" : LoginInfo.server_name
};
var equip_refer_loc_origin = decodeURIComponent("overall_search");
var equip_refer_loc = equip_refer_loc_origin;  // equip_refer_loc 可能会被热门搜索改写
var page_type = "overall_search";  

if (window.self != window.top){
	location.href = "about:blank";
};
window.addEvent("domready", function(){
	var $roleAvatar = $('js_role_avatar');
	if(isFakeRole && $roleAvatar) {
		var fakeRoleAvatar = "https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/images/smallface/fake-role.gif";
		$roleAvatar.set('src', fakeRoleAvatar);
	}
	if (IsLogin && window.CBG) {
		CBG.checkUserIsAdult();
		CBG.getUserShareId();
	}
});
</script>

</head>

<body class="overallSearch" >
<script>
if (window.Browser && Browser.ie) {
  Asset.css('https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/css/ie-update-tips.css');
  Asset.javascript('https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/ie-update-tips.js');
}
</script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/right_float_menu.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/sprite.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/js/sprite-hotq.js?rcc10a11c2d3fb39c7e084"></script>


<div id="recent_list_templ">
<!--
<% for(var i=0; i<this.equip_list.length; i++){ %>
	<% 
		var equip = this.equip_list[i];
		var icon_url = equip["icon_url"];
		var equip_url = HomePage + "/equip?s=" + equip.serverid + "&eid=" + equip.eid + "&view_loc=recent_view&_web_log=1";
		if (equip["is_overall_search"]){
			equip_url += "&o";
		}
		if (window.from_shareid) {
			equip_url += "&from_shareid=" + from_shareid;
		}

	%>
	<li>
		<a href="<%= equip_url %>" target="_blank"><img src="<%= icon_url %>" width="50" height="50" /></a>
		<h3><a href="<%= equip_url %>" target="_blank"><%= equip["equip_name"]%></a></h3>
		<p class="cBlue"><%= get_color_price(parseFloat(equip["price"])) %></p>
	</li>
<% } %>
-->
</div>
<div id="recent_empty_templ">
<!--
	<li>没有记录</li>
-->
</div>
<div id="recent_load_templ">
<!--
	<p style="padding:20px;"><img src="<%= ResUrl %>/images/loading.gif" /></p>
-->
</div>
<script type="text/javascript">
	var sprite_url = 'http://cbg.163.com/sprite.html';
	var server_name = Cookie.read('cur_servername') || '';
	var roleid = Cookie.read('login_user_roleid') || '';
	roleid = (roleid == null) ? '' : roleid;
	var level = Cookie.read('login_user_level');
	level = (level == null) ? '' : level;
	sprite_url += '?server_name='+encodeURIComponent(server_name)+'&roleid='+roleid+'&level='+level;
  
  if (window.page_type && window.page_type == 'overall_search') {
    window.addEvent('domready',function() {
      var timer = null;
      var $toTopBtn = $('to_top_btn');
      var supportPageOffset = window.pageXOffset !== undefined;
      var isCSS1Compat = ((document.compatMode || "") === "CSS1Compat");
      window.addEvent('scroll',function() {
        timer && clearTimeout(timer);
        timer = setTimeout(function() {
          var scrollY = supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop;
          if(scrollY > 350) {
            $toTopBtn.setStyle('display','');
          } else {
            $toTopBtn.setStyle('display','none');
          }
        },200);
      });
    });
  }
</script>
<script>
	function setSideBarWidth() {
		var page_width = document.documentElement.offsetWidth;
		if(!document.getElementsByClassName('areaTop')[0]){
			return;
		}
		var content_width = document.getElementsByClassName('areaTop')[0].offsetWidth;
		$('right_float_pannel').style.left = page_width / 2 + content_width / 2 + 3 + 'px';
		$('right_float_pannel').style.visibility = '';
	}
	window.addEvent('domready', function(){
		setSideBarWidth()
	})
	window.addEvent('resize', function(event) {
		setSideBarWidth()
	});
</script>
<div class="right_float_pannel" id="right_float_pannel" style="visibility: hidden">
	<ul class="right_float_menu">
		<li id="ecard_center"><a class="ecard_center" href="javascript:;">充值中心</a></li>
		<li id="evaluate_price"><a id="evaluate_link" class="evaluate" href="javascript:;">估价鉴宝</a></li>
		<li id="trade_history" style="margin-bottom: 16px;"><a id="history_link" class="history" href="javascript:;">历史成交</a></li>
		<li id="sprite_btn"><a id="sprite_link" class="sprite" href="javascript:;" tid="web_other_2_3">在线精灵</a></li>
		<li style="display:none;"><a id="goto_online_customer_service" class="customer_service" href="javascript:;" data-href="<!--customer_service_url-->" tid="web_other_2_6">在线客服</a></li>
		<li id="latest_view_btn"><a class="latest_view" href='#' onclick="return false;" tid="web_other_2_2">最近浏览</a></li>
		<li><a class="feedback" href="https://xyq.cbg.163.com/cgi-bin/suggest.py" target="_blank" tid="web_other_2_4">意见反馈</a></li>
		<li class="download_app_wrap" id="download_app_wrap">
			<a class="download_app" id="right_float_download_app" href="javascript:void(0);" >扫码下载</a>
			<div class="qrcode-list" id="qrcode_list">
				<p class="qrcode-item">
					<img src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/images/qrcode_weChat_public.png" alt="">
					藏宝阁微信公众号
				</p>
				<p class="qrcode-item">
					<a href="https://cbg.163.com/app/xyq/?from=cbgsidebar&cps=other3" target="_blank">
						<img src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/images/qrcode_download_other3.png" alt="">
					</a>
					手机藏宝阁
				</p>
				<p class="qrcode-item " id="qr_close_item">
					<img src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/images/qrcode_weixin_work.png" alt="梦幻西游电脑版公众号">
					添加企微领取成就点
					<img src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/images/qrcode_close.png" class="qr_close " id="qr_close">
				</p>
			</div>
		</li>
		<li id="to_top_btn" style="display: none;">
			<a href="#" class="to-top" tid="web_other_2_7" >返回顶部</a>
		</li>
	</ul>
	<ul class="h5FuncionPage" id="ecard_center_panel" style="display: none;">
		<div class="h5FuncionPage_header">充值中心</div>
		<iframe id="ecard_center_iframe" frameborder="0" style="width:100%;height:700px"></iframe>
	</ul>
	<ul class="h5FuncionPage" id="evaluate_page_panel" style="display: none;">
		<div class="h5FuncionPage_header">估价鉴宝</div>
		<iframe id="evaluatePage_iframe" frameborder="0" style="width:100%;height:700px"></iframe>
	</ul>
	<ul class="tradeHistoryPage" id="trade_history_page_panel" style="display: none;">
		<div class="tradeHistoryPage_header">成交历史查询</div>
		<iframe id="tradeHistoryPage_iframe" frameborder="0" style="width:100%;height:700px;"></iframe>
	</ul>
	<ul class="recentList" id="recent_list_panel" style="display: none;"></ul>
<!-- 新精灵问答 -->
<div id="spriteQA">
  <a href="javascript:;" class="qa-close" hidefocus="true">&times;</a>
  <!-- tab切换 -->
  <div class="qa-tabs">
    <a href="javascript:;" class="tab on" hidefocus="true">热门问题</a>
    <a href="javascript:;" class="tab" hidefocus="true">精灵问答</a>
  </div><!-- ./qa-tabs -->
  
  <div class="qa-main js-content">   
    <!-- 热门问题 -->
    <div class="hot-questions">
      
    </div><!-- ./hot-questions -->
    <div class="hide" id="sprite-hot-question-template">
      <!--
      <% if (!this.banner.src && this.list.length <= 0) { %>
        <div style="padding: 5px;">出现了点小问题，在正努力修复中</div>
      <% } else { %>
      
        <% var banner = this.banner; %>
        <% if (banner && banner.src) { %>
          <% var imageText = "<img src=\""+ banner.src +"\" class=\"banner-image\" />"; %>
          <% 
            if (banner.text) {
              imageText = "<a class=\"banner\" href=\"javascript:ask(&quot;"+ banner.text + "&quot;)\">" + imageText + "</a>";
            } else if (banner.href) {
              imageText = "<a class=\"banner\" href=\""+ banner.href + "\" target=\"_blank\">" + imageText + "</a>";
            } else {
              imageText = "<span class=\"banner\">" + imageText + "</span>";
            }
          %>
          <%= imageText %>
        <% } %>
        <% if (this.list) { %>
        <div class="hot-content" style="padding: 10px 0;">
          <% for (var i = 0, max = this.list.length; i < max; i++) { %>
            <% var group = this.list[i]; %>
            <dl class="quikList">
              <dt><%= group.title %></dt>
              <dd class="clearfix">
                <% var questions = group.questions; %>
                <% for (var j = 0, jmax = questions.length; j < jmax; j++) { %>
                  <%
                    var text = questions[j];
                    if (text.length > 10) { 
                      text = text.substring(0, 10) + "..." 
                    }
                  %>
                  <a href="javascript:;"><%= text %></a>
                <% } %>
              </dd>
            </dl>
          <% } %>
        </div>
        <% } %>
        
      <% } %>
      -->
    </div>
  </div>
  
  <div class="qa-main js-content" style="display: none;">
    <!-- 精灵问答 -->
    <div class="qa-sprite">
      <div class="content"></div>
      
      <div class="spritemm" id="evaluate_panel" style="display: none;">
        <div id="ask_eval_mm" class="js_init">
          <p>小精灵的回答是否解决了您的问题：</p>
          <a href="javascript:;" class="qa-btn js_resolve">解决</a><a href="javascript:;" class="qa-btn js_reject">未解决</a>
        </div>
        <div id="eval_good_mm" class="js_good" style="display: none; text-align: left; padding-top: 2px;line-height: 20px;">
          更多问题<a href="https://cbg.163.com/app/xyq/?from=spirit" target="_blank">下载app</a>进行查询，更有人工客服精准解答
        </div>
        <div id="eval_bad_mm" class="js_bad" style="display: none; line-height: 1.5; padding-top: 13px;">
          <a href="https://cbg.163.com/app/xyq/?from=spirit" target="_blank">下载app</a>使用人工客服解答您的疑问
        </div>
      </div>
    </div><!-- ./qa-sprite -->
  </div>
  
  <div class="qa-question">
    <input id="type_box" type="text" class="input default" value="请输入你想查询的问题" />
    <a href="javascript:ask();" class="askBtn" hidefocus="true">提交</a>
  </div>
</div>
<!-- end 新精灵问答 -->
</div>

<div class="newsTip hasLayout" id="newsTip" style="display:none;z-index:15px;">
	<p id="new_function_desc">&nbsp;<br/>&nbsp;<br/>&nbsp;</p>
	<a id="new_function_link" href="#" class="btn1" target="_blank">点击了解&raquo;</a>
	<a href="javascript:close_new_function_pop(0)" class="close">关闭</a>
</div>

<script type="text/javascript">
	window.addEvent('domready', function(){
		init_right_float_download_qrcode();
		init_xyq_qrcode_close();

		if(new_function_desc.trim() == '')
			return;
		var tt;
		if(Browser.ie6){
			window.addEvent("scroll", function(){
				if(tt){clearTimeout(tt);}
				tt = setTimeout(function(){
					$('newsTip').setStyle("top", (window.getScroll().y+window.getSize().y - 150) + "px");
				}, 100);
			});
		}
		if(!Cookie.read('new_function_pop')){
			$('newsTip').setStyle('display', 'block');
		}
		$('new_function_desc').set('html', new_function_desc);
		$('new_function_link').addEvent('click', function(){
			Cookie.write('new_function_pop', 1, {'duration':5});
			window.open(new_function_url);
			$('newsTip').setStyle('display', 'none');
			return false;
		});
	});
	function close_new_function_pop(){
		Cookie.write('new_function_pop', 1, {'duration':2});
		$('newsTip').setStyle('display', 'none');
	}
</script>

<div class="blank"><!-- ie 7 --></div>
<div class="areaTop"></div>
<div id="login_info_template" style="display:none;">
<!--
	<% if (this.LoginInfo.login) { 
		var info = this.LoginInfo;
	%>
	<div class="userInfo cWhite aWhite">
		<p>
			<%= info.area_name %> -&gt; <%= info.server_name %><span class="separator"></span>
			<span style="display: none;" class="walletTips" id="js_fake_role_login_tips"></span>	
			<span class="cYellow"><%= info.nickname %></span>
			<a style="display: none;" class="js_global_normal_role" href="https://xyq.cbg.163.com/cgi-bin/login.py?act=show_role_select_page&select_roleid=<%= info.roleid %>">[切换角色]</a>
		</p>
		<p>
			<a href="https://xyq.cbg.163.com/cgi-bin/userinfo.py?act=cbg_wallet"><span class="title">钱包余额：</span><span class="balance" id="wallet_balance">&nbsp;元</span></a><span class="walletTips js-popoverHook" data-popover-class="tipsBlack popArrowUp"></span><span class="separator"></span><a id="btn_get_money" href="javascript:;" tid="web_other_1_9">提现</a><span class="separator"></span>
			<a id="buy_card_a" tid="web_other_1_3" href="javascript:;" style="display: none;">充值中心</a>
		</p>
		<img class="avatar" id="js_role_avatar" src="https://cbg-xyq.res.netease.com/images/role_icon/small/<%= info.user_icon %>.gif" alt="头像" />
	</div>
	<p class="navLinks aWhite">
		<a href="https://xyq.cbg.163.com/cgi-bin/message.py?act=msg_route" id="user_msg_num_panel"><%= gen_msg_num_html(info.user_msg_num) %></a><span class="separator"></span><a href="https://cbg-xyq.res.netease.com/help/index.html" target="_blank">帮助</a><span class="separator"></span><a href="//xyq.gm.163.com/" target="_blank">客服</a><span class="separator"></span><a id="logout_link" href="javascript:logout('https://xyq.cbg.163.com/cgi-bin/logout.py?act=logout')" class="white_a">退出</a><span class="separator"></span>
		<a href="https://cbg.163.com/app/xyq/?from=cbgtoplink&cps=other1" class="mobileLink" target="_blank" tid="web_other_1_1">
			藏宝阁APP 
			<span class="qrcode-item">
				<img src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/images/qrcode_download_other1.png" alt="" />
				手机藏宝阁
			</span>
		</a>
	</p>
	<% } %>
-->
</div>
<div class="header area hasLayout clearfix">
	<h1 class="logo"><a href="https://xyq.cbg.163.com" title="梦幻西游藏宝阁首页">梦幻西游藏宝阁</a></h1>
	<div id="login_info_panel" class="headerInfo">
		<div class="userInfo cWhite">
			<p>您好，<span class="cYellow">梦幻玩家</span></p>
			<img class="avatar" src="https://cbg-xyq.res.netease.com/images/no_login_user.gif" width="44" height="44" alt="头像" />
		</div>
		<p class="navLinks aWhite">
			<a href="https://xyq.cbg.163.com">首页</a><span class="separator"></span><a target="_blank" href="https://cbg-xyq.res.netease.com/help/index.html">帮助</a><span class="separator"></span><a target="_blank" href="//xyq.gm.163.com/">客服</a><span class="separator"></span>
			<a href="https://cbg.163.com/app/xyq/?from=cbgtoplink&cps=other1" class="mobileLink" target="_blank" tid="web_other_1_1">
				藏宝阁APP
				<span class="qrcode-item">
					<img src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/images/qrcode_download_other1.png" alt="" />
					手机藏宝阁
				</span>
			</a>
		</p>
	</div>
</div>
<div class="areaBtm"></div>
<!-- 浮动层开始，请作为body的顶级子集 -->
<div class="soldDetail" id="TipsBox"></div>

<div id="common_tips_template">
<!--
  <div class="time-key-wap-inline">
    <img class="bigPic" width="120" height="120" alt="大图" src="<%= this.icon_url %>" />
    <% if (this.is_time_lock) { %>
      <span class="icon-time-key big-time-key"></span>
    <% } %>
  </div>
	<div class="parame" style="font-size:14px;">
		<p class="cYellow"><%= this.name %></p>
		<p><%= this.type_desc %></p>
		<p><%= this.desc %></p>
	</div>
  <% if (this.is_time_lock) { %>
    <p class="tips-time-lock-tips">请注意，购买该物品将带有<%= this.time_lock_days || "90" %>天转服时间锁</p>
	<% } %>
-->
</div>

<div id="role_tips_template">
<!--
	<%
		var role = this.role;
	%>
	
	<div class="col1">
		<div class="thum">
			<span class="time-key-wap">
				<img src="<%= role.icon %>" width="120" height="150" alt="大图" />
				<% if (this.role.is_time_lock) { %>
				<span class="icon-time-key big-time-key"></span>
				<% } %>
			</span>
		</div>
		<div class="info">
			<table width="96%" class="tb02" cellspacing="0" cellpadding="0">
				<tr>
					<th>昵称：</th>
					<td><%= htmlEncode(role.nickname) %></td>
					<th>门贡：</th>
					<td><%= role.school_offer %></td>
				</tr>
				<tr>
					<th>ID：</th>
					<td><%= role.roleid %></td>
					<th>帮贡：</th>
					<td><%= role.org_offer %></td>
				</tr>
				<tr>
					<th>门派：</th>
					<td><%=get_school_name(role.school) %></td>
					<th>等级：</th>
					<td><%= role.level %></td>
				</tr>
				<tr>
					<th>类型：</th>
					<td><%= get_role_kind_name(role.race) %></td>
					<th>善恶：</th>
					<td><%= role.badness %></td>
				</tr>
				<tr>
					<th>仙玉：</th>
					<td colspan=3><%= role.xian_yu %></td>
				</tr>

				<tr>
					<th>金钱：</th>
					<td colspan=3><%= role.cash %></td>					
				</tr>
				
				<tr>
					<th>经验：</th>
					<td colspan=3><%= role.upexp %></td>
				</tr>
			</table>
		</div>
		<div class="blank24 hasLayout"></div>
		<table width="100%" class="tb02" cellspacing="0" cellpadding="0">
			<tr>
				<td>
          <span class="th">冥想：</span><%= role.skill_ming_xiang %>
        </td>
				<td>
          <span class="th">裁缝：</span><%= role.skill_caifeng %>
        </td>
				<td>
          <span class="th">中药：</span><%= role.skill_zhongyao %>
        </td>
      </tr>
      <tr>
        <td>
          <span class="th">打造：</span><%= role.skill_dazao %>
        </td>
        <td>
          <span class="th">灵石：</span><%= role.skill_lingshi %>
        </td>
        <td>
          <span class="th">熔炼：</span><%= role.skill_ronglian %>
        </td>
      </tr>
      <tr>
        <td>
          <span class="th">强身：</span><%= role.skill_qiang_shen %>
        </td>
        <td>
          <span class="th">追捕：</span><%= role.skill_zhuibu %>
        </td>
        <td>
          <span class="th">健身：</span><%= role.skill_jianshen %>
        </td>
      </tr>
      <tr>
        <td>
          <span class="th">烹饪：</span><%= role.skill_pengren %>
        </td>
        <td>
          <span class="th">暗器：</span><%= role.skill_anqi %>
        </td>
        <td>
          <span class="th">巧匠：</span><%= role.skill_qiaojiang %>
        </td>
      </tr>
      <tr>
        <td>
          <span class="th">养生：</span><%= role.skill_yangsheng %>
        </td>
        <td>
          <span class="th">逃离：</span><%= role.skill_taoli %>
        </td>
        <td>
          <span class="th">炼金：</span><%= role.skill_lianjin %>
        </td>
			</tr>
      <tr>
        <td>
          <span class="th">强壮：</span><%= role.skill_qiang_zhuang %>
        </td>
        <td>
          <span class="th">神速：</span><%= role.skill_shensu %>
        </td>
        <td>
          <span class="th">淬灵：</span><%= role.skill_cuiling %>
        </td>
			</tr>
      <tr>
        <td>
          <span class="th">风感：</span><%= role.skill_wind_sense %>
        </td>
        <td>
          <span class="th">雨感：</span><%= role.skill_rain_sense %>
        </td>
        <td>
          <span class="th">雪感：</span><%= role.skill_snow_sense %>
        </td>
			</tr>
		</table>
		<% if (this.role.is_time_lock) { %>
		<p class="tips-time-key-tips">请注意，购买该角色后将带有<%= this.role.time_lock_days || "150" %>天转服时间锁</p>
		<% } %>
	</div>
	
	<% var school = this.school_skill; %>
	
	<div class="col2">
    <% if (this.role_xiulian || this.pet_ctrl_skill) { %>
    <div class="xiulian">
      <table class="tb02" width="50%" cellspacing="0" cellpadding="0" style="float:left">
        <% var role_xiu_lian = this.role_xiulian; %>
        <% for (var i=0; i < role_xiu_lian.length; i++){ %>
            <% var item = role_xiu_lian[i]; %>
            <tr>
              <th width="70px"><%= item.name %>：</th>
              <td><%= item.info %></td>
            </tr>
        <% } %>	
      </table>

      <table class="tb02" width="50%" cellspacing="0" cellpadding="0" style="float:left;">
        <% if(this.yu_shou_shu != undefined){ %>
        <tr>
          <th width="80px">育兽术：</th>
          <td><%= this.yu_shou_shu %></td>
        </tr>
        <% } %>
        <% var pet_ctrl_xiu_lian = this.pet_ctrl_skill; %>
        <% for (var i=0; i < pet_ctrl_xiu_lian.length; i++){ %>
            <% var item = pet_ctrl_xiu_lian[i]; %>
            <tr>
              <th width="80px"><%= item.name %>：</th>
              <td><%= item.grade %></td>
            </tr>
        <% } %>
      </table>
      <div class="clear"></div>
    </div>
    <% } %>
    
		<div class="skill">
			<ul>
				<li style="left:80px; top:15px;">
					<img src="<%= school.school_skill2_icon %>">
					<p><%= school.school_skill2_grade %></p>
					<h5><%= school.school_skill2_name %></h5>
				</li>
				<li style="left:20px; top:65px;">
					<img src="<%= school.school_skill3_icon %>">
					<p><%= school.school_skill3_grade %></p>
					<h5><%= school.school_skill3_name %></h5>
				</li>
				<li style="left:140px; top:65px;">
					<img src="<%= school.school_skill4_icon %>">
					<p><%= school.school_skill4_grade %></p>
					<h5><%= school.school_skill4_name %></h5>
				</li>
				<li style="left:20px; top:155px;">
					<img src="<%= school.school_skill5_icon %>">
					<p><%= school.school_skill5_grade %></p>
					<h5><%= school.school_skill5_name %></h5>
				</li>
				<li style="left:140px; top:155px;">
					<img src="<%= school.school_skill6_icon %>">
					<p><%= school.school_skill6_grade %></p>
					<h5><%= school.school_skill6_name %></h5>
				</li>
				<li style="left:80px; top:109px;">
					<img src="<%= school.school_skill1_icon %>">
					<p><%= school.school_skill1_grade %></p>
					<h5><%= school.school_skill1_name %></h5>
				</li>
				<li style="left:80px; top:210px;">
					<img src="<%= school.school_skill7_icon %>">
					<p><%= school.school_skill7_grade %></p>
					<h5><%= school.school_skill7_name %></h5>
				</li>
			</ul>
		</div>

	</div>
--></div>

<div id="role_tips_old_template">
  <!--
    <img class="bigPic" width="120" height="150" alt="大图" src="<%= this.icon_url %>" />
    <div class="parame" style="font-size:14px;">
      <p class="cYellow"><%= this.name %></p>
      <p><%= this.type_desc %></p>
      <p><%= this.desc %></p>
    </div>
  -->
</div>

<script id="pet_tips_template" type="text/html">
	<%
    var pet = this.pet_attrs;
    var enhance_info = this.enhance_info || {};
    var isShowNewLingli = pet.iMagDam != void 0 && pet.iMagDef != void 0;
    var evol_skill_list	= pet.evol_skill_list;
    var num_per_line = 4; 
    var skill_num    = pet.all_skills.length;
    var loop_times   = parseInt(skill_num/num_per_line) + (skill_num % num_per_line?1:0); 
    loop_times = loop_times < 3 ? 3:loop_times;
    if (pet["genius"]){
        if (skill_num == (num_per_line * loop_times)){
          loop_times = loop_times + 1;
        }
    }
	%>
  <div class="solidPetTip">
    <div class="col1">
      <div class="thum">
        <div class="time-key-wap">
          <img src="<%= this.icon_src %>" width="120" height="120" alt="大图" />
          <% if (enhance_info.time_lock) { %>
            <span class="icon-time-key big-time-key"></span>
           <% } %>
        </div>
        <p class="f14px cWhite">名字：<span class="cYellow"><%= pet.pet_name %></span> 等级：<%= pet.pet_grade %></p>
      </div>
      <table width="100%" class="p_table tb02" cellspacing="0" cellpadding="0">
        <tr>
          <th width="28%">气　　血：</th>
          <td width="26%"><%= pet.blood %>/<%= pet.max_blood %></td>
          <th width="26%">体　　质：</th>
          <td width="20%">
            <%= pet.soma %>
            <% if (pet.ti_zhi_add) { %>
              <span class="color-pink">+<%= pet.ti_zhi_add %></span>
            <% } %>
          </td>
        </tr>
        <tr>
        <th>魔　　法：</th>
        <td><%= pet.magic %>/<%= pet.max_magic %></td>
        <th>法　　力：</th>
        <td>
          <%= pet.magic_powner %>
          <% if (pet.fa_li_add) { %>
            <span class="color-pink">+<%= pet.fa_li_add %></span>
          <% } %>
        </td>
        </tr>
        <tr>
        <th>攻　　击：</th>
        <td><%= pet.attack %></td>
        <th>力　　量：</th>
        <td>
          <%= pet.strength %>
          <% if (pet.li_liang_add) { %>
            <span class="color-pink">+<%= pet.li_liang_add %></span>
          <% } %>
        </td>
        </tr>
        <tr>
        <th>防　　御：</th>
        <td><%= pet.defence %></td>
        <th>耐　　力：</th>
        <td>
          <%= pet.endurance %>
          <% if (pet.nai_li_add) { %>
            <span class="color-pink">+<%= pet.nai_li_add %></span>
          <% } %>
        </td>
        </tr>
        <tr>
        <th>速　　度：</th>
        <td><%= pet.speed %></td>
        <th>敏　　捷：</th>
        <td>
          <%= pet.smartness %>
          <% if (pet.min_jie_add) { %>
            <span class="color-pink">+<%= pet.min_jie_add %></span>
          <% } %>
        </td>
        </tr>
        <tr>
          <% if(isShowNewLingli) { %>
            <th>法　　伤：</th>
            <td><%= pet.iMagDam %></td>
          <% } else { %>  
            <th>灵　　力：</th>
            <td><%= pet.wakan %></td>
          <% } %>
          <th>潜　　能：</th>
          <td><%= pet.potential %></td>
        </tr>
        <% if(isShowNewLingli) { %>
          <tr>
            <th>法　　防：</th>
            <td><%= pet.iMagDef %></td>
          </tr>
        <% } %>  
      </table>
      <div class="blank12"></div>
      <table width="100%" class="p_table tb02 petZiZhiTb" cellpadding="0" cellspacing="0">
        <tr>
          <th width="28%">攻击资质：</th>
          <td width="26%">
            <%= pet.attack_aptitude %>
            <% if (pet.attack_ext) { %> <span class="added_attr">+<%= pet.attack_ext %></span> <% } %>
          </td>
          <th width="26%">寿　　命：</th>
          <td width="20%"><%= pet.lifetime %></td>
        </tr>
        <tr>
          <th>防御资质：</th>
          <td>
            <%= pet.defence_aptitude %>
            <% if (pet.defence_ext) { %> <span class="added_attr">+<%= pet.defence_ext %></span> <% } %>
          </td>
          <th>成　　长：</th>
          <td><%= pet.growth %></td>
          
        </tr>
        <tr>
          <th>体力资质：</th>
          <td>
            <%= pet.physical_aptitude %>
            <% if (pet.physical_ext) { %> <span class="added_attr">+<%= pet.physical_ext %></span> <% } %>
          </td>
          <th>五　　行：</th>
          <td><%= PET_WUXING_INFO[pet.five_aptitude+""] %></td>
        </tr>
        <tr>
          <th>法力资质：</th>
          <td>
            <%= pet.magic_aptitude %>
            <% if (pet.magic_ext) { %> <span class="added_attr">+<%= pet.magic_ext %></span> <% } %>
          </td>
          <% if (pet.color) { %>
            <th>变异类型：</th>
            <td colspan="3">
              <%= pet.color %>
            </td>
          <% } else { %>
            <th <%= enhance_info.is_baobao ? "class='enhance'" : "" %>>是否宝宝：</th>
            <td <%= enhance_info.is_baobao ? "class='enhance'" : "" %> colspan="3">
<% if (pet.is_baobao == "否"){ %>
	<% var color = "#FF0000"; %>
<% } else { %>
	<% var color = "#00FF00"; %>				
<% } %>			
<span style="color:<%= color %>"> <%= pet.is_baobao %> </span>            </td>
          <% } %>
        </tr>
        <tr>
          <th>速度资质：</th>
          <td>
            <%= pet.speed_aptitude %>
            <% if (pet.speed_ext) { %> <span class="added_attr">+<%= pet.speed_ext %></span> <% } %>
          </td>
          <th class="nowrap">历史灵性值：</th>
          <td>
            <%= pet.lx %>
          </td>
        </tr>
        <tr>
          <th>躲闪资质：</th>
          <td colspan="3">
            <%= pet.avoid_aptitude %>
            <% if (pet.avoid_ext) { %> <span class="added_attr">+<%= pet.avoid_ext %></span> <% } %>
          </td>
        </tr>
        <% if(!isShowNewLingli) { %>
        <tr>
          <td colspan="4">
            <p class="cRed">游戏内灵力数值已调整，请以详情页数值为准</p>
          </td>
        </tr>
        <% } %>
      </table>
      <% if (enhance_info.time_lock) { %>
        <p class="tips-time-lock-tips">请注意，购买该物品将带有<%= enhance_info.time_lock_days || "90" %>天转服时间锁</p>
      <% } %>
    </div>
    <div class="col2">
      <div class="tabCont">
        <div class="p_info">

          <% if (evol_skill_list){ %>
            <h4>赐福技能</h4>
            <table cellspacing="0" cellpadding="0" class="tb03">
              <% for(var i=0; i < loop_times; i++) { %> 
                  <% var items = evol_skill_list.slice(i * num_per_line, (i+1) * num_per_line); %>
                  <tr>
                    <% for(var j=0; j < items.length; j++){ %>
                      <% var skill = items[j]; %>
                      <td style="position: relative;">
                        <% if (skill.hlightLight){ %>
                          <img src="<%= skill.icon %>" width="40" height="40" />
                          <div class="evol_skill_icon"></div>
                        <% } else { %>
                          <img style="filter: grayscale(100%);" src="<%= skill.icon %>" width="40" height="40" />
                          <div style="filter: grayscale(100%);" class="evol_skill_icon"></div>
                        <% } %>
                      </td>
                    <% } %>
                  </tr>
              <% } %>
            </table>
            <div class="blank12" style="clear:both"></div>
          <% } %>

          <h4>技能</h4>
          <div id="pet_tip_skill_grid" class="textCenter"></div>
          <p class="cYellow textCenter" id="pet_tip_notice_msg" style="display:none;margin-top:5px;">更多技能查看详细页面&raquo;</p>
        </div>
        
        <% if ("neidan" in pet) { %>
          <div class="p_info">
            <h4>内丹</h4>
<% if (pet.neidan.length == 0) { %>
	<p class="textCenter">无</p>
<% } else { %>
	<table width="100%" cellspacing="3" cellpadding="3" id="RolePetNeidan">
		<% for (var i=0; i < pet.neidan.length; i++){ %>
			<% var item = pet.neidan[i]; %>
		<tr>
			<td><img src="<%= item.icon %>" data_equip_name="<%= item.name %>"  data_skill_type="neidan" data_equip_desc="<%= item.desc %>" data_equip_level="<%= item.level %>" data_tip_box="SkillTipsBox"/></td>
			<th><%= item.name %></th>
			<td><%= item.level %>层</td>
		</tr>
		<% } %>
	</table>
<% } %>          </div>
        <% } %>
      </div>
    </div>
  </div>
</script>
<script id="recommands_list_template" type="html/text">
<!--
<%
  var title = this.title || "根据您浏览习惯为您推荐";
  var isSimilarRecomment = this.isSimilarRecommend;  
%>
<div class="hd clearfix">
    <% if(isSimilarRecomment) { %>
      <a href="###" class="change" style="display: none;" hidefocus="true" tid="web_buy_13">换一批</a>
    <% } else { %>
      <a href="###" class="change" hidefocus="true" tid="web_buy_13">换一批</a>
    <% } %>
    <span class="text"><%= title %></span>
</div>

<% 
  var equips = this.equips || [];
  var num_per_page = this.per_page || 6;
  var view_loc = this.view_loc || "";
  var max = Math.ceil(equips.length / num_per_page);
%>
<% for (var start = 1; start <= max; start++) { %>
  <ul class="guessList" data_index="<%= start %>" <%if (start != 1) { %>style="display: none;"<%}%> >
  <%
    var _equips = equips.slice((start - 1) * num_per_page, start * num_per_page);
    for (var i = 0; i < _equips.length; i++) {
      var equip = _equips[i];
      var url = get_equip_ico_url(equip);
      var isRole = window.StorageStype && StorageStype.role == equip.storage_type;
      var equipName = equip.equip_name;
      if (isRole) {
        try {
          var desc = js_eval(lpc_2_js(equip.desc));
          equipName = get_school_name(desc.iSchool);
        } catch (e) { }
      }

      var idata = equip;
      var cInfo = calcEquipLinkInfo(idata, {
        response: this.result || null,
        offset: i,
        view_loc: view_loc,
        query: {
          equip_refer: this.equip_refer
        }
      });
      var detail_url = cInfo.link;
  %>
      <li
        class="guessItem guessItemSell"
        log-exposure='<%= cInfo.exposure_str %>'
      >
      <div class="guessItemCont">
        <div class="guessItemPic">
          <a href="<%=detail_url %>" target="_blank">
            <span class="time-key-wap">
            <img src="<%=url %>" width="50" height="50" alt="物品"
data_equip_name='<%= htmlEncode(idata["equip_name"]) %>' data_equip_type_desc='<%= htmlEncode(idata["equip_type_desc"]) %>' data_equip_img="<%= idata["equip_face_img"] %>" data_storage_type='<%= idata["storage_type"] %>' data_equip_type="<%= idata["equip_type"] %>" data_price="<%=idata["price"] / 100 %>" data_selling_time="<%=idata["selling_time"] %>" data_create_time="<%=idata["create_time"] %>" data_kindid="<%=idata["kindid"] %>" data_serverid="<%=idata["serverid"] %>" data_ordersn="<%=idata["game_ordersn"]%>" data_status="<%=idata["equip_status"] %>" data_serversn="<%=idata["server_sn"] || idata["game_serverid"] %>" data_equip_level="<%= idata["equip_level"] || idata["level"] %>" data_seller_roleid="<%= idata["seller_roleid"] %>" data_recommd_tag="<%=idata["tag"]%>" data_appointed_roleid='<%= idata.appointed_roleid %>' data_time_lock="<%= idata.is_time_lock %>" data_time_lock_days="<%= idata.time_lock_days %>"
data_equipid='<%=idata.game_ordersn %>' 
data_owner_roleid='<%=idata.seller_roleid %>'
data_highlights='<%=JSON.encode(idata.highlights || idata.highlight || []) %>' 
data_reco_request_id="<%= idata.reco_request_id %>"
data_whole_game_ordersn="<%= idata.whole_game_ordersn %>"
<% 
    var dynamicTagsArr = [];
    if (idata.dynamic_tags) {
        for (var j = 0; j < idata.dynamic_tags.length; j++) {
            dynamicTagsArr.push(idata.dynamic_tags[j].name);
        }
    }
%>
data_dynamic_tags='<%=dynamicTagsArr %>'
<% if(idata.is_split_main_role == 1) { %>
data_sell_by_apart_type="0"
<% } else if(idata.is_split_independent_role == 1) { %>
data_sell_by_apart_type="1"
<% } else if(idata.is_split_independent_equip == 1) { %>
data_sell_by_apart_type="2"
<% } %>              <%if(view_loc){ %> data_view_loc="<%=view_loc%>" <%}%> 
            />
            <% if (equip.is_time_lock > 0) { %>
              <span class="icon-time-key big-time-key"></span>
            <% } %>
          </span>
          </a>
          <b class="label"></b>
        </div>
        <% if(isSimilarRecomment) { %>
          <p class="guessItemText">
            <span class="item name"><%=equipName %></span>
            <span class="item price"><%=get_color_price(parseFloat(equip.price)) %></span>
          </p>
          <p class="guessItemText">
            <span class="item info"><%=gen_highlight_html(equip.highlights, "|") %></span>
          </p>
          <p class="guessItemText">
            <span class="item server"><%=equip.area_name %>-<%=equip.server_name %></span>
          </p>
        <% } else { %>
          <p class="guessItemText">
            <span class="item price"><%=get_color_price(parseFloat(equip.price)) %></span>
            <span class="item name"><%=equip.equip_name %></span>
            <span class="item info"><%=gen_highlight_html(equip.highlights, "|") %></span>
          </p>
        <% } %>
      </div>
      <textarea id="equip_desc_<%=equip.game_ordersn %>" style="display:none">
        <%= equip.desc || JSON.decode(equip.other_info).desc %>
      </textarea>
      </li>
  <% } %>
  </ul>
<% } %>

<% if (this.more_url) { %>
  <% 
    var moreText = this.more_url_text || "查看更多";
    var moreURL = this.more_url || "/";
  %>
  <a class="moreBtn" href="<%= moreURL %>" target="_blank"><%= moreText %></a>
<% } %>
-->
</script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/equip_desc_parser.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/pet.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/js/game_auto_config.js"></script>    
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/xyq_setting_config.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/role_info_config.js"></script>

<script>
function get_window_height()
{
	return Window.getHeight() + Document.getScrollTop();
}

function show_money_tips_box(el)
{
	var equip_desc =  parse_desc_info($("equip_desc_" + el.getAttribute("data_equipid")).value.trim());
	var data = {
		"name": el.getAttribute("data_equip_name"),
		"type_desc": parse_style_info(el.getAttribute("data_equip_type_desc"), '#n'),
		"desc": parse_style_info(equip_desc),
		"icon_url": ResUrl + "/images/big/" + el.getAttribute("data_equip_img")
	};
	render_to_replace("TipsBox", "common_tips_template", data);
	adjust_tips_position(el);
}

function show_equip_tips_box(el)
{
	var equip_desc =  parse_desc_info($("equip_desc_" + el.getAttribute("data_equipid")).value.trim());
  var time_lock = el.getAttribute('data_time_lock');
      time_lock = time_lock > 0 || time_lock == 'true' ;
  var time_lock_days;
  if(time_lock) {
    time_lock_days = el.getAttribute('data_time_lock_days');
  }
	var data = {
		"name": el.getAttribute("data_equip_name"),
		"type_desc": parse_style_info(el.getAttribute("data_equip_type_desc"), '#n'),
		"desc": parse_style_info(equip_desc),
    'is_time_lock': time_lock,
    "time_lock_days": time_lock_days,
		"icon_url": ResUrl + "/images/big/" + el.getAttribute("data_equip_img")
	};
	render_to_replace("TipsBox", "common_tips_template", data);
	adjust_tips_position(el);
}

function show_pet_tips_box(el)
{
  
  var equip_display_conf = {"pet": {"skill_id_list": [661], "is_baobao": 1}, "search": {"is_hide_unreasonable_price_equips": 1}};
  var enhanceInfo = equip_display_conf.pet || {};
  var time_lock = el.getAttribute('data_time_lock');
      time_lock = time_lock > 0 || time_lock == 'true' ;
  var time_lock_days;
  if(time_lock) {
    time_lock_days = el.getAttribute('data_time_lock_days');
  }
  enhanceInfo.time_lock = time_lock;
  enhanceInfo.time_lock_days = time_lock_days;

  function parse_fashang_fafang(desc_info) {
    try {
      var data = JSON.decode(decode_desc(desc_info)); // 对内容解码
      return {
        fashang: data.fashang,
        fafang: data.fafang
      }
    } catch (e) {
      return {};
    }
  }
  var rawContent = $("equip_desc_" + el.getAttribute("data_equipid")).value;
	var pet_desc = parse_desc_info(rawContent);
  var newLinliData = parse_fashang_fafang(rawContent);
	var pet_attrs = get_pet_attrs_info(pet_desc, {
    only_basic_attr: true,
    fashang: newLinliData.fashang,
    fafang: newLinliData.fafang
  });
	var icon_src = ResUrl + "/images/big/" + el.getAttribute("data_equip_img");
	$('TipsBox').innerHTML = render('pet_tips_template', {"pet_attrs": pet_attrs, "icon_src": icon_src, "enhance_info": enhanceInfo });
	var conf = {"pet_skill_url": "https://cbg-xyq.res.netease.com/images/skill/", 
		"notice_node_name": "pet_tip_notice_msg",
		"skill_panel_name": "pet_tip_skill_grid",
		"table_class": "tb03",
    "enhance_skills": enhanceInfo.skill_id_list || []
  };
	show_pet_skill_in_grade(pet_attrs.all_skill, pet_attrs.sp_skill, 3, 4, conf, pet_attrs);
	adjust_tips_position(el);	
}

function show_role_tips_box(el) {
	var equipid = el.getAttribute("data_equipid");
	var other_info = parse_role_info( $("equip_desc_" + equipid).value );

  if (other_info['iMaxExpt1'] != undefined || other_info['all_skills'] != undefined) {
    return show_role_tips_box_common(el, other_info);
  }
  
}

function show_role_tips_box_common(el, other_info) {
  function make_img_name(img_name) {
    var img_id = parseInt(img_name)
    var addon = "";
    if (img_id < 10){
      addon = "000";
    } else if (img_id >= 10 && img_id < 100){
      addon = "00";
    } else if (img_id >= 100 && img_id < 1000){
      addon = "0";
    } 
    return addon + img_name;
  }

  function get_skill_icon(skillid) {
    var img_name = make_img_name(skillid) + ".gif";
    return ResUrl + "/images/role_skills/" + img_name;
  }
    
  function get_real_upexp(role_info){
    var exp_num = role_info["iUpExp"];
    if (role_info["ExpJw"] == undefined || role_info["ExpJwBase"]==undefined){
      return exp_num;
    }
    exp_num += role_info["ExpJw"] * role_info["ExpJwBase"];
    return exp_num;
  }

  function parse_role_tip_skill(role_info){
    var life_skill    = [];
    var ju_qing_skill = [];
    var school_skill  = {};
    var other_skill = {}
    var conf = Config.skill;
    var raw_skill_info = role_info["all_skills"];
    //yu_shou_shu = role_info["all_skills"]["221"];
    for (skill in raw_skill_info){
      var info = {"skill_id":skill, "skill_grade":raw_skill_info[skill], "skill_pos":0};
      info["skill_icon"] = get_skill_icon(skill);

      // 生活技能
      if (conf["life_skill"][skill]){
        info["skill_name"] = conf["life_skill"][skill];
        life_skill.push(info);
        other_skill[skill] = info

      // 门派技能
      } else if(conf["school_skill"][skill]){
        info["skill_name"] = conf["school_skill"][skill]["name"];
        info["skill_pos"]  = conf["school_skill"][skill]["pos"]
        school_skill[info['skill_pos']] = info;

      // 剧情技能
      } else if(conf["ju_qing_skill"][skill]){
        info["skill_name"] = conf["ju_qing_skill"][skill];
        ju_qing_skill.push(info);
        other_skill[skill] = info
      }
    }

    return {
      "school_skill"  : school_skill,
      "other_skill": other_skill
    };
  }
  
  var Config = new RoleNameConf();
  
  function _show_role_tips_box_common(el, other_info){
    var skills = parse_role_tip_skill(other_info);
    var img = el.querySelector('img');
    var node = img || el;
    var time_lock = node.getAttribute('data_time_lock');
    time_lock = time_lock > 0 || time_lock == 'true' ; //此处有点奇怪，服务端传的是0/1，返回的true/false
    var time_lock_days;
    if(time_lock) {
      time_lock_days = node.getAttribute('data_time_lock_days');
    }
    var school_skills = skills['school_skill'];
    var other_skills = skills['other_skill'];
    var school_skill_info = {};
    var other_skill_info = {}
    for (var i=1; i < 8; i++){
      var s = school_skills[i];
      if(s){
        school_skill_info["school_skill" + i + "_icon"]  = s.skill_icon;
        school_skill_info["school_skill" + i + "_grade"] = s.skill_grade;
        school_skill_info["school_skill" + i + "_name"]  = s.skill_name;
      } else {
        school_skill_info["school_skill" + i + "_icon"]  = EmptySkillImg;
        school_skill_info["school_skill" + i + "_grade"] = "";
        school_skill_info["school_skill" + i + "_name"]  = "";
      }
    }

    var role = {
      "nickname": other_info['cName'],
      'roleid': other_info['usernum'],
      'school_offer': other_info['iSchOffer'],
      'org_offer': other_info['iOrgOffer'],
      'school': other_info['iSchool'],
      'level': other_info['iGrade'],
      'race': get_role_iconid(other_info['iIcon']),
      'badness': other_info['iGoodness'] || other_info['iBadness'],
      'cash': (other_info['iCash']) || 0 + (other_info['iSaving'] || 0),
      'upexp': get_real_upexp(other_info),
      'is_time_lock': time_lock,
      "time_lock_days": time_lock_days,
      'icon': ResUrl + '/images/bigface/' + get_role_iconid(other_info["iIcon"]) + ".gif",
      'xian_yu': other_info['xianyu'] || 0
    };

    var key_maps = {
      201: "skill_qiang_shen",
      202: "skill_ming_xiang",
      203: "skill_anqi",
      204: "skill_dazao",
      205: "skill_caifeng",
      206: "skill_zhongyao",
      207: "skill_lianjin",
      208: "skill_pengren",
      209: "skill_zhuibu",
      210: "skill_taoli",
      211: "skill_yangsheng",
      212: "skill_jianshen",
      216: "skill_qiaojiang",
      217: "skill_ronglian",
      218: "skill_lingshi",
      230: "skill_qiang_zhuang",
      231: "skill_cuiling",
      237: "skill_shensu",
      151: "skill_gudong",
      152: "skill_jianzhu",
      153: "skill_danyuan",
      154: "skill_bianhua",
      155: "skill_huoyan",
      156: "skill_tiaoxi",
      157: "skill_dazao",
      158: "skill_qimen",
      159: "skill_miaoshou",
      160: "skill_xianling",
      161: "skill_baoshi",
      170: "skill_hanmo",
      197: "skill_danqing",
      239: "skill_wind_sense",
      240: "skill_rain_sense",
      241: "skill_snow_sense"

    };
    
    for (var p in key_maps) {
      var s = other_skills[p];
      var k = key_maps[p];
      role[k] = s ? s.skill_grade: 0;
    }
    
    var ctx = {
      "role": role,
      "school_skill": school_skill_info
    };
    
    // 从 parse_role_xiulian 和 parse_pet_ctrl_skill 中，获取相关属性
    if (window.RoleInfoParser) {
      var proto = RoleInfoParser.prototype;
      var data = Object.merge({}, proto, {
        result: {},
        raw_info: other_info
      });
      // 角色修炼信息 和 宠物控制技能
      proto.parse_role_xiulian.call(data);
      proto.parse_pet_ctrl_skill.call(data);
      
      Object.append(ctx, data.result || {});
    }
    render_to_replace("TipsBox", "role_tips_template", ctx);
    adjust_tips_position(el, $("TipsBox"));
  }

  window.show_role_tips_box_common = _show_role_tips_box_common;
  return _show_role_tips_box_common(el, other_info);
};


function show_tips_box()
{
	var el = $(this);
	var storage_type = el.getAttribute("data_storage_type");
  
  var $box = $("TipsBox");
  $box.set('class', $box.get('class').replace(/tip\-for\-\w+/g, ''));
  
	if (storage_type == StorageStype["money"]){
    $box.addClass('tip-for-money');
		show_money_tips_box(el);
	} else if (storage_type == StorageStype["equip"]){
    $box.addClass('tip-for-equip');
		show_equip_tips_box(el);
	} else if (storage_type == StorageStype["pet"]){
    $box.addClass('tip-for-pet');
		show_pet_tips_box(el);
	} else if (storage_type == StorageStype["role"]){
    $box.addClass('tip-for-role');
		show_role_tips_box(el);
	}
}

function hidden_tips_box()
{
	$("TipsBox").setStyle("display", "none");
}

function reg_tips_event()
{
	var el_list = $$("#soldList .soldImg img");
	for (var i=0; i < el_list.length; i++){
		var el = el_list[i];
    var substatus = el.get('data_substatus'); // #92117 【梦幻端游】基于低价值商品的高价上架限制策略_web&内嵌
    if (substatus != EQUIP_SUB_PROBLEM) {
      el.addEvent("mouseover", show_tips_box);
      el.addEvent("mouseout", hidden_tips_box);
    }
	}
}

function get_role_icon(raw_info){
    var role_info = js_eval( lpc_2_js( decode_desc(raw_info) ));
	return get_role_iconid(role_info["iIcon"]);
}

function set_equip_extra_info(equipid, storage_type, equip_face_img)
{
	if (storage_type != StorageStype["role"]){
		$("equip_img_" + equipid).src = ResUrl + "/images/small/" + equip_face_img; 
		return;
	}
	var icon = get_role_icon($("equip_desc_" + equipid).value.trim());
	$("equip_img_" + equipid).src =  ResUrl + "/images/role_icon/small/" + icon + ".gif";

}

function set_img_icon(){
	var el_list = $$("#soldList .soldImg img");
	for (var i=0; i<el_list.length; i++){
		var el = el_list[i];
		var equipid = el.getAttribute("data_equipid");
		var storage_type = parseInt(el.getAttribute("data_storage_type"));
		var equip_face_img = el.getAttribute("data_equip_img");
		if(storage_type != StorageStype["role"]){
			var icon_url = ResUrl + "/images/small/" + equip_face_img;
		} else {
			var icon = get_role_icon($("equip_desc_"+equipid).value.trim());
			var icon_url = ResUrl + "/images/role_icon/small/" + icon + ".gif";
		}
		el.src = icon_url;
	}
}

</script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/drag_slider.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/js/auto_search_config.js"></script>    
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/common/draw_tips.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/overall_search_com.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/overall_search_equip.js"></script>
<script type="text/javascript">
	var OverallSearchType = 'equip';
	var SearchUrl = '/cgi-bin/xyq_overall_search.py';
	var PageInfo = {"need_captcha": false};
	window.addEvent('domready', function(){
		$('sub_equip').addClass('on');
		new OverallEquipSearcher();

		if (PageInfo.need_captcha) {
			AjaxGuard.show_simple_captcha();
		}
    window.server_selector = new UserServerSelector();
		server_selector.show_user_server_info();
    new HotSearch('btn_equip_search');
	});
	var trace_log_name = ['show_equip_detail'];
</script>

<div id="search_empty_templ" style="display:none;">
<!--
	<p class="textCenter cRed pageTips">没有符合条件的商品</p>
-->
</div>

<script type="text/html" id="search_result_templ">
<% var equips=this.equips %>
<table width="100%" id="soldList" class="tb01" cellspacing="0" cellpadding="0" border="0" id="soldList" log-exposure-container="1">
	<tr id="order_menu">
		<th width="60">
			<a href="javascript:search_order_by('');" data_attr_name="" data_sort_way="single">综合排序</a>
		</th>
		<th><a href="javascript:search_order_by('level')" data_attr_name="level">等级</a></th>
		<th><a href="javascript:search_order_by('all_damage')" data_attr_name="all_damage">总伤</a></th>
		<th><a href="javascript:search_order_by('init_damage')" data_attr_name="init_damage">初伤</a></th>
		<th><a href="javascript:search_order_by('init_wakan')" data_attr_name="init_wakan">初灵</a></th>
		<th><a href="javascript:search_order_by('init_defense')" data_attr_name="init_defense">初防</a></th>
		<th><a href="javascript:search_order_by('init_hp')" data_attr_name="init_hp">初血</a></th>
		<th><a href="javascript:search_order_by('init_dex')" data_attr_name="init_dex">初敏</a></th>
		<th>宝石</th>
		<th>附加属性</th>
		<th>特技/特效</th>
		<th>套装</th>
		<th><a href="javascript:search_order_by('price')" data_attr_name="price">价格</a></th>
		<th>服务器</th>
		<th></th>
	</tr>
	<% var addon_arg = get_cross_buy_addon_args(); %>
	<% for(var i=0; i<equips.length; i++) { %>
		<%
			var equip = equips[i];
      var equip_other = {};
			if(equip.other_info != ""){
				equip_other = JSON.decode(equip["other_info"]);
			}

			var idata = equip;
			var cInfo = calcEquipLinkInfo(idata, {
				response: this.result || null,
				overall_search: true,
				offset: i,
				view_loc: window.equip_refer_loc,
				query: {
					equip_refer: 1
				}
			});
      var href = cInfo.link + (addon_arg ? "&" + addon_arg : "");;
		%>
		<tr log-exposure='<%= cInfo.exposure_str %>'>
			<td>
				<a href="<%= href %>" class="soldImg" target="_blank">
					<span class="time-key-wap">
						<img src="<%= ResUrl %>/images/small/<%= equip["equip_face_img"] %>" id="equip_img_<%= equip["game_ordersn"] %>" alt="物品" width="50" height="50"
data_equip_name='<%= htmlEncode(idata["equip_name"]) %>' data_equip_type_desc='<%= htmlEncode(idata["equip_type_desc"]) %>' data_equip_img="<%= idata["equip_face_img"] %>" data_storage_type='<%= idata["storage_type"] %>' data_equip_type="<%= idata["equip_type"] %>" data_price="<%=idata["price"] / 100 %>" data_selling_time="<%=idata["selling_time"] %>" data_create_time="<%=idata["create_time"] %>" data_kindid="<%=idata["kindid"] %>" data_serverid="<%=idata["serverid"] %>" data_ordersn="<%=idata["game_ordersn"]%>" data_status="<%=idata["equip_status"] %>" data_serversn="<%=idata["server_sn"] || idata["game_serverid"] %>" data_equip_level="<%= idata["equip_level"] || idata["level"] %>" data_seller_roleid="<%= idata["seller_roleid"] %>" data_recommd_tag="<%=idata["tag"]%>" data_appointed_roleid='<%= idata.appointed_roleid %>' data_time_lock="<%= idata.is_time_lock %>" data_time_lock_days="<%= idata.time_lock_days %>"
data_equipid='<%=idata.game_ordersn %>' 
data_owner_roleid='<%=idata.seller_roleid %>'
data_highlights='<%=JSON.encode(idata.highlights || idata.highlight || []) %>' 
data_reco_request_id="<%= idata.reco_request_id %>"
data_whole_game_ordersn="<%= idata.whole_game_ordersn %>"
<% 
    var dynamicTagsArr = [];
    if (idata.dynamic_tags) {
        for (var j = 0; j < idata.dynamic_tags.length; j++) {
            dynamicTagsArr.push(idata.dynamic_tags[j].name);
        }
    }
%>
data_dynamic_tags='<%=dynamicTagsArr %>'
<% if(idata.is_split_main_role == 1) { %>
data_sell_by_apart_type="0"
<% } else if(idata.is_split_independent_role == 1) { %>
data_sell_by_apart_type="1"
<% } else if(idata.is_split_independent_equip == 1) { %>
data_sell_by_apart_type="2"
<% } %>						/>
						<% if (equip["is_time_lock"]) { %>
							<span class="icon-time-key big-time-key"></span>
						<% } %>
					</span>
					<textarea id="other_info_<%= equip["game_ordersn"] %>" style="display:none"><%= equip["other_info"] %></textarea>
				</a>
				<textarea id="equip_desc_<%= equip["game_ordersn"] %>" style="display:none">
          <%= equip["desc"] || equip["large_equip_desc"] %>
        </textarea>
			</td>
			<td>
				<%= equip["equip_level"] %>
			</td>
			<td>
				<%= equip["all_damage"] %>
			</td>
			<td>
				<%= equip["init_damage"] %>
			</td>
			<td>
				<%= equip["init_wakan"] %>
			</td>
			<td>
				<%= equip["init_defense"] %>
			</td>
			<td>
				<%= equip["init_hp"] %>
			</td>
			<td>
				<%= equip["init_dex"] %>
			</td>
			<td>
				<% if(equip["gem_level"] > 0){ %>
					<%= get_names_by_value(equip["gem_value"], Gems).join("<br />") %>
					<br />
					锻炼等级：<%= equip["gem_level"] %>
				<% } %>
			</td>
			<td>
				<% if(equip_other.add_melt_attrs) { %>
					<%= equip_other.add_melt_attrs.join("<br />") %>
				<% } %>
			</td>
			<td>
				<% 
					var specials = []; 
					if(equip["special_effect"]){
						if(instanceOf(equip["special_effect"], Array)){
							var effects = equip["special_effect"];
						} else {
							var effects = equip["special_effect"].split("|");
							effects = effects.filter(function(v){return v.length>0});
						}
						effects = effects.map(function(v){return get_name_from_conf(parseInt(v), SpecialEffects)});
						specials = specials.concat(effects);
					}
					if(equip["special_skill"]){
						specials.push(get_name_from_conf(equip["special_skill"], SpecialSkills));
					}
				%>
				<%= specials.join("<br />") %>
			</td>
			<td>
				<% if(equip["suit_effect"]){ %>
				<%= get_suit_name_by_value(equip["suit_effect"]) %>
				<% } %>
			</td>
			<td>
				<% if (equip.is_show_alipay_privilege) { %>
          <span class="icon-tag-alipay"></span>
        <% } %> 
				<span><%= get_color_price(parseFloat(equip["price"] / 100)) %></span>

<%
  var cross_server_poundage = equip.cross_server_poundage || 0;
  var fair_show_poundage = equip.fair_show_poundage || 0;
  var cross_server_poundage_display_mode = equip.cross_server_poundage_display_mode;
  var cross_server_poundage_origin = equip.cross_server_poundage_origin || 0;
  var cross_server_poundage_discount = equip.cross_server_poundage_discount;
  var cross_server_poundage_discount_label = equip.cross_server_poundage_discount_label || "下单立减";
  if(cross_server_poundage_display_mode) {
    cross_server_poundage = cross_server_poundage_origin;
  }
%>
<% if (window.LoginInfo.login && cross_server_poundage) { %>
  <div class="f12px" style="cursor:default;">
    <% if (equip.pass_fair_show == 1) { %>
      <span class="cDGray">另需跨服费<span class="p1000">￥<%= fen2yuan(cross_server_poundage) %></span></span>
    <% } else { %>
      <span class="jsAutoTip cDGray" data-tip="span">另需信息费<span class="p1000">￥<%= fen2yuan(cross_server_poundage + fair_show_poundage) %></span></span>
      <span class="hidden">
        <span class="f12px cLGray">另需跨服手续费<span class="cLGreen">￥<%= fen2yuan(cross_server_poundage) %></span> + 预订费<span class="cLGreen">￥<%= fen2yuan(fair_show_poundage) %></span></span>
      </span>
      <%
        var key = "__fee_tip__";
        if (!this[key]) {
          this[key] = 1;
          setTimeout(function() {
            registerAutoTip($("soldList"), { target: ".jsAutoTip", tip: { dir: "bottom", y: 8 } });
          }, 100);
        }
      %>
    <% } %>
  </div>
<% } %>

<% if(cross_server_poundage_display_mode) { %>
<div class="cross-server-discount-tag">
  <span class="tag-name">限时</span>
  <span class="tag-discount-price"><%= cross_server_poundage_discount_label %>￥<%= fen2yuan(cross_server_poundage_origin - cross_server_poundage_discount) %></span>
</div>
<% } %>
			</td>
			<td>
				<%= equip["area_name"] %><br /><%= equip["server_name"] %>
				<% if(equip["server_name"] == "花样年华"){ %>
					<br/>
					<span style="font-size: 12px; font-weight: normal;" class="cGray">限时服务器-不支持转服</span>
				<% } %>
			</td>
			<td>
				<a class="btn1 jsStat" href="<%= href %>" target="_blank" style="padding:0 8px; margin-top:0px;">查看详情</a>
			</td>
		</tr>
	<% } %>
</table>
</script>
<div id="pager_templ" style="display:none;">
<!--
<% var pager = this.pager; %>
<div class="pages">
	第<%= pager["cur_page"] %>页,
	共<%= pager["num_end"] %>页
	<a href="javascript:goto(1)">首页</a>
	<% if(pager["cur_page"] != 1){ %>
		<a href="javascript:goto(<%= pager["cur_page"]-1 %>)">上一页</a> 
	<% } %>
	<%
		var end_page = pager["cur_page"] + 2;
		if(end_page > pager["num_end"]){
			end_page = pager["num_end"];
		}
	%>
	<% for (var i=pager["num_begin"]; i <= end_page; i++) { %>
		<% if(pager["cur_page"] != i){ %>
			<a href="javascript:goto(<%= i %>)"><%= i %></a>
		<% }else{ %>
			<a href="javascript:void(0)" class="on"><%= i %></a>
		<% } %>
	<% } %>
	<% if(pager["cur_page"] < pager["num_end"]){ %>
		<a href="javascript:goto(<%= pager["cur_page"]+1 %>)">下一页</a> 
	<% } %>
	<% if(pager["cur_page"] < pager["num_end"]){ %>
		<a href="javascript:goto(<%= pager["num_end"] %>)">末页</a> 
	<% } %>
	<% if(pager["need_input"] !== false){ %>
		<span>跳转至<input id="pager_input" type="text" size="3" class="txt1" onkeypress="pager_keydown_handler(this, event)" onkeydown="pager_keydown_handler(this, event)" />页</span>
	<% } %>
</div>
-->
</div>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/select_server_v1.js"></script>

<div id="no_server_select_templ" style="display:none">
<!--
	<p class="f14px">为保证精准为您找到可购买的商品，建议您先选择将要购买商品的账号所在的服务器。</p>
	<p class="inline-block">
		<span class="serverBtn" id="btn_show_server_select_box" tid="web_overall_9_1"><strong>选择服务器</strong></span>
	</p>
	<ul id="recent_selected_server" class="inline-block"></ul>
-->
</div>

<div id="user_server_info_templ" style="display:none">
<!--
	<div class="grideCont searchServer">
		<p class="f14px inline-block">购入商品的账号所在服务器：<%= this.area_name %> - <%= this.server_name %>
			<a href="javascript:void(0);" class="underline" id="btn_change_user_server" tid="web_overall_9_2">修改服务器</a>
		</p>
		<ul id="recent_selected_server" class="inline-block"></ul>
		<input type="hidden" name="user_serverid" id="user_serverid" value="<%= this.serverid %>" />
	</div>	
-->
</div>

<div id="area_list_templ" style="display:none">
<!--
<table class="serverArea" cellspacing="4" cellpadding="4">
	<% for (var i=0; i < AreaRowNum; i++){ %>
	<tr>
			<% for (var j=0; j < TableColNum; j++) { %>
					<% var el_id = i * TableColNum + j + 1; %>
					<td id="area_pos_<%= el_id%>">
						<a href="#" id="area_pos_<%= el_id%>_a"></a>
					</td>
			<% } %>	
	</tr>
	<% } %>
</table>
-->
</div>

<div id="server_list_templ" style="display:none">
<!--
<%
	var RowNum = 2;
	var ColumnNum = 7; 
%>
<table class="serverArea serverName" cellspacing="4" cellpadding="4">
	<% for (var i=0; i < ServerRowNum; i++){ %>
	<tr>
		<% for (var j=0; j < TableColNum; j++){ %>
			<% var el_id = i * TableColNum + j + 1; %>
			<td id="server_pos_<%= el_id%>">
				<a href="#" id="server_pos_<%= el_id%>_a"></a>
			</td>
		<% } %>
	</tr>
	<% } %>
</table>
-->
</div>


<div id="search_server_list_templ" style="display:none">
<!--
<% if (this.filter_server_list.length) { %>
<ul>
<% for (var i=0; i < this.filter_server_list.length; i++){ %>
	<% var item = this.filter_server_list[i]; %>
	<li data_serverid="<%= item.serverid %>" data_area_name="<%= item.area_name %>" data_server_name="<%= item.server_name %>"><%= item.server_name %></li>
<% } %>
</ul>
<% } %>
-->
</div>
<div style="display:none">
    <form method="post" name="query_form" action="/cgi-bin/xyq_overall_search.py" target="_blank">
        <input type="hidden" name="act" value="show_role_search_result" />
        <input type="hidden" name="args" id="query_args" />
        <input type="hidden" name="search_act" value="" />
    </form>
</div>
<div class="areaTop"></div>
<div class="subArea area">
<div class="areaHead">
	<div class="nav">
		<ul>
			<li class="on"><h3><a href="#">全服搜索</a></h3></li>
		</ul>
	</div>
</div>

<div class="subNav">
	<a href="https://xyq.cbg.163.com/cgi-bin/xyq_overall_search.py?act=show_search_role_form" id="sub_role" tid="web_overall_2">角色搜索</a>
	<a href="https://xyq.cbg.163.com/cgi-bin/equipquery.py?act=show_overall_search_equip" id="sub_equip" tid="web_overall_4">装备搜索</a>
	<a href="https://xyq.cbg.163.com/cgi-bin/equipquery.py?act=show_overall_search_pet" id="sub_pet" tid="web_overall_5">召唤兽搜索</a>
	<a href="https://xyq.cbg.163.com/cgi-bin/xyq_overall_search.py?act=show_overall_search_yuanshen" id="sub_yuanshen" tid="web_overall_6">元身搜索</a>
	<a href="https://xyq.cbg.163.com/cgi-bin/xyq_overall_search.py?act=show_pet_equip_search_form" id="sub_pet_equip" tid="web_overall_7">召唤兽装备搜索</a>
	<a href="https://xyq.cbg.163.com/cgi-bin/xyq_overall_search.py?act=show_overall_search_lingshi" id="sub_lingshi" tid="web_overall_8">灵饰搜索</a>
	
</div>
	<div class="content">
<div id="overall_hot_search_panel"></div>
<div id="overall_hot_search_temp" style="display: none;">
<!--
<%
	if (this.labels) { 
%>
  <div class="filter hot-search-panel">
		<strong><%= this.title %>：</strong>
		<ul class="overall-top-list hot-search-list">
			<% for (var i = 0; i < this.labels.length; i++) { 
				var item = this.labels[i];
			%>
				<li class="tipsBtn jsHotSearchTips" data-index="<%= i %>" tid="web_overall_19" data_trace_text="<%= item.name %>" title="<%= item.name %>" ><%= item.name %></li>
			<% 
			}
			%>
		</ul>
	</div>
<% } %>
-->
</div>
<div id="overall_search_saved_query_panel"></div>
<div style="display:none" id="overall_search_saved_query_templ">
<!--
<%
	if (this.saved_query.length > 0 && this.desc_nav.length > 0 ) { 
%>
	<div class="filter">
		<strong>最近搜索：</strong>
		<ul class="overall-top-list">
			<% for (var i=0; i < this.saved_query.length; i++){ 
				var query = this.saved_query[i];
				var desc_nav = this.desc_nav[i];
				var desc_modal = JSON.encode(this.desc_modal[i]);
				if (desc_nav && desc_nav != "" ) {
			%>
				<li class="tipsBtn" data-query='<%= desc_modal %>' tid="web_overall_17" data_trace_text="<%= get_trace_text() %>" >
					<a href="javascript:do_saved_query(<%=i %>)" class="recentDesc"><%= desc_nav %></a>
					<a href="javascript:del_overall_search_saved_query(<%=i %>);">×</a>
				</li>
			<% 
				} 
			}
			%>
		</ul>
	</div>
<% } %>
-->
</div>
<div class="overall_search_modal" id="overall_search_save_modal"></div>
<div style="display:none;" id="overall_search_save_modal_templ">
<!-- 
  <div id="modal-content" >
		<table class="modal-item">
			<tbody>	
		    <% 
			    var data=this.modal_data;
		      for (var i = 0; i < data.length; i++) { 
			  %>
			    <tr>
            <th><%= data[i][0] %>:</th>
            <td><%= cut_text(data[i][1],30,40) %></td>
			    </tr>	
			<% } %>	
			</tbody>
		</table>			
  </div> 
-->
</div>

<script type="text/javascript">
	var SAVED_OVERALL_SEARCH_QUERY_STORAGE_KEY = 'saved_overall_search_' + OverallSearchType + '_query';
	var timer =null;
	function load_overall_search_saved_query_list(){
		var saved_query = localStorage.getItem(SAVED_OVERALL_SEARCH_QUERY_STORAGE_KEY);
		if(!saved_query){
			return null;
		}
		try{
			saved_query = JSON.decode(saved_query);
		}catch(e){
			localStorage.setItem(SAVED_OVERALL_SEARCH_QUERY_STORAGE_KEY, '');
			return null;
		}

		return saved_query;
	}

	function get_trace_text() {
		var config = {
			role: '角色',
			equip: '装备',
			pet: '召唤兽',
			yuanshen: '元身',
			pet_equip: '召唤兽装备',
			lingshi:'灵饰'
		}
		return config[OverallSearchType] || '-';
	}

	function init_overall_search_saved_query(){
		var saved_query_list = load_overall_search_saved_query_list();
		if(!saved_query_list){
			return;
		}
		var get_query_desc = new GetSavedQueryDesc(saved_query_list);
    var all_desc = get_query_desc.get_all_desc();
    
		render_to_replace('overall_search_saved_query_panel', 'overall_search_saved_query_templ', {'saved_query': saved_query_list, desc_nav: all_desc.navBarDesc, desc_modal: all_desc.modalDesc });
	}
	
	function do_saved_query(idx){
		var saved_query_list = load_overall_search_saved_query_list();
		if(!saved_query_list || saved_query_list.length <= idx){
			return;
		}
		
		var saved_query = saved_query_list[idx];
		restore_query_form(saved_query); 
	}

	function update_overall_search_saved_query(){
		var saved_query_list = load_overall_search_saved_query_list();
		if(!saved_query_list){
			saved_query_list = [];
		}

		var cur_query = {};
		if(window.CurSearchValue && CurSearchValue.arg){
			cur_query = CurSearchValue.arg;
		}else if($('query_args') && $('query_args').value){
			cur_query = JSON.decode($('query_args').value);
		}else if(window.QueryArgs){
			cur_query = QueryArgs;
			if(cur_query.page){
				delete cur_query.page;
			}
		}

		var json_str = JSON.encode(cur_query);
		for(var i=0;i<saved_query_list.length;i++){
			var saved_json_str = JSON.encode(saved_query_list[i]);
			if(json_str === saved_json_str){
				break;
			}
		}

		if(i < saved_query_list.length){
			saved_query_list.splice(i, 1);
		}

		saved_query_list.unshift(cur_query);
		if(saved_query_list.length > 5){
			saved_query_list = saved_query_list.slice(0, 5);
		}

		localStorage.setItem(SAVED_OVERALL_SEARCH_QUERY_STORAGE_KEY, JSON.encode(saved_query_list), {'duration': 30});
		
		init_overall_search_saved_query();
	}

	$('overall_search_saved_query_panel').addEvent('mouseover:relay(.tipsBtn)', function(e){
	    show_recent_search_modal(this,e);
	});
	$('overall_search_saved_query_panel').addEvent('mouseout:relay(.tipsBtn)', function(e){
	    hide_recent_search_modal();
	});	
  function show_recent_search_modal($child, e) {
    var childOffset = $child.getCoordinates();
    var parentOffset = $($child.getOffsetParent()).getCoordinates();
      var childLeft = childOffset.left,
      childWidth = childOffset.width,
      childHeight = childOffset.height,
      childRight = childOffset.right,
      childTop = childOffset.top;
      var parentLeft = parentOffset.left,
      parentTop = parentOffset.top;
    var originData = JSON.decode($child.getAttribute('data-query'));
    render_to_replace('overall_search_save_modal', 'overall_search_save_modal_templ', { 'modal_data': originData });
    var modalWidth=$('overall_search_save_modal').getStyle('width').toInt() + 30; 
    var left = childLeft - parentLeft > 500 ? childLeft - parentLeft -(modalWidth-childWidth) : childLeft - parentLeft;	
    timer = setTimeout(function(){  
      //需求需要鼠标悬上0.4秒才显示
      $('overall_search_save_modal').setStyles({
        left: left,
        top: childTop - parentTop + childHeight + 3,
        visibility: 'visible' 
      });				
    },400);	    		
  }	

	function hide_recent_search_modal(){
		clearTimeout(timer);
		$('overall_search_save_modal').setStyles({
			'visibility':'hidden',
			'left':'50%'
		});
		$('overall_search_save_modal').innerHTML='';
		timer=null;
	}

	function cut_text(text,minLen,maxLen) {
    var text = text,
        len = text.length,
        minLen = minLen;
	  if (len > maxLen) {
      if(text.substring(minLen, minLen+1) != ",") {
        var subText = text.substr(minLen, 15); //向后截取15个字符，获取到有逗号或者空的位置。
        for(var i = 0;i < subText.length;i++) {
          if(subText.substring(i,i+1) == ",") {
            minLen += i;
            break;
          }
        }
      } 
      text = text.substr(0, (minLen+1)) + '<br>' + text.substr((minLen+1), maxLen) + '...';
		}
		return text;
	}

	function del_overall_search_saved_query(idx){
		var saved_query_list = load_overall_search_saved_query_list();
		if(!saved_query_list || saved_query_list.length <= idx){
			return;
		}
		
		saved_query_list.splice(idx, 1);

		localStorage.setItem(SAVED_OVERALL_SEARCH_QUERY_STORAGE_KEY, JSON.encode(saved_query_list), {'duration': 30});

		init_overall_search_saved_query();
		hide_recent_search_modal();
	}

	window.addEvent('domready', function() {
		init_overall_search_saved_query();	
	})
</script>
		<div class="cols hasLayout">

			<div class="divGride searchForm">
				<div class="title">
					<span><a href="javascript:;" class="fB f14px" id="btn_reset_user_server">重置</a></span>
					<h3 class="f14px textLeft fB" data-title="选择服务器">选择服务器</h3>
				</div>
			</div>
				
			<div id="user_server_info_box" class="grideCont searchServer"></div>
			
			<div class="divGride searchForm js_search_form">

				<div class="title">
					<span><a href="javascript:;" class="fB f14px" id="reset_equip_attr">重置</a></span>
					<h3 class="f14px textLeft fB js_form_title" data-title="武器装备">武器装备</h3>
				</div>

				<!-- grideCont开始 -->
				<div class="grideCont">

<table width="100%" cellspacing="0" cellpadding="0" class="searcTb">
	<col width="120" /><col/>
	<tr>
		<th class="js_sub_title" data-title="等级">
			<div class="blank24"></div>
			等级：
		</th>
		<td>
			<div class="blank24"></div>
			<div class="levelSlider" id="level_slider">
				<div class="track" style="width:198px;"></div>
				<div class="bar" style="width:200px;"></div>
				<div class="startPoint">
					<div class="num">70级</div>
				</div>
				<div class="endPoint">
					<div class="num">150级</div>
				</div>
				<div class="nodes">
					<ul>
						<li></li>
						<li></li>
						<li></li>
						<li></li>
						<li></li>
						<li></li>
						<li></li>
						<li></li>
						<li></li>
						<li></li>
						<li></li>
					</ul>
				</div>
			</div>
		</td>
	</tr>
	<tr>
		<th class="js_sub_title" data-title="类型">类型：</th>
		<td>
			<ul class="btnList" id="kind_check_panel">
			</ul>
			<div class="blank9 hasLayout"></div>
			武器：
			<select id="for_role_race">
				<option value="">不限</option>
				<option value="999">所有</option>
			</select>
			防具：
			<select id="for_role_sex">
				<option value="">不限</option>
				<option value="999">所有</option>
				<option value="1">男性角色</option>
				<option value="2">女性角色</option>
			</select>
		</td>
	</tr>
	<tr>
		<th class="js_sub_title" data-title="特效">特效：</th>
		<td>
			<div id="check_mode_panel">
				<label><input type="radio" name="check_mode" value="and" checked="checked"> 都满足</label>
				<label><input type="radio" name="check_mode" value="or"> 满足一种</label>
			</div>
			<div class="blank9 hasLayout"></div>
			<ul class="btnList" id="special_effect_panel">
			</ul>
		</td>
	</tr>
	<tr>
		<th class="js_sub_title" data-title="特技">特技：</th>
		<td>
			<div class="blank9 hasLayout"></div>
			<ul class="btnList" id="special_skill_panel" style="width:960px;">
			</ul>
			<a href="javascript:void(0)" title="全部特技" class="listAll" id="btn_all_special_skill">全部特技&raquo;</a>
		</td>
	</tr>
	<tr>
		<th class="js_sub_title" data-title="套装">套装：</th>
		<td>
			<div id="suit_effect_panel" style="position:relative;">
			<label><input type="radio" name="rdo_suit_effect" value="shortcut" id="radio_short_cut" checked="checked" /></label>
			<select id="sel_short_cut" onfocus="$('radio_short_cut').checked='checked';"><option value="">--不限--</option></select>
			<label>
				<input type="radio" name="rdo_suit_effect" value="added_status" id="radio_added_status">附加状态
			</label><input type="input" id="txt_added_status" size="6" onfocus="$('radio_added_status').checked='checked'" />
			<label>
				<input type="radio" name="rdo_suit_effect" value="append_skill" id="radio_append_skill">追加法术
			</label><input type="input" id="txt_append_skill" size="6" onfocus="$('radio_append_skill').checked='checked'" />
			<label>
				<input type="radio" name="rdo_suit_effect" value="transform_skill" id="radio_transform_skill">变身术之
			</label><input type="input" id="txt_transform_skill" size="6" onfocus="$('radio_transform_skill').checked='checked'" />
			<label>
				<input type="radio" name="rdo_suit_effect" value="transform_charm" id="radio_transform_charm">变化咒之
			</label><input type="input" id="txt_transform_charm" size="6" onfocus="$('radio_transform_charm').checked='checked'" />
			</div>
		</td>
	</tr>
	<tr>
		<th class="js_sub_title" data-title="属性">属性：</th>
		<td>
			初伤（包含命中）&ge; <input type="text" size="6" class="txt1" id="txt_init_damage" />&nbsp;&nbsp;&nbsp;初伤（不含命中）&ge; <input type="text" size="6" class="txt1" id="txt_init_damage_raw" />&nbsp;&nbsp;&nbsp;初防&ge; <input type="text" size="6" class="txt1" id="txt_init_defense" />&nbsp;&nbsp;&nbsp;初血&ge; <input type="text" size="6" class="txt1" id="txt_init_hp" />&nbsp;&nbsp;&nbsp;初敏&ge; <input type="text" size="6" class="txt1" id="txt_init_dex" />&nbsp;&nbsp;&nbsp;初灵&ge; <input type="text" size="6" class="txt1" id="txt_init_wakan" />
			<div class="blank9 hasLayout"></div>
			总灵&ge; <input type="text" size="6" class="txt1" id="txt_all_wakan" />总伤&ge; <input type="text" size="6" class="txt1" id="txt_all_damage" />&nbsp;&nbsp;&nbsp;伤害&ge; <input type="text" size="6" class="txt1" id="txt_damage" />
			<label><input type="checkbox" id="chk_attr_with_melt" checked> 计算熔炼效果</label>
	</td>
	</tr>
	<tr>
		<th class="js_sub_title" data-title="属性计算">属性计算：</th>
		<td>
			<ul class="btnList" id="sum_attr_panel">
			</ul>
			<div class="blank6 hasLayout"></div>
			属性总和&ge; <input type="text" size="6" class="txt1" id="txt_sum_attr_value" />
			<label><input type="checkbox" id="chk_sum_attr_with_melt" checked> 计算熔炼效果</label>
		</td>
	</tr>
  
  <tr>
		<th class="js_sub_title" data-title="160级装备特性">160级装备特性：</th>
		<td>
			<select id="160_attr">
        <option value="">所有</option>
      </select>
		</td>
	</tr>
  
	<tr>
		<th class="js_sub_title" data-title="镶嵌宝石">镶嵌宝石：</th>
		<td>
			<ul class="btnList" style="width:560px;float:left;" id="gem_panel">
			</ul>
			<br style="clear:both;" />
			<br />
			宝石锻炼等级&ge;<input type="text" size="6" class="txt1" id="txt_gem_level" />
			<label><input type="checkbox" id="chk_filter_hun_da_gem"> 过滤混打宝石</label>
		</td>
	</tr>
	<tr>
		<th class="js_sub_title" data-title="装备开运">装备开运：</th>
		<td>
			装备开孔数目&ge; <input type="text" size="6" class="txt1" id="txt_hole_num" />
			<br /><br />
			限开启星位：<input type="checkbox" value="1" id="chk_star" />
		</td>
	</tr>
	<tr>
		<th class="js_sub_title" data-title="装备出处">装备出处：</th>
		<td>
			<ul class="btnList" style="width:560px;float:left;" id="produce_from_panel">
			</ul>
		</td>
	</tr>
	<tr>
		<th class="js_sub_title" data-title="修理失败">修理失败：</th>
		<td>
			修理失败次数&le; <input type="text" size="6" class="txt1" id="txt_repair_fail" />
		</td>
	</tr>

	<tr>
		<th class="js_sub_title" data-title="价格">价格：</th>
		<td><input type="text" size="7" class="txt1" id="txt_price_min" /> 到 <input type="text" size="7" class="txt1" id="txt_price_max" /></td>
	</tr>
	<tr>
		<th class="js_sub_title" data-title="出售状态">出售状态：</th>
		<td>
			<ul class="btnList" id="fair_show_panel"></ul>
		</td>
	</tr>
</table>
				</div>
				<!-- grideCont结束 -->
			</div>

			<div class="divGride searchForm js_search_form">
				<div class="title">
					<span><a href="javascript:;" class="fB f14px" id="reset_server_info">重置</a></span>
					<h3 class="f14px textLeft fB js_form_title" data-title="服务器范围">服务器范围</h3>
				</div>
				<!-- grideCont开始 -->
				<div class="grideCont">
					<table width="99%" cellspacing="0" cellpadding="0" class="searcTb">
            <col width="100" />
            <tr>
              <th class="fB js_sub_title"  data-title="开服时间">开服时间：</th>
              <td>
                <ul class="btnList" id="server_type_panel"></ul>
              </td>
            </tr>
<tr>
  <th class="fB js_sub_title"  data-title="指定区服">指定区服：</th>
  <td>
    <select id="overall_sel_area"></select>
    区
    <select id="ovarall_sel_server"></select>
    服务器
    <ul class="btnList choice-login-server">
      <li id="js_choice_login_server" style="display:none;"><span>选择已登录服务器</span></li>
    </ul>
  </td>
</tr>

<script>
  var OverallAppointServer = new Class({

    Extends: DropSelectServer,	

    initialize: function(server_type_checker) {
      this.parent($('overall_sel_area'), $('ovarall_sel_server'));
      this.server_type_checker = server_type_checker;
      this.init_login_server_btn();
      this.reg_event();
    },

    init_login_server_btn: function() {
      if(ServerInfo.area_id && ServerInfo.server_id) {
        var $jsChoiceServerBtn = $('js_choice_login_server');
        $jsChoiceServerBtn.setStyle('display','block');
        $jsChoiceServerBtn.set({
          'data-area_id': ServerInfo.area_id,
          'data-server_id': ServerInfo.server_id
        });
        this.bind_event();
      }
    },

    handle_login_server_btn: function() {
      if (ServerInfo.area_id && ServerInfo.server_id) {
        if ($('overall_sel_area').value == ServerInfo.area_id && $('ovarall_sel_server').value == ServerInfo.server_id) {
          $('js_choice_login_server').addClass('on');
        } else {
          $('js_choice_login_server').removeClass('on');
        }
      }
    },

    // 重写父集方法
    reg_event: function () {
      var ctx = this;
      ctx.area_el.addEvent('change', function () {
        ctx.gen_server_box();
        if($('overall_sel_area').value) {
          ctx.server_type_checker.add_disable();
        } else {
          ctx.server_type_checker.reset_value();
        }
        ctx.handle_login_server_btn();
      });
      ctx.server_el.addEvent('change',function() {
        ctx.handle_login_server_btn();
      });
    },

    bind_event: function() {
      var ctx = this;
      $('js_choice_login_server').addEvent('click',function() {
        var $this = $(this);
        ctx.server_type_checker.reset_value(); // 重置开服时间button
        if ($this.hasClass('on')) {
          $this.removeClass('on');
          ctx.area_el.set('value', '');
          ctx.gen_server_box();
        } else {
          var area_id = $this.get('data-area_id');
          var server_id = $this.get('data-server_id');
          var $selectAreaOption = $('overall_sel_area').getElement('option[value=' + area_id + ']');
          if ($selectAreaOption) {
            $selectAreaOption.set('selected', 'selected');
            ctx.gen_server_box();
          }
          var $selectServerOption = $('ovarall_sel_server').getElement('option[value=' + server_id + ']');
          if ($selectServerOption) {
            $selectServerOption.set('selected', 'selected');
          }
          $this.addClass('on');
          ctx.server_type_checker.add_disable();
        }
      });
    },
    
    reset_value: function () { //外部的重置调用
      this.area_el.set('value', '');
      this.gen_server_box();
      $('js_choice_login_server').removeClass('on');
    },

    get_serverid: function() {
      return $('ovarall_sel_server').value || '';
    }
  });
</script>					</table>
				</div>
				<!-- grideCont结束 -->
			</div>

			<div class="searchSbmt hasLayout" style="padding-left: 460px;">
				<div class="searchbtCon" style="width:150px;">
					<a href="javascript:;" class="os-btn os-btn-red fB" id="btn_equip_search">全服搜索</a>
					<span id="loading_img" style="display:none;"><img src="https://cbg-xyq.res.netease.com/images/loading.gif" /></span>
				</div>
				<div style="height:38px;line-height:38px;float:left;">
					<a href="javascript:;" class="os-btn fB" id="reset_all">重置</a>
				</div>
			</div>
			<div style="text-align:center;padding-bottom: 20px;" class="f14px">
        转服购买物品，请留意可转服范围，<a href="http://xyq.163.com/2011/zhuanyi/shuoming.html" target="_blank" class="os-link underLine">点击查询转服规则</a>&nbsp;<a href="javascript:;" class="os-link underLine" id="link_search_related_role" tid="web_overall_16" data_trace_text="装备">查看携带满足搜索条件装备的角色</a>
      </div>
			<div id="search_result"></div>
			<div class="blank12"></div>
			<div id="pager"></div>
		</div>
	</div>
</div>
<div class="areaBtm"></div>

<ul class="overall-sidebar-nav" id="overallSidebarNav" style="display: none;">
  <script type="text/html" id="overall_sidebar_templ">
    <% var data = this.data; %>
    <% for(var i = 0; i < data.length; i++) { %>
    <li>
      <% var title = data[i][0]; %>
      <% var subList = data[i][1]; %>
      <% var isDefaultColse = data[i][2]; %>
      <% if(title) { %>
      <h2 class="title">
        <i class="icon-switch js_toggle <% if(isDefaultColse) { %>fold<% } %>" data-toggle-title="<%= title %>">
          <%= isDefaultColse ? "+" : "-"%>
        </i>
        <span class="text js_nav" data-title="title"><%= title %></span>
      </h2>
      <% } %>
      <% if(subList && subList.length) { %>
      <% var hideStyle =isDefaultColse ? "display:none;" : "" %>
      <ul class="tree-node js_tree_node" data-toggle-title="<%= title %>" style="<%= hideStyle %>">
        <% for(var j = 0; j < subList.length; j++) { %>
        <li class="tree-item js_nav"><%= subList[j] %></li>
        <% } %>
      </ul>
      <% } %>
    </li>
    <% } %>
  </script>
</ul>

<script>
;(function() {
  
  var OverallSibarNav = new Class({
    
    initialize : function(options) {
      this.$root = $('overallSidebarNav');
      this.render();
      this.bindEvent();
    },
    
    getNavData: function() {
      var $searchForm = $$('.js_search_form');
      var result = [];
      for(var i = 0, len1 = $searchForm.length; i < len1; i++) {
        var data = [];
        var $item = $searchForm[i];
        var $mainTitleElem = $item.getElement('.js_form_title');
        var $subTitleElems = $item.getElements('.js_sub_title');
        var title = '';
        var isDefaultColse = false;
        if($mainTitleElem) {
          title = $mainTitleElem.get('data-title');
          isDefaultColse = $mainTitleElem.get('data-close');
        }
        var subTitles = [];
        if($subTitleElems && $subTitleElems.length) {
          for(var j = 0, len2 = $subTitleElems.length; j < len2; j++) {
            var subTitle = $subTitleElems[j].get('data-title');
            subTitles.push(subTitle);
          }
        }
        data[0] =  title;
        data[1] =  subTitles;
        if(isDefaultColse) {
          data[2] = true;
        }
        result.push(data);
      }
      return result;
    },

    render: function() {
      var data = this.getNavData();
      if(data.length) {
        render_to_replace('overallSidebarNav', 'overall_sidebar_templ', { data: data });
        this.$root.setStyle('display', '');
      }
    },

    bindEvent: function() {
      this.$root.addEvent('click:relay(.js_nav)', function() {
        $$('#advance_search_box').setStyle('display', 'block');
        var title = $(this).get('text');
        var $elem = $$('.js_search_form [data-title='+ title +']');
        if($elem) {
          var offset = $elem.getCoordinates()[0];
          window.scrollTo(0, offset.top - 3); // -3是预留一些边距，更完美些
        }
      });
      this.$root.addEvent('click:relay(.js_toggle)', function() {
        var $this = $(this);
        var $expandList = $$('.js_tree_node[data-toggle-title='+ $this.get('data-toggle-title') +']');
        if($this.hasClass('fold')) {
          $this.removeClass('fold');
          $this.set('html', '-');
          $expandList.setStyle('display', '');
        } else {
          $this.addClass('fold');
          $this.set('html', '+');
          $expandList.setStyle('display', 'none');
        }
      });
    }

  });

  window.addEvent('domready', function() {
    new OverallSibarNav();
  });

})();
</script><!--页脚-->
<div class="areaTop"></div>
<div class="footer area clearfix">
	<div class="qrcode-item">
		<img src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/images/qrcode_download_other2.png" id="footerDownloadApp" alt="">
		手机藏宝阁
	</div>
	<div class="qrcode-item">
		<img src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/images/qrcode_weChat_public.png" alt="">
		藏宝阁微信公众号
	</div>
<style type="text/css">
.cbg-copyright {width:840px;text-align:left;margin:0 auto;padding:15px 0 10px;font-size:12px;line-height:20px;}
.cbg-copyright .nie-cn-logo {display:inline-block;vertical-align:middle;height:48px;min-width:300px;}
.cbg-copyright .nie-cn-logo a {display:inline-block;vertical-align:top;margin-top:2px;}
.cbg-copyright .nie-cn-logo a.a0 img {padding-right:0;}
.cbg-copyright .nie-cn-logo img {padding-right:15px;padding-top:5px;border:0;vertical-align:middle;}
.cbg-copyright .nie-cn-nav {display:inline-block;vertical-align:top;position:relative;z-index:1;}
.cbg-copyright .nie-cn-nav i {font-style:normal;}
.cbg-copyright .nie-cn-nav i.nie-cn-nav-i2 {height:28px;line-height:28px;text-align:left;}
.cbg-copyright .nie-cn-nav a {text-decoration:none;}
.cbg-copyright .nie-cn-nav a:hover {text-decoration:underline;}
.cbg-copyright .nie-cn-nav .nie-cn-reportcenter {padding-left:18px;font-style:normal;}
</style>
<div class="cbg-copyright">
  <div class="nie-cn-part1">
    <span class="nie-cn-logo">
    <a class="a0" href="http://www.163.com" target="_blank"><img src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/images/netease.2.png?v=20220427"></a><a class="a1" href="https://game.163.com" target="_blank"><img src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/images/nie.2.png"></a>
    </span>
    <span class="nie-cn-nav">
      <i class="nie-cn-nav-i1">
      <a href="http://gb.corp.163.com/gb/about/overview.html" target="_blank">公司简介</a> - <a href="http://help.163.com/" target="_blank">客户服务</a> - <a href="https://cbg.163.com/app-static/app_license.html" target="_blank">服务协议</a> - <a href="https://cbg.163.com/app-static/privacy_policy.html" id="footerLinkLaw" target="_blank">隐私政策</a> - <a href="https://game.163.com/about/" target="_blank">网易游戏</a> - <a href="https://game.163.com/contact/" target="_blank">联系我们</a> - <a href="https://game.163.com/contact/business.html" target="_blank">商务合作</a> - <a href="https://game.163.com/job/" target="_blank">加入我们</a>
      </i>
      <br>
      <i class="nie-cn-nav-i2">
      网易公司版权所有 &copy;1997-现在 禁止使用爬虫采集数据和转载商业化
      </i>
      <br>
      <i class="nie-cn-nav-i1">
        本平台交易的虚拟物品不适用于七天无理由退换货
      </i>
      <br>
      <i class="nie-cn-nav-i1">
        如需关闭个性化推荐，请前往藏宝阁app设置
      </i>
    </span>
  </div>
</div>
<script>
  ;(function() {
    var isXyq = /xyq/g.test(window.location.host);
    var $footerLinkLaw = document.getElementById('footerLinkLaw');
    if (isXyq) {
      $footerLinkLaw.innerHTML = '隐私政策';
      $footerLinkLaw.setAttribute('href','https://xyq.cbg.163.com/privacy_policy.html');
    }
  })();
</script>
<script src="//cbg.res.netease.com/cbg/common.js"></script>
</div>
<div class="areaBtm"></div>
<div class="blank12"></div>
<script>var SHARE_FROM_XYQ = true;</script>
<script>var SHARE_RES_URL = "https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084";</script>
<script crossorigin src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/share_init.js" no-tracer></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/rcc10a11c2d3fb39c7e084/js/trace.js"></script>
<script crossorigin type="text/javascript" src="https://cbg-xyq.res.netease.com/cbg_tgxc/xyq_tgxc.js"></script>
</body>
</html>